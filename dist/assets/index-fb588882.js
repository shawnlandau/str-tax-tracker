var dI=Object.defineProperty;var fI=(t,e,n)=>e in t?dI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var se=(t,e,n)=>(fI(t,typeof e!="symbol"?e+"":e,n),n);function pI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function mI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sw={exports:{}},ih={},ow={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=Symbol.for("react.element"),gI=Symbol.for("react.portal"),yI=Symbol.for("react.fragment"),vI=Symbol.for("react.strict_mode"),_I=Symbol.for("react.profiler"),xI=Symbol.for("react.provider"),wI=Symbol.for("react.context"),bI=Symbol.for("react.forward_ref"),EI=Symbol.for("react.suspense"),TI=Symbol.for("react.memo"),SI=Symbol.for("react.lazy"),Jy=Symbol.iterator;function II(t){return t===null||typeof t!="object"?null:(t=Jy&&t[Jy]||t["@@iterator"],typeof t=="function"?t:null)}var aw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lw=Object.assign,cw={};function ao(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||aw}ao.prototype.isReactComponent={};ao.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ao.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uw(){}uw.prototype=ao.prototype;function qp(t,e,n){this.props=t,this.context=e,this.refs=cw,this.updater=n||aw}var Kp=qp.prototype=new uw;Kp.constructor=qp;lw(Kp,ao.prototype);Kp.isPureReactComponent=!0;var Zy=Array.isArray,hw=Object.prototype.hasOwnProperty,Gp={current:null},dw={key:!0,ref:!0,__self:!0,__source:!0};function fw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hw.call(e,r)&&!dw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:rl,type:t,key:s,ref:o,props:i,_owner:Gp.current}}function kI(t,e){return{$$typeof:rl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===rl}function CI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var e0=/\/+/g;function gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CI(""+t.key):e.toString(36)}function Tc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rl:case gI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+gd(o,0):r,Zy(i)?(n="",t!=null&&(n=t.replace(e0,"$&/")+"/"),Tc(i,e,n,"",function(c){return c})):i!=null&&(Qp(i)&&(i=kI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(e0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Zy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+gd(s,a);o+=Tc(s,e,n,l,i)}else if(l=II(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+gd(s,a++),o+=Tc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ul(t,e,n){if(t==null)return t;var r=[],i=0;return Tc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function AI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Sc={transition:null},PI={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Sc,ReactCurrentOwner:Gp};function pw(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Ul,forEach:function(t,e,n){Ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ul(t,function(){e++}),e},toArray:function(t){return Ul(t,function(e){return e})||[]},only:function(t){if(!Qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=ao;ae.Fragment=yI;ae.Profiler=_I;ae.PureComponent=qp;ae.StrictMode=vI;ae.Suspense=EI;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PI;ae.act=pw;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hw.call(e,l)&&!dw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:rl,type:t.type,key:i,ref:s,props:r,_owner:o}};ae.createContext=function(t){return t={$$typeof:wI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xI,_context:t},t.Consumer=t};ae.createElement=fw;ae.createFactory=function(t){var e=fw.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:bI,render:t}};ae.isValidElement=Qp;ae.lazy=function(t){return{$$typeof:SI,_payload:{_status:-1,_result:t},_init:AI}};ae.memo=function(t,e){return{$$typeof:TI,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=Sc.transition;Sc.transition={};try{t()}finally{Sc.transition=e}};ae.unstable_act=pw;ae.useCallback=function(t,e){return Mt.current.useCallback(t,e)};ae.useContext=function(t){return Mt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Mt.current.useEffect(t,e)};ae.useId=function(){return Mt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Mt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};ae.useRef=function(t){return Mt.current.useRef(t)};ae.useState=function(t){return Mt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Mt.current.useTransition()};ae.version="18.3.1";ow.exports=ae;var V=ow.exports;const Yp=mI(V),NI=pI({__proto__:null,default:Yp},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=V,DI=Symbol.for("react.element"),MI=Symbol.for("react.fragment"),jI=Object.prototype.hasOwnProperty,OI=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,LI={key:!0,ref:!0,__self:!0,__source:!0};function mw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jI.call(e,r)&&!LI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:DI,type:t,key:s,ref:o,props:i,_owner:OI.current}}ih.Fragment=MI;ih.jsx=mw;ih.jsxs=mw;sw.exports=ih;var d=sw.exports,ff={},gw={exports:{}},en={},yw={exports:{}},vw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,J){var Z=q.length;q.push(J);e:for(;0<Z;){var ge=Z-1>>>1,O=q[ge];if(0<i(O,J))q[ge]=J,q[Z]=O,Z=ge;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var J=q[0],Z=q.pop();if(Z!==J){q[0]=Z;e:for(var ge=0,O=q.length,$=O>>>1;ge<$;){var H=2*(ge+1)-1,F=q[H],De=H+1,At=q[De];if(0>i(F,Z))De<O&&0>i(At,F)?(q[ge]=At,q[De]=Z,ge=De):(q[ge]=F,q[H]=Z,ge=H);else if(De<O&&0>i(At,Z))q[ge]=At,q[De]=Z,ge=De;else break e}}return J}function i(q,J){var Z=q.sortIndex-J.sortIndex;return Z!==0?Z:q.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,y=!1,w=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(q){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=q)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function P(q){if(E=!1,I(q),!w)if(n(l)!==null)w=!0,Se(M);else{var J=n(c);J!==null&&Ne(P,J.startTime-q)}}function M(q,J){w=!1,E&&(E=!1,b(v),v=-1),y=!0;var Z=p;try{for(I(J),f=n(l);f!==null&&(!(f.expirationTime>J)||q&&!R());){var ge=f.callback;if(typeof ge=="function"){f.callback=null,p=f.priorityLevel;var O=ge(f.expirationTime<=J);J=t.unstable_now(),typeof O=="function"?f.callback=O:f===n(l)&&r(l),I(J)}else r(l);f=n(l)}if(f!==null)var $=!0;else{var H=n(c);H!==null&&Ne(P,H.startTime-J),$=!1}return $}finally{f=null,p=Z,y=!1}}var C=!1,_=null,v=-1,k=5,A=-1;function R(){return!(t.unstable_now()-A<k)}function D(){if(_!==null){var q=t.unstable_now();A=q;var J=!0;try{J=_(!0,q)}finally{J?N():(C=!1,_=null)}}else C=!1}var N;if(typeof x=="function")N=function(){x(D)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,pe=Te.port2;Te.port1.onmessage=D,N=function(){pe.postMessage(null)}}else N=function(){S(D,0)};function Se(q){_=q,C||(C=!0,N())}function Ne(q,J){v=S(function(){q(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){w||y||(w=!0,Se(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var Z=p;p=J;try{return q()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,J){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=p;p=q;try{return J()}finally{p=Z}},t.unstable_scheduleCallback=function(q,J,Z){var ge=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ge+Z:ge):Z=ge,q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=Z+O,q={id:h++,callback:J,priorityLevel:q,startTime:Z,expirationTime:O,sortIndex:-1},Z>ge?(q.sortIndex=Z,e(c,q),n(l)===null&&q===n(c)&&(E?(b(v),v=-1):E=!0,Ne(P,Z-ge))):(q.sortIndex=O,e(l,q),w||y||(w=!0,Se(M))),q},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(q){var J=p;return function(){var Z=p;p=J;try{return q.apply(this,arguments)}finally{p=Z}}}})(vw);yw.exports=vw;var VI=yw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FI=V,Zt=VI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _w=new Set,Ta={};function Zi(t,e){$s(t,e),$s(t+"Capture",e)}function $s(t,e){for(Ta[t]=e,t=0;t<e.length;t++)_w.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pf=Object.prototype.hasOwnProperty,UI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t0={},n0={};function BI(t){return pf.call(n0,t)?!0:pf.call(t0,t)?!1:UI.test(t)?n0[t]=!0:(t0[t]=!0,!1)}function zI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $I(t,e,n,r){if(e===null||typeof e>"u"||zI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xp=/[\-:]([a-z])/g;function Jp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);pt[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xp,Jp);pt[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xp,Jp);pt[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zp(t,e,n,r){var i=pt.hasOwnProperty(e)?pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($I(e,n,i,r)&&(n=null),r||i===null?BI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bl=Symbol.for("react.element"),gs=Symbol.for("react.portal"),ys=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),mf=Symbol.for("react.profiler"),xw=Symbol.for("react.provider"),ww=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),gf=Symbol.for("react.suspense"),yf=Symbol.for("react.suspense_list"),nm=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),bw=Symbol.for("react.offscreen"),r0=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=r0&&t[r0]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,yd;function qo(t){if(yd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yd=e&&e[1]||""}return`
`+yd+t}var vd=!1;function _d(t,e){if(!t||vd)return"";vd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{vd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qo(t):""}function HI(t){switch(t.tag){case 5:return qo(t.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return t=_d(t.type,!1),t;case 11:return t=_d(t.type.render,!1),t;case 1:return t=_d(t.type,!0),t;default:return""}}function vf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ys:return"Fragment";case gs:return"Portal";case mf:return"Profiler";case em:return"StrictMode";case gf:return"Suspense";case yf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ww:return(t.displayName||"Context")+".Consumer";case xw:return(t._context.displayName||"Context")+".Provider";case tm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nm:return e=t.displayName||null,e!==null?e:vf(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return vf(t(e))}catch{}}return null}function WI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vf(e);case 8:return e===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ti(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ew(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qI(t){var e=Ew(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zl(t){t._valueTracker||(t._valueTracker=qI(t))}function Tw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ew(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Zc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _f(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ti(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sw(t,e){e=e.checked,e!=null&&Zp(t,"checked",e,!1)}function xf(t,e){Sw(t,e);var n=ti(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&wf(t,e.type,ti(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function s0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wf(t,e,n){(e!=="number"||Zc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ko=Array.isArray;function As(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ti(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function bf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function o0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Ko(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ti(n)}}function Iw(t,e){var n=ti(e.value),r=ti(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function a0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ef(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $l,Cw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KI=["Webkit","ms","Moz","O"];Object.keys(sa).forEach(function(t){KI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sa[e]=sa[t]})});function Aw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sa.hasOwnProperty(t)&&sa[t]?(""+e).trim():e+"px"}function Pw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Aw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var GI=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tf(t,e){if(e){if(GI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var If=null;function rm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kf=null,Ps=null,Ns=null;function l0(t){if(t=ol(t)){if(typeof kf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ch(e),kf(t.stateNode,t.type,e))}}function Nw(t){Ps?Ns?Ns.push(t):Ns=[t]:Ps=t}function Rw(){if(Ps){var t=Ps,e=Ns;if(Ns=Ps=null,l0(t),e)for(t=0;t<e.length;t++)l0(e[t])}}function Dw(t,e){return t(e)}function Mw(){}var xd=!1;function jw(t,e,n){if(xd)return t(e,n);xd=!0;try{return Dw(t,e,n)}finally{xd=!1,(Ps!==null||Ns!==null)&&(Mw(),Rw())}}function Ia(t,e){var n=t.stateNode;if(n===null)return null;var r=ch(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Cf=!1;if(ir)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Cf=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Cf=!1}function QI(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var oa=!1,eu=null,tu=!1,Af=null,YI={onError:function(t){oa=!0,eu=t}};function XI(t,e,n,r,i,s,o,a,l){oa=!1,eu=null,QI.apply(YI,arguments)}function JI(t,e,n,r,i,s,o,a,l){if(XI.apply(this,arguments),oa){if(oa){var c=eu;oa=!1,eu=null}else throw Error(z(198));tu||(tu=!0,Af=c)}}function es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ow(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c0(t){if(es(t)!==t)throw Error(z(188))}function ZI(t){var e=t.alternate;if(!e){if(e=es(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return c0(i),t;if(s===r)return c0(i),e;s=s.sibling}throw Error(z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Lw(t){return t=ZI(t),t!==null?Vw(t):null}function Vw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vw(t);if(e!==null)return e;t=t.sibling}return null}var Fw=Zt.unstable_scheduleCallback,u0=Zt.unstable_cancelCallback,ek=Zt.unstable_shouldYield,tk=Zt.unstable_requestPaint,We=Zt.unstable_now,nk=Zt.unstable_getCurrentPriorityLevel,im=Zt.unstable_ImmediatePriority,Uw=Zt.unstable_UserBlockingPriority,nu=Zt.unstable_NormalPriority,rk=Zt.unstable_LowPriority,Bw=Zt.unstable_IdlePriority,sh=null,Rn=null;function ik(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(sh,t,void 0,(t.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:ak,sk=Math.log,ok=Math.LN2;function ak(t){return t>>>=0,t===0?32:31-(sk(t)/ok|0)|0}var Hl=64,Wl=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Go(a):(s&=o,s!==0&&(r=Go(s)))}else o=n&~i,o!==0?r=Go(o):s!==0&&(r=Go(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xn(e),i=1<<n,r|=t[n],e&=~i;return r}function lk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ck(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-xn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=lk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Pf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zw(){var t=Hl;return Hl<<=1,!(Hl&4194240)&&(Hl=64),t}function wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function il(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xn(e),t[e]=n}function uk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function sm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function $w(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hw,om,Ww,qw,Kw,Nf=!1,ql=[],Ur=null,Br=null,zr=null,ka=new Map,Ca=new Map,Ir=[],hk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h0(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(e.pointerId)}}function jo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ol(e),e!==null&&om(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dk(t,e,n,r,i){switch(e){case"focusin":return Ur=jo(Ur,t,e,n,r,i),!0;case"dragenter":return Br=jo(Br,t,e,n,r,i),!0;case"mouseover":return zr=jo(zr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ka.set(s,jo(ka.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ca.set(s,jo(Ca.get(s)||null,t,e,n,r,i)),!0}return!1}function Gw(t){var e=Ri(t.target);if(e!==null){var n=es(e);if(n!==null){if(e=n.tag,e===13){if(e=Ow(n),e!==null){t.blockedOn=e,Kw(t.priority,function(){Ww(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);If=r,n.target.dispatchEvent(r),If=null}else return e=ol(n),e!==null&&om(e),t.blockedOn=n,!1;e.shift()}return!0}function d0(t,e,n){Ic(t)&&n.delete(e)}function fk(){Nf=!1,Ur!==null&&Ic(Ur)&&(Ur=null),Br!==null&&Ic(Br)&&(Br=null),zr!==null&&Ic(zr)&&(zr=null),ka.forEach(d0),Ca.forEach(d0)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,Nf||(Nf=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,fk)))}function Aa(t){function e(i){return Oo(i,t)}if(0<ql.length){Oo(ql[0],t);for(var n=1;n<ql.length;n++){var r=ql[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ur!==null&&Oo(Ur,t),Br!==null&&Oo(Br,t),zr!==null&&Oo(zr,t),ka.forEach(e),Ca.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)Gw(n),n.blockedOn===null&&Ir.shift()}var Rs=mr.ReactCurrentBatchConfig,iu=!0;function pk(t,e,n,r){var i=_e,s=Rs.transition;Rs.transition=null;try{_e=1,am(t,e,n,r)}finally{_e=i,Rs.transition=s}}function mk(t,e,n,r){var i=_e,s=Rs.transition;Rs.transition=null;try{_e=4,am(t,e,n,r)}finally{_e=i,Rs.transition=s}}function am(t,e,n,r){if(iu){var i=Rf(t,e,n,r);if(i===null)Nd(t,e,r,su,n),h0(t,r);else if(dk(i,t,e,n,r))r.stopPropagation();else if(h0(t,r),e&4&&-1<hk.indexOf(t)){for(;i!==null;){var s=ol(i);if(s!==null&&Hw(s),s=Rf(t,e,n,r),s===null&&Nd(t,e,r,su,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Nd(t,e,r,null,n)}}var su=null;function Rf(t,e,n,r){if(su=null,t=rm(r),t=Ri(t),t!==null)if(e=es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ow(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return su=t,null}function Qw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nk()){case im:return 1;case Uw:return 4;case nu:case rk:return 16;case Bw:return 536870912;default:return 16}default:return 16}}var Dr=null,lm=null,kc=null;function Yw(){if(kc)return kc;var t,e=lm,n=e.length,r,i="value"in Dr?Dr.value:Dr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return kc=i.slice(t,1<r?1-r:void 0)}function Cc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kl(){return!0}function f0(){return!1}function tn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Kl:f0,this.isPropagationStopped=f0,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),e}var lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=tn(lo),sl=Ve({},lo,{view:0,detail:0}),gk=tn(sl),bd,Ed,Lo,oh=Ve({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(bd=t.screenX-Lo.screenX,Ed=t.screenY-Lo.screenY):Ed=bd=0,Lo=t),bd)},movementY:function(t){return"movementY"in t?t.movementY:Ed}}),p0=tn(oh),yk=Ve({},oh,{dataTransfer:0}),vk=tn(yk),_k=Ve({},sl,{relatedTarget:0}),Td=tn(_k),xk=Ve({},lo,{animationName:0,elapsedTime:0,pseudoElement:0}),wk=tn(xk),bk=Ve({},lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ek=tn(bk),Tk=Ve({},lo,{data:0}),m0=tn(Tk),Sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ck(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kk[t])?!!e[t]:!1}function um(){return Ck}var Ak=Ve({},sl,{key:function(t){if(t.key){var e=Sk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ik[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(t){return t.type==="keypress"?Cc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pk=tn(Ak),Nk=Ve({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g0=tn(Nk),Rk=Ve({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),Dk=tn(Rk),Mk=Ve({},lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),jk=tn(Mk),Ok=Ve({},oh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lk=tn(Ok),Vk=[9,13,27,32],hm=ir&&"CompositionEvent"in window,aa=null;ir&&"documentMode"in document&&(aa=document.documentMode);var Fk=ir&&"TextEvent"in window&&!aa,Xw=ir&&(!hm||aa&&8<aa&&11>=aa),y0=String.fromCharCode(32),v0=!1;function Jw(t,e){switch(t){case"keyup":return Vk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vs=!1;function Uk(t,e){switch(t){case"compositionend":return Zw(e);case"keypress":return e.which!==32?null:(v0=!0,y0);case"textInput":return t=e.data,t===y0&&v0?null:t;default:return null}}function Bk(t,e){if(vs)return t==="compositionend"||!hm&&Jw(t,e)?(t=Yw(),kc=lm=Dr=null,vs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xw&&e.locale!=="ko"?null:e.data;default:return null}}var zk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zk[t.type]:e==="textarea"}function e1(t,e,n,r){Nw(r),e=ou(e,"onChange"),0<e.length&&(n=new cm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var la=null,Pa=null;function $k(t){h1(t,0)}function ah(t){var e=ws(t);if(Tw(e))return t}function Hk(t,e){if(t==="change")return e}var t1=!1;if(ir){var Sd;if(ir){var Id="oninput"in document;if(!Id){var x0=document.createElement("div");x0.setAttribute("oninput","return;"),Id=typeof x0.oninput=="function"}Sd=Id}else Sd=!1;t1=Sd&&(!document.documentMode||9<document.documentMode)}function w0(){la&&(la.detachEvent("onpropertychange",n1),Pa=la=null)}function n1(t){if(t.propertyName==="value"&&ah(Pa)){var e=[];e1(e,Pa,t,rm(t)),jw($k,e)}}function Wk(t,e,n){t==="focusin"?(w0(),la=e,Pa=n,la.attachEvent("onpropertychange",n1)):t==="focusout"&&w0()}function qk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ah(Pa)}function Kk(t,e){if(t==="click")return ah(e)}function Gk(t,e){if(t==="input"||t==="change")return ah(e)}function Qk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:Qk;function Na(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!pf.call(e,i)||!En(t[i],e[i]))return!1}return!0}function b0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E0(t,e){var n=b0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=b0(n)}}function r1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i1(){for(var t=window,e=Zc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Zc(t.document)}return e}function dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yk(t){var e=i1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r1(n.ownerDocument.documentElement,n)){if(r!==null&&dm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=E0(n,s);var o=E0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xk=ir&&"documentMode"in document&&11>=document.documentMode,_s=null,Df=null,ca=null,Mf=!1;function T0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mf||_s==null||_s!==Zc(r)||(r=_s,"selectionStart"in r&&dm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ca&&Na(ca,r)||(ca=r,r=ou(Df,"onSelect"),0<r.length&&(e=new cm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_s)))}function Gl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xs={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},kd={},s1={};ir&&(s1=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function lh(t){if(kd[t])return kd[t];if(!xs[t])return t;var e=xs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in s1)return kd[t]=e[n];return t}var o1=lh("animationend"),a1=lh("animationiteration"),l1=lh("animationstart"),c1=lh("transitionend"),u1=new Map,S0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,e){u1.set(t,e),Zi(e,[t])}for(var Cd=0;Cd<S0.length;Cd++){var Ad=S0[Cd],Jk=Ad.toLowerCase(),Zk=Ad[0].toUpperCase()+Ad.slice(1);di(Jk,"on"+Zk)}di(o1,"onAnimationEnd");di(a1,"onAnimationIteration");di(l1,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(c1,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function I0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,JI(r,e,void 0,t),t.currentTarget=null}function h1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;I0(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;I0(i,a,c),s=l}}}if(tu)throw t=Af,tu=!1,Af=null,t}function ke(t,e){var n=e[Ff];n===void 0&&(n=e[Ff]=new Set);var r=t+"__bubble";n.has(r)||(d1(e,t,2,!1),n.add(r))}function Pd(t,e,n){var r=0;e&&(r|=4),d1(n,t,r,e)}var Ql="_reactListening"+Math.random().toString(36).slice(2);function Ra(t){if(!t[Ql]){t[Ql]=!0,_w.forEach(function(n){n!=="selectionchange"&&(eC.has(n)||Pd(n,!1,t),Pd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ql]||(e[Ql]=!0,Pd("selectionchange",!1,e))}}function d1(t,e,n,r){switch(Qw(e)){case 1:var i=pk;break;case 4:i=mk;break;default:i=am}n=i.bind(null,e,n,t),i=void 0,!Cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ri(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}jw(function(){var c=s,h=rm(n),f=[];e:{var p=u1.get(t);if(p!==void 0){var y=cm,w=t;switch(t){case"keypress":if(Cc(n)===0)break e;case"keydown":case"keyup":y=Pk;break;case"focusin":w="focus",y=Td;break;case"focusout":w="blur",y=Td;break;case"beforeblur":case"afterblur":y=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=vk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Dk;break;case o1:case a1:case l1:y=wk;break;case c1:y=jk;break;case"scroll":y=gk;break;case"wheel":y=Lk;break;case"copy":case"cut":case"paste":y=Ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=g0}var E=(e&4)!==0,S=!E&&t==="scroll",b=E?p!==null?p+"Capture":null:p;E=[];for(var x=c,I;x!==null;){I=x;var P=I.stateNode;if(I.tag===5&&P!==null&&(I=P,b!==null&&(P=Ia(x,b),P!=null&&E.push(Da(x,P,I)))),S)break;x=x.return}0<E.length&&(p=new y(p,w,null,n,h),f.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",p&&n!==If&&(w=n.relatedTarget||n.fromElement)&&(Ri(w)||w[sr]))break e;if((y||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,y?(w=n.relatedTarget||n.toElement,y=c,w=w?Ri(w):null,w!==null&&(S=es(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(y=null,w=c),y!==w)){if(E=p0,P="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(E=g0,P="onPointerLeave",b="onPointerEnter",x="pointer"),S=y==null?p:ws(y),I=w==null?p:ws(w),p=new E(P,x+"leave",y,n,h),p.target=S,p.relatedTarget=I,P=null,Ri(h)===c&&(E=new E(b,x+"enter",w,n,h),E.target=I,E.relatedTarget=S,P=E),S=P,y&&w)t:{for(E=y,b=w,x=0,I=E;I;I=us(I))x++;for(I=0,P=b;P;P=us(P))I++;for(;0<x-I;)E=us(E),x--;for(;0<I-x;)b=us(b),I--;for(;x--;){if(E===b||b!==null&&E===b.alternate)break t;E=us(E),b=us(b)}E=null}else E=null;y!==null&&k0(f,p,y,E,!1),w!==null&&S!==null&&k0(f,S,w,E,!0)}}e:{if(p=c?ws(c):window,y=p.nodeName&&p.nodeName.toLowerCase(),y==="select"||y==="input"&&p.type==="file")var M=Hk;else if(_0(p))if(t1)M=Gk;else{M=qk;var C=Wk}else(y=p.nodeName)&&y.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=Kk);if(M&&(M=M(t,c))){e1(f,M,n,h);break e}C&&C(t,p,c),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&wf(p,"number",p.value)}switch(C=c?ws(c):window,t){case"focusin":(_0(C)||C.contentEditable==="true")&&(_s=C,Df=c,ca=null);break;case"focusout":ca=Df=_s=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,T0(f,n,h);break;case"selectionchange":if(Xk)break;case"keydown":case"keyup":T0(f,n,h)}var _;if(hm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else vs?Jw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Xw&&n.locale!=="ko"&&(vs||v!=="onCompositionStart"?v==="onCompositionEnd"&&vs&&(_=Yw()):(Dr=h,lm="value"in Dr?Dr.value:Dr.textContent,vs=!0)),C=ou(c,v),0<C.length&&(v=new m0(v,t,null,n,h),f.push({event:v,listeners:C}),_?v.data=_:(_=Zw(n),_!==null&&(v.data=_)))),(_=Fk?Uk(t,n):Bk(t,n))&&(c=ou(c,"onBeforeInput"),0<c.length&&(h=new m0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=_))}h1(f,e)})}function Da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ou(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ia(t,n),s!=null&&r.unshift(Da(t,s,i)),s=Ia(t,e),s!=null&&r.push(Da(t,s,i))),t=t.return}return r}function us(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function k0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Ia(n,s),l!=null&&o.unshift(Da(n,l,a))):i||(l=Ia(n,s),l!=null&&o.push(Da(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tC=/\r\n?/g,nC=/\u0000|\uFFFD/g;function C0(t){return(typeof t=="string"?t:""+t).replace(tC,`
`).replace(nC,"")}function Yl(t,e,n){if(e=C0(e),C0(t)!==e&&n)throw Error(z(425))}function au(){}var jf=null,Of=null;function Lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,rC=typeof clearTimeout=="function"?clearTimeout:void 0,A0=typeof Promise=="function"?Promise:void 0,iC=typeof queueMicrotask=="function"?queueMicrotask:typeof A0<"u"?function(t){return A0.resolve(null).then(t).catch(sC)}:Vf;function sC(t){setTimeout(function(){throw t})}function Rd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Aa(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function P0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var co=Math.random().toString(36).slice(2),An="__reactFiber$"+co,Ma="__reactProps$"+co,sr="__reactContainer$"+co,Ff="__reactEvents$"+co,oC="__reactListeners$"+co,aC="__reactHandles$"+co;function Ri(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=P0(t);t!==null;){if(n=t[An])return n;t=P0(t)}return e}t=n,n=t.parentNode}return null}function ol(t){return t=t[An]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ch(t){return t[Ma]||null}var Uf=[],bs=-1;function fi(t){return{current:t}}function Pe(t){0>bs||(t.current=Uf[bs],Uf[bs]=null,bs--)}function be(t,e){bs++,Uf[bs]=t.current,t.current=e}var ni={},It=fi(ni),zt=fi(!1),Bi=ni;function Hs(t,e){var n=t.type.contextTypes;if(!n)return ni;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function lu(){Pe(zt),Pe(It)}function N0(t,e,n){if(It.current!==ni)throw Error(z(168));be(It,e),be(zt,n)}function f1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(z(108,WI(t)||"Unknown",i));return Ve({},n,r)}function cu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ni,Bi=It.current,be(It,t),be(zt,zt.current),!0}function R0(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=f1(t,e,Bi),r.__reactInternalMemoizedMergedChildContext=t,Pe(zt),Pe(It),be(It,t)):Pe(zt),be(zt,n)}var Qn=null,uh=!1,Dd=!1;function p1(t){Qn===null?Qn=[t]:Qn.push(t)}function lC(t){uh=!0,p1(t)}function pi(){if(!Dd&&Qn!==null){Dd=!0;var t=0,e=_e;try{var n=Qn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qn=null,uh=!1}catch(i){throw Qn!==null&&(Qn=Qn.slice(t+1)),Fw(im,pi),i}finally{_e=e,Dd=!1}}return null}var Es=[],Ts=0,uu=null,hu=0,rn=[],sn=0,zi=null,Xn=1,Jn="";function Ii(t,e){Es[Ts++]=hu,Es[Ts++]=uu,uu=t,hu=e}function m1(t,e,n){rn[sn++]=Xn,rn[sn++]=Jn,rn[sn++]=zi,zi=t;var r=Xn;t=Jn;var i=32-xn(r)-1;r&=~(1<<i),n+=1;var s=32-xn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xn=1<<32-xn(e)+i|n<<i|r,Jn=s+t}else Xn=1<<s|n<<i|r,Jn=t}function fm(t){t.return!==null&&(Ii(t,1),m1(t,1,0))}function pm(t){for(;t===uu;)uu=Es[--Ts],Es[Ts]=null,hu=Es[--Ts],Es[Ts]=null;for(;t===zi;)zi=rn[--sn],rn[sn]=null,Jn=rn[--sn],rn[sn]=null,Xn=rn[--sn],rn[sn]=null}var Jt=null,Qt=null,Re=!1,vn=null;function g1(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function D0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Qt=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zi!==null?{id:Xn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Qt=null,!0):!1;default:return!1}}function Bf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zf(t){if(Re){var e=Qt;if(e){var n=e;if(!D0(t,e)){if(Bf(t))throw Error(z(418));e=$r(n.nextSibling);var r=Jt;e&&D0(t,e)?g1(r,n):(t.flags=t.flags&-4097|2,Re=!1,Jt=t)}}else{if(Bf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Re=!1,Jt=t}}}function M0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Xl(t){if(t!==Jt)return!1;if(!Re)return M0(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lf(t.type,t.memoizedProps)),e&&(e=Qt)){if(Bf(t))throw y1(),Error(z(418));for(;e;)g1(t,e),e=$r(e.nextSibling)}if(M0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qt=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qt=null}}else Qt=Jt?$r(t.stateNode.nextSibling):null;return!0}function y1(){for(var t=Qt;t;)t=$r(t.nextSibling)}function Ws(){Qt=Jt=null,Re=!1}function mm(t){vn===null?vn=[t]:vn.push(t)}var cC=mr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Jl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function j0(t){var e=t._init;return e(t._payload)}function v1(t){function e(b,x){if(t){var I=b.deletions;I===null?(b.deletions=[x],b.flags|=16):I.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=Kr(b,x),b.index=0,b.sibling=null,b}function s(b,x,I){return b.index=I,t?(I=b.alternate,I!==null?(I=I.index,I<x?(b.flags|=2,x):I):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,x,I,P){return x===null||x.tag!==6?(x=Ud(I,b.mode,P),x.return=b,x):(x=i(x,I),x.return=b,x)}function l(b,x,I,P){var M=I.type;return M===ys?h(b,x,I.props.children,P,I.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Er&&j0(M)===x.type)?(P=i(x,I.props),P.ref=Vo(b,x,I),P.return=b,P):(P=jc(I.type,I.key,I.props,null,b.mode,P),P.ref=Vo(b,x,I),P.return=b,P)}function c(b,x,I,P){return x===null||x.tag!==4||x.stateNode.containerInfo!==I.containerInfo||x.stateNode.implementation!==I.implementation?(x=Bd(I,b.mode,P),x.return=b,x):(x=i(x,I.children||[]),x.return=b,x)}function h(b,x,I,P,M){return x===null||x.tag!==7?(x=Li(I,b.mode,P,M),x.return=b,x):(x=i(x,I),x.return=b,x)}function f(b,x,I){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ud(""+x,b.mode,I),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bl:return I=jc(x.type,x.key,x.props,null,b.mode,I),I.ref=Vo(b,null,x),I.return=b,I;case gs:return x=Bd(x,b.mode,I),x.return=b,x;case Er:var P=x._init;return f(b,P(x._payload),I)}if(Ko(x)||Do(x))return x=Li(x,b.mode,I,null),x.return=b,x;Jl(b,x)}return null}function p(b,x,I,P){var M=x!==null?x.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return M!==null?null:a(b,x,""+I,P);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Bl:return I.key===M?l(b,x,I,P):null;case gs:return I.key===M?c(b,x,I,P):null;case Er:return M=I._init,p(b,x,M(I._payload),P)}if(Ko(I)||Do(I))return M!==null?null:h(b,x,I,P,null);Jl(b,I)}return null}function y(b,x,I,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(I)||null,a(x,b,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Bl:return b=b.get(P.key===null?I:P.key)||null,l(x,b,P,M);case gs:return b=b.get(P.key===null?I:P.key)||null,c(x,b,P,M);case Er:var C=P._init;return y(b,x,I,C(P._payload),M)}if(Ko(P)||Do(P))return b=b.get(I)||null,h(x,b,P,M,null);Jl(x,P)}return null}function w(b,x,I,P){for(var M=null,C=null,_=x,v=x=0,k=null;_!==null&&v<I.length;v++){_.index>v?(k=_,_=null):k=_.sibling;var A=p(b,_,I[v],P);if(A===null){_===null&&(_=k);break}t&&_&&A.alternate===null&&e(b,_),x=s(A,x,v),C===null?M=A:C.sibling=A,C=A,_=k}if(v===I.length)return n(b,_),Re&&Ii(b,v),M;if(_===null){for(;v<I.length;v++)_=f(b,I[v],P),_!==null&&(x=s(_,x,v),C===null?M=_:C.sibling=_,C=_);return Re&&Ii(b,v),M}for(_=r(b,_);v<I.length;v++)k=y(_,b,v,I[v],P),k!==null&&(t&&k.alternate!==null&&_.delete(k.key===null?v:k.key),x=s(k,x,v),C===null?M=k:C.sibling=k,C=k);return t&&_.forEach(function(R){return e(b,R)}),Re&&Ii(b,v),M}function E(b,x,I,P){var M=Do(I);if(typeof M!="function")throw Error(z(150));if(I=M.call(I),I==null)throw Error(z(151));for(var C=M=null,_=x,v=x=0,k=null,A=I.next();_!==null&&!A.done;v++,A=I.next()){_.index>v?(k=_,_=null):k=_.sibling;var R=p(b,_,A.value,P);if(R===null){_===null&&(_=k);break}t&&_&&R.alternate===null&&e(b,_),x=s(R,x,v),C===null?M=R:C.sibling=R,C=R,_=k}if(A.done)return n(b,_),Re&&Ii(b,v),M;if(_===null){for(;!A.done;v++,A=I.next())A=f(b,A.value,P),A!==null&&(x=s(A,x,v),C===null?M=A:C.sibling=A,C=A);return Re&&Ii(b,v),M}for(_=r(b,_);!A.done;v++,A=I.next())A=y(_,b,v,A.value,P),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?v:A.key),x=s(A,x,v),C===null?M=A:C.sibling=A,C=A);return t&&_.forEach(function(D){return e(b,D)}),Re&&Ii(b,v),M}function S(b,x,I,P){if(typeof I=="object"&&I!==null&&I.type===ys&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Bl:e:{for(var M=I.key,C=x;C!==null;){if(C.key===M){if(M=I.type,M===ys){if(C.tag===7){n(b,C.sibling),x=i(C,I.props.children),x.return=b,b=x;break e}}else if(C.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Er&&j0(M)===C.type){n(b,C.sibling),x=i(C,I.props),x.ref=Vo(b,C,I),x.return=b,b=x;break e}n(b,C);break}else e(b,C);C=C.sibling}I.type===ys?(x=Li(I.props.children,b.mode,P,I.key),x.return=b,b=x):(P=jc(I.type,I.key,I.props,null,b.mode,P),P.ref=Vo(b,x,I),P.return=b,b=P)}return o(b);case gs:e:{for(C=I.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===I.containerInfo&&x.stateNode.implementation===I.implementation){n(b,x.sibling),x=i(x,I.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=Bd(I,b.mode,P),x.return=b,b=x}return o(b);case Er:return C=I._init,S(b,x,C(I._payload),P)}if(Ko(I))return w(b,x,I,P);if(Do(I))return E(b,x,I,P);Jl(b,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,x!==null&&x.tag===6?(n(b,x.sibling),x=i(x,I),x.return=b,b=x):(n(b,x),x=Ud(I,b.mode,P),x.return=b,b=x),o(b)):n(b,x)}return S}var qs=v1(!0),_1=v1(!1),du=fi(null),fu=null,Ss=null,gm=null;function ym(){gm=Ss=fu=null}function vm(t){var e=du.current;Pe(du),t._currentValue=e}function $f(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ds(t,e){fu=t,gm=Ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function hn(t){var e=t._currentValue;if(gm!==t)if(t={context:t,memoizedValue:e,next:null},Ss===null){if(fu===null)throw Error(z(308));Ss=t,fu.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return e}var Di=null;function _m(t){Di===null?Di=[t]:Di.push(t)}function x1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_m(e)):(n.next=i.next,i.next=n),e.interleaved=n,or(t,r)}function or(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function xm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,or(t,n)}return i=r.interleaved,i===null?(e.next=e,_m(r)):(e.next=i.next,i.next=e),r.interleaved=e,or(t,n)}function Ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sm(t,n)}}function O0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pu(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,y=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,E=a;switch(p=e,y=n,E.tag){case 1:if(w=E.payload,typeof w=="function"){f=w.call(y,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=E.payload,p=typeof w=="function"?w.call(y,f,p):w,p==null)break e;f=Ve({},f,p);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else y={eventTime:y,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=f):h=h.next=y,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Hi|=o,t.lanes=o,t.memoizedState=f}}function L0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(z(191,i));i.call(r)}}}var al={},Dn=fi(al),ja=fi(al),Oa=fi(al);function Mi(t){if(t===al)throw Error(z(174));return t}function wm(t,e){switch(be(Oa,e),be(ja,t),be(Dn,al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ef(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ef(e,t)}Pe(Dn),be(Dn,e)}function Ks(){Pe(Dn),Pe(ja),Pe(Oa)}function b1(t){Mi(Oa.current);var e=Mi(Dn.current),n=Ef(e,t.type);e!==n&&(be(ja,t),be(Dn,n))}function bm(t){ja.current===t&&(Pe(Dn),Pe(ja))}var je=fi(0);function mu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Md=[];function Em(){for(var t=0;t<Md.length;t++)Md[t]._workInProgressVersionPrimary=null;Md.length=0}var Pc=mr.ReactCurrentDispatcher,jd=mr.ReactCurrentBatchConfig,$i=0,Le=null,Je=null,st=null,gu=!1,ua=!1,La=0,uC=0;function _t(){throw Error(z(321))}function Tm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function Sm(t,e,n,r,i,s){if($i=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pc.current=t===null||t.memoizedState===null?pC:mC,t=n(r,i),ua){s=0;do{if(ua=!1,La=0,25<=s)throw Error(z(301));s+=1,st=Je=null,e.updateQueue=null,Pc.current=gC,t=n(r,i)}while(ua)}if(Pc.current=yu,e=Je!==null&&Je.next!==null,$i=0,st=Je=Le=null,gu=!1,e)throw Error(z(300));return t}function Im(){var t=La!==0;return La=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Le.memoizedState=st=t:st=st.next=t,st}function dn(){if(Je===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=st===null?Le.memoizedState:st.next;if(e!==null)st=e,Je=t;else{if(t===null)throw Error(z(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},st===null?Le.memoizedState=st=t:st=st.next=t}return st}function Va(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=dn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if(($i&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Le.lanes|=h,Hi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,En(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,Hi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ld(t){var e=dn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);En(s,e.memoizedState)||(Bt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function E1(){}function T1(t,e){var n=Le,r=dn(),i=e(),s=!En(r.memoizedState,i);if(s&&(r.memoizedState=i,Bt=!0),r=r.queue,km(k1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Fa(9,I1.bind(null,n,r,i,e),void 0,null),at===null)throw Error(z(349));$i&30||S1(n,e,i)}return i}function S1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function I1(t,e,n,r){e.value=n,e.getSnapshot=r,C1(e)&&A1(t)}function k1(t,e,n){return n(function(){C1(e)&&A1(t)})}function C1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function A1(t){var e=or(t,1);e!==null&&wn(e,t,1,-1)}function V0(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:t},e.queue=t,t=t.dispatch=fC.bind(null,Le,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P1(){return dn().memoizedState}function Nc(t,e,n,r){var i=In();Le.flags|=t,i.memoizedState=Fa(1|e,n,void 0,r===void 0?null:r)}function hh(t,e,n,r){var i=dn();r=r===void 0?null:r;var s=void 0;if(Je!==null){var o=Je.memoizedState;if(s=o.destroy,r!==null&&Tm(r,o.deps)){i.memoizedState=Fa(e,n,s,r);return}}Le.flags|=t,i.memoizedState=Fa(1|e,n,s,r)}function F0(t,e){return Nc(8390656,8,t,e)}function km(t,e){return hh(2048,8,t,e)}function N1(t,e){return hh(4,2,t,e)}function R1(t,e){return hh(4,4,t,e)}function D1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function M1(t,e,n){return n=n!=null?n.concat([t]):null,hh(4,4,D1.bind(null,e,t),n)}function Cm(){}function j1(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function O1(t,e){var n=dn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function L1(t,e,n){return $i&21?(En(n,e)||(n=zw(),Le.lanes|=n,Hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function hC(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=jd.transition;jd.transition={};try{t(!1),e()}finally{_e=n,jd.transition=r}}function V1(){return dn().memoizedState}function dC(t,e,n){var r=qr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},F1(t))U1(e,n);else if(n=x1(t,e,n,r),n!==null){var i=Dt();wn(n,t,r,i),B1(n,e,r)}}function fC(t,e,n){var r=qr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(F1(t))U1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,En(a,o)){var l=e.interleaved;l===null?(i.next=i,_m(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=x1(t,e,i,r),n!==null&&(i=Dt(),wn(n,t,r,i),B1(n,e,r))}}function F1(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function U1(t,e){ua=gu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function B1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sm(t,n)}}var yu={readContext:hn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},pC={readContext:hn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:hn,useEffect:F0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nc(4194308,4,D1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nc(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=In();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dC.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:V0,useDebugValue:Cm,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=V0(!1),e=t[0];return t=hC.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=In();if(Re){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),at===null)throw Error(z(349));$i&30||S1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,F0(k1.bind(null,r,s,t),[t]),r.flags|=2048,Fa(9,I1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=In(),e=at.identifierPrefix;if(Re){var n=Jn,r=Xn;n=(r&~(1<<32-xn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=La++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mC={readContext:hn,useCallback:j1,useContext:hn,useEffect:km,useImperativeHandle:M1,useInsertionEffect:N1,useLayoutEffect:R1,useMemo:O1,useReducer:Od,useRef:P1,useState:function(){return Od(Va)},useDebugValue:Cm,useDeferredValue:function(t){var e=dn();return L1(e,Je.memoizedState,t)},useTransition:function(){var t=Od(Va)[0],e=dn().memoizedState;return[t,e]},useMutableSource:E1,useSyncExternalStore:T1,useId:V1,unstable_isNewReconciler:!1},gC={readContext:hn,useCallback:j1,useContext:hn,useEffect:km,useImperativeHandle:M1,useInsertionEffect:N1,useLayoutEffect:R1,useMemo:O1,useReducer:Ld,useRef:P1,useState:function(){return Ld(Va)},useDebugValue:Cm,useDeferredValue:function(t){var e=dn();return Je===null?e.memoizedState=t:L1(e,Je.memoizedState,t)},useTransition:function(){var t=Ld(Va)[0],e=dn().memoizedState;return[t,e]},useMutableSource:E1,useSyncExternalStore:T1,useId:V1,unstable_isNewReconciler:!1};function mn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dh={isMounted:function(t){return(t=t._reactInternals)?es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=qr(t),s=nr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(wn(e,t,i,r),Ac(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=qr(t),s=nr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(wn(e,t,i,r),Ac(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=qr(t),i=nr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hr(t,i,r),e!==null&&(wn(e,t,r,n),Ac(e,t,r))}};function U0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Na(n,r)||!Na(i,s):!0}function z1(t,e,n){var r=!1,i=ni,s=e.contextType;return typeof s=="object"&&s!==null?s=hn(s):(i=$t(e)?Bi:It.current,r=e.contextTypes,s=(r=r!=null)?Hs(t,i):ni),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function B0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dh.enqueueReplaceState(e,e.state,null)}function Wf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},xm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=hn(s):(s=$t(e)?Bi:It.current,i.context=Hs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dh.enqueueReplaceState(i,i.state,null),pu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gs(t,e){try{var n="",r=e;do n+=HI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yC=typeof WeakMap=="function"?WeakMap:Map;function $1(t,e,n){n=nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_u||(_u=!0,np=r),qf(t,e)},n}function H1(t,e,n){n=nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qf(t,e),typeof r!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function z0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NC.bind(null,t,e,n),e.then(t,t))}function $0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nr(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var vC=mr.ReactCurrentOwner,Bt=!1;function Rt(t,e,n,r){e.child=t===null?_1(e,null,n,r):qs(e,t.child,n,r)}function W0(t,e,n,r,i){n=n.render;var s=e.ref;return Ds(e,i),r=Sm(t,e,n,r,s,i),n=Im(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Re&&n&&fm(e),e.flags|=1,Rt(t,e,r,i),e.child)}function q0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Om(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,W1(t,e,s,r,i)):(t=jc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Na,n(o,r)&&t.ref===e.ref)return ar(t,e,i)}return e.flags|=1,t=Kr(s,r),t.ref=e.ref,t.return=e,e.child=t}function W1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Na(s,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,ar(t,e,i)}return Kf(t,e,n,r,i)}function q1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ks,Gt),Gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(ks,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,be(ks,Gt),Gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,be(ks,Gt),Gt|=r;return Rt(t,e,i,n),e.child}function K1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kf(t,e,n,r,i){var s=$t(n)?Bi:It.current;return s=Hs(e,s),Ds(e,i),n=Sm(t,e,n,r,s,i),r=Im(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ar(t,e,i)):(Re&&r&&fm(e),e.flags|=1,Rt(t,e,n,i),e.child)}function K0(t,e,n,r,i){if($t(n)){var s=!0;cu(e)}else s=!1;if(Ds(e,i),e.stateNode===null)Rc(t,e),z1(e,n,r),Wf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=hn(c):(c=$t(n)?Bi:It.current,c=Hs(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&B0(e,o,r,c),Tr=!1;var p=e.memoizedState;o.state=p,pu(e,r,o,i),l=e.memoizedState,a!==r||p!==l||zt.current||Tr?(typeof h=="function"&&(Hf(e,n,h,r),l=e.memoizedState),(a=Tr||U0(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,w1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:mn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=hn(l):(l=$t(n)?Bi:It.current,l=Hs(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&B0(e,o,r,l),Tr=!1,p=e.memoizedState,o.state=p,pu(e,r,o,i);var w=e.memoizedState;a!==f||p!==w||zt.current||Tr?(typeof y=="function"&&(Hf(e,n,y,r),w=e.memoizedState),(c=Tr||U0(e,n,c,r,p,w,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Gf(t,e,n,r,s,i)}function Gf(t,e,n,r,i,s){K1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&R0(e,n,!1),ar(t,e,s);r=e.stateNode,vC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qs(e,t.child,null,s),e.child=qs(e,null,a,s)):Rt(t,e,a,s),e.memoizedState=r.state,i&&R0(e,n,!0),e.child}function G1(t){var e=t.stateNode;e.pendingContext?N0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N0(t,e.context,!1),wm(t,e.containerInfo)}function G0(t,e,n,r,i){return Ws(),mm(i),e.flags|=256,Rt(t,e,n,r),e.child}var Qf={dehydrated:null,treeContext:null,retryLane:0};function Yf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q1(t,e,n){var r=e.pendingProps,i=je.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),be(je,i&1),t===null)return zf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mh(o,r,0,null),t=Li(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yf(n),e.memoizedState=Qf,t):Am(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _C(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Kr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Kr(a,s):(s=Li(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Qf,r}return s=t.child,t=s.sibling,r=Kr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Am(t,e){return e=mh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zl(t,e,n,r){return r!==null&&mm(r),qs(e,t.child,null,n),t=Am(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _C(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error(z(422))),Zl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=mh({mode:"visible",children:r.children},i,0,null),s=Li(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&qs(e,t.child,null,o),e.child.memoizedState=Yf(o),e.memoizedState=Qf,s);if(!(e.mode&1))return Zl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(z(419)),r=Vd(s,r,void 0),Zl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Bt||a){if(r=at,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,or(t,i),wn(r,t,i,-1))}return jm(),r=Vd(Error(z(421))),Zl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=RC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qt=$r(i.nextSibling),Jt=e,Re=!0,vn=null,t!==null&&(rn[sn++]=Xn,rn[sn++]=Jn,rn[sn++]=zi,Xn=t.id,Jn=t.overflow,zi=e),e=Am(e,r.children),e.flags|=4096,e)}function Q0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$f(t.return,e,n)}function Fd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Y1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=je.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q0(t,n,e);else if(t.tag===19)Q0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(je,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Fd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Fd(e,!0,n,null,s);break;case"together":Fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ar(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xC(t,e,n){switch(e.tag){case 3:G1(e),Ws();break;case 5:b1(e);break;case 1:$t(e.type)&&cu(e);break;case 4:wm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;be(du,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(je,je.current&1),e.flags|=128,null):n&e.child.childLanes?Q1(t,e,n):(be(je,je.current&1),t=ar(t,e,n),t!==null?t.sibling:null);be(je,je.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Y1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),be(je,je.current),r)break;return null;case 22:case 23:return e.lanes=0,q1(t,e,n)}return ar(t,e,n)}var X1,Xf,J1,Z1;X1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xf=function(){};J1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mi(Dn.current);var s=null;switch(n){case"input":i=_f(t,i),r=_f(t,r),s=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),s=[];break;case"textarea":i=bf(t,i),r=bf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=au)}Tf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ta.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ta.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Z1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function wC(t,e,n){var r=e.pendingProps;switch(pm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return $t(e.type)&&lu(),xt(e),null;case 3:return r=e.stateNode,Ks(),Pe(zt),Pe(It),Em(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(sp(vn),vn=null))),Xf(t,e),xt(e),null;case 5:bm(e);var i=Mi(Oa.current);if(n=e.type,t!==null&&e.stateNode!=null)J1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return xt(e),null}if(t=Mi(Dn.current),Xl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[An]=e,r[Ma]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",r),ke("close",r);break;case"iframe":case"object":case"embed":ke("load",r);break;case"video":case"audio":for(i=0;i<Qo.length;i++)ke(Qo[i],r);break;case"source":ke("error",r);break;case"img":case"image":case"link":ke("error",r),ke("load",r);break;case"details":ke("toggle",r);break;case"input":i0(r,s),ke("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ke("invalid",r);break;case"textarea":o0(r,s),ke("invalid",r)}Tf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yl(r.textContent,a,t),i=["children",""+a]):Ta.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",r)}switch(n){case"input":zl(r),s0(r,s,!0);break;case"textarea":zl(r),a0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=au)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[An]=e,t[Ma]=r,X1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sf(n,r),n){case"dialog":ke("cancel",t),ke("close",t),i=r;break;case"iframe":case"object":case"embed":ke("load",t),i=r;break;case"video":case"audio":for(i=0;i<Qo.length;i++)ke(Qo[i],t);i=r;break;case"source":ke("error",t),i=r;break;case"img":case"image":case"link":ke("error",t),ke("load",t),i=r;break;case"details":ke("toggle",t),i=r;break;case"input":i0(t,r),i=_f(t,r),ke("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),ke("invalid",t);break;case"textarea":o0(t,r),i=bf(t,r),ke("invalid",t);break;default:i=r}Tf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Pw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Cw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Sa(t,l):typeof l=="number"&&Sa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ta.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&Zp(t,s,l,o))}switch(n){case"input":zl(t),s0(t,r,!1);break;case"textarea":zl(t),a0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ti(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?As(t,!!r.multiple,s,!1):r.defaultValue!=null&&As(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=au)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)Z1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Mi(Oa.current),Mi(Dn.current),Xl(e)){if(r=e.stateNode,n=e.memoizedProps,r[An]=e,(s=r.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:Yl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=e,e.stateNode=r}return xt(e),null;case 13:if(Pe(je),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&Qt!==null&&e.mode&1&&!(e.flags&128))y1(),Ws(),e.flags|=98560,s=!1;else if(s=Xl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(z(317));s[An]=e}else Ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),s=!1}else vn!==null&&(sp(vn),vn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||je.current&1?et===0&&(et=3):jm())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Ks(),Xf(t,e),t===null&&Ra(e.stateNode.containerInfo),xt(e),null;case 10:return vm(e.type._context),xt(e),null;case 17:return $t(e.type)&&lu(),xt(e),null;case 19:if(Pe(je),s=e.memoizedState,s===null)return xt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fo(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mu(t),o!==null){for(e.flags|=128,Fo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(je,je.current&1|2),e.child}t=t.sibling}s.tail!==null&&We()>Qs&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304)}else{if(!r)if(t=mu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Re)return xt(e),null}else 2*We()-s.renderingStartTime>Qs&&n!==1073741824&&(e.flags|=128,r=!0,Fo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=We(),e.sibling=null,n=je.current,be(je,r?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return Mm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function bC(t,e){switch(pm(e),e.tag){case 1:return $t(e.type)&&lu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ks(),Pe(zt),Pe(It),Em(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return bm(e),null;case 13:if(Pe(je),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));Ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(je),null;case 4:return Ks(),null;case 10:return vm(e.type._context),null;case 22:case 23:return Mm(),null;case 24:return null;default:return null}}var ec=!1,Tt=!1,EC=typeof WeakSet=="function"?WeakSet:Set,G=null;function Is(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Jf(t,e,n){try{n()}catch(r){ze(t,e,r)}}var Y0=!1;function TC(t,e){if(jf=iu,t=i1(),dm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)p=f,f=y;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Of={focusedElem:t,selectionRange:n},iu=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var E=w.memoizedProps,S=w.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?E:mn(e.type,E),S);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){ze(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return w=Y0,Y0=!1,w}function ha(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Jf(e,n,s)}i=i.next}while(i!==r)}}function fh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function eb(t){var e=t.alternate;e!==null&&(t.alternate=null,eb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[Ma],delete e[Ff],delete e[oC],delete e[aC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tb(t){return t.tag===5||t.tag===3||t.tag===4}function X0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ep(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=au));else if(r!==4&&(t=t.child,t!==null))for(ep(t,e,n),t=t.sibling;t!==null;)ep(t,e,n),t=t.sibling}function tp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tp(t,e,n),t=t.sibling;t!==null;)tp(t,e,n),t=t.sibling}var ut=null,gn=!1;function xr(t,e,n){for(n=n.child;n!==null;)nb(t,e,n),n=n.sibling}function nb(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(sh,n)}catch{}switch(n.tag){case 5:Tt||Is(n,e);case 6:var r=ut,i=gn;ut=null,xr(t,e,n),ut=r,gn=i,ut!==null&&(gn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(gn?(t=ut,n=n.stateNode,t.nodeType===8?Rd(t.parentNode,n):t.nodeType===1&&Rd(t,n),Aa(t)):Rd(ut,n.stateNode));break;case 4:r=ut,i=gn,ut=n.stateNode.containerInfo,gn=!0,xr(t,e,n),ut=r,gn=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Jf(n,e,o),i=i.next}while(i!==r)}xr(t,e,n);break;case 1:if(!Tt&&(Is(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ze(n,e,a)}xr(t,e,n);break;case 21:xr(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,xr(t,e,n),Tt=r):xr(t,e,n);break;default:xr(t,e,n)}}function J0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new EC),e.forEach(function(r){var i=DC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,gn=!1;break e;case 3:ut=a.stateNode.containerInfo,gn=!0;break e;case 4:ut=a.stateNode.containerInfo,gn=!0;break e}a=a.return}if(ut===null)throw Error(z(160));nb(s,o,i),ut=null,gn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ze(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rb(e,t),e=e.sibling}function rb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),Tn(t),r&4){try{ha(3,t,t.return),fh(3,t)}catch(E){ze(t,t.return,E)}try{ha(5,t,t.return)}catch(E){ze(t,t.return,E)}}break;case 1:pn(e,t),Tn(t),r&512&&n!==null&&Is(n,n.return);break;case 5:if(pn(e,t),Tn(t),r&512&&n!==null&&Is(n,n.return),t.flags&32){var i=t.stateNode;try{Sa(i,"")}catch(E){ze(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Sw(i,s),Sf(a,o);var c=Sf(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?Pw(i,f):h==="dangerouslySetInnerHTML"?Cw(i,f):h==="children"?Sa(i,f):Zp(i,h,f,c)}switch(a){case"input":xf(i,s);break;case"textarea":Iw(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?As(i,!!s.multiple,y,!1):p!==!!s.multiple&&(s.defaultValue!=null?As(i,!!s.multiple,s.defaultValue,!0):As(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ma]=s}catch(E){ze(t,t.return,E)}}break;case 6:if(pn(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){ze(t,t.return,E)}}break;case 3:if(pn(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(e.containerInfo)}catch(E){ze(t,t.return,E)}break;case 4:pn(e,t),Tn(t);break;case 13:pn(e,t),Tn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Rm=We())),r&4&&J0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(c=Tt)||h,pn(e,t),Tt=c):pn(e,t),Tn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(f=G=h;G!==null;){switch(p=G,y=p.child,p.tag){case 0:case 11:case 14:case 15:ha(4,p,p.return);break;case 1:Is(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(E){ze(r,n,E)}}break;case 5:Is(p,p.return);break;case 22:if(p.memoizedState!==null){ev(f);continue}}y!==null?(y.return=p,G=y):ev(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Aw("display",o))}catch(E){ze(t,t.return,E)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(E){ze(t,t.return,E)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:pn(e,t),Tn(t),r&4&&J0(t);break;case 21:break;default:pn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(tb(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Sa(i,""),r.flags&=-33);var s=X0(t);tp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=X0(t);ep(t,a,o);break;default:throw Error(z(161))}}catch(l){ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SC(t,e,n){G=t,ib(t)}function ib(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ec;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tt;a=ec;var c=Tt;if(ec=o,(Tt=l)&&!c)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?tv(i):l!==null?(l.return=o,G=l):tv(i);for(;s!==null;)G=s,ib(s),s=s.sibling;G=i,ec=a,Tt=c}Z0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):Z0(t)}}function Z0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||fh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}L0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Aa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Tt||e.flags&512&&Zf(e)}catch(p){ze(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function ev(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function tv(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fh(4,e)}catch(l){ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ze(e,i,l)}}var s=e.return;try{Zf(e)}catch(l){ze(e,s,l)}break;case 5:var o=e.return;try{Zf(e)}catch(l){ze(e,o,l)}}}catch(l){ze(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var IC=Math.ceil,vu=mr.ReactCurrentDispatcher,Pm=mr.ReactCurrentOwner,cn=mr.ReactCurrentBatchConfig,de=0,at=null,Ke=null,ft=0,Gt=0,ks=fi(0),et=0,Ua=null,Hi=0,ph=0,Nm=0,da=null,Vt=null,Rm=0,Qs=1/0,Gn=null,_u=!1,np=null,Wr=null,tc=!1,Mr=null,xu=0,fa=0,rp=null,Dc=-1,Mc=0;function Dt(){return de&6?We():Dc!==-1?Dc:Dc=We()}function qr(t){return t.mode&1?de&2&&ft!==0?ft&-ft:cC.transition!==null?(Mc===0&&(Mc=zw()),Mc):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Qw(t.type)),t):1}function wn(t,e,n,r){if(50<fa)throw fa=0,rp=null,Error(z(185));il(t,n,r),(!(de&2)||t!==at)&&(t===at&&(!(de&2)&&(ph|=n),et===4&&kr(t,ft)),Ht(t,r),n===1&&de===0&&!(e.mode&1)&&(Qs=We()+500,uh&&pi()))}function Ht(t,e){var n=t.callbackNode;ck(t,e);var r=ru(t,t===at?ft:0);if(r===0)n!==null&&u0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&u0(n),e===1)t.tag===0?lC(nv.bind(null,t)):p1(nv.bind(null,t)),iC(function(){!(de&6)&&pi()}),n=null;else{switch($w(r)){case 1:n=im;break;case 4:n=Uw;break;case 16:n=nu;break;case 536870912:n=Bw;break;default:n=nu}n=db(n,sb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sb(t,e){if(Dc=-1,Mc=0,de&6)throw Error(z(327));var n=t.callbackNode;if(Ms()&&t.callbackNode!==n)return null;var r=ru(t,t===at?ft:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wu(t,r);else{e=r;var i=de;de|=2;var s=ab();(at!==t||ft!==e)&&(Gn=null,Qs=We()+500,Oi(t,e));do try{AC();break}catch(a){ob(t,a)}while(1);ym(),vu.current=s,de=i,Ke!==null?e=0:(at=null,ft=0,e=et)}if(e!==0){if(e===2&&(i=Pf(t),i!==0&&(r=i,e=ip(t,i))),e===1)throw n=Ua,Oi(t,0),kr(t,r),Ht(t,We()),n;if(e===6)kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!kC(i)&&(e=wu(t,r),e===2&&(s=Pf(t),s!==0&&(r=s,e=ip(t,s))),e===1))throw n=Ua,Oi(t,0),kr(t,r),Ht(t,We()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ki(t,Vt,Gn);break;case 3:if(kr(t,r),(r&130023424)===r&&(e=Rm+500-We(),10<e)){if(ru(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vf(ki.bind(null,t,Vt,Gn),e);break}ki(t,Vt,Gn);break;case 4:if(kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-xn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IC(r/1960))-r,10<r){t.timeoutHandle=Vf(ki.bind(null,t,Vt,Gn),r);break}ki(t,Vt,Gn);break;case 5:ki(t,Vt,Gn);break;default:throw Error(z(329))}}}return Ht(t,We()),t.callbackNode===n?sb.bind(null,t):null}function ip(t,e){var n=da;return t.current.memoizedState.isDehydrated&&(Oi(t,e).flags|=256),t=wu(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&sp(e)),t}function sp(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function kC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!En(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kr(t,e){for(e&=~Nm,e&=~ph,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xn(e),r=1<<n;t[n]=-1,e&=~r}}function nv(t){if(de&6)throw Error(z(327));Ms();var e=ru(t,0);if(!(e&1))return Ht(t,We()),null;var n=wu(t,e);if(t.tag!==0&&n===2){var r=Pf(t);r!==0&&(e=r,n=ip(t,r))}if(n===1)throw n=Ua,Oi(t,0),kr(t,e),Ht(t,We()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ki(t,Vt,Gn),Ht(t,We()),null}function Dm(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Qs=We()+500,uh&&pi())}}function Wi(t){Mr!==null&&Mr.tag===0&&!(de&6)&&Ms();var e=de;de|=1;var n=cn.transition,r=_e;try{if(cn.transition=null,_e=1,t)return t()}finally{_e=r,cn.transition=n,de=e,!(de&6)&&pi()}}function Mm(){Gt=ks.current,Pe(ks)}function Oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rC(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(pm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&lu();break;case 3:Ks(),Pe(zt),Pe(It),Em();break;case 5:bm(r);break;case 4:Ks();break;case 13:Pe(je);break;case 19:Pe(je);break;case 10:vm(r.type._context);break;case 22:case 23:Mm()}n=n.return}if(at=t,Ke=t=Kr(t.current,null),ft=Gt=e,et=0,Ua=null,Nm=ph=Hi=0,Vt=da=null,Di!==null){for(e=0;e<Di.length;e++)if(n=Di[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Di=null}return t}function ob(t,e){do{var n=Ke;try{if(ym(),Pc.current=yu,gu){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gu=!1}if($i=0,st=Je=Le=null,ua=!1,La=0,Pm.current=null,n===null||n.return===null){et=1,Ua=e,Ke=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ft,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=$0(o);if(y!==null){y.flags&=-257,H0(y,o,a,s,e),y.mode&1&&z0(s,c,e),e=y,l=c;var w=e.updateQueue;if(w===null){var E=new Set;E.add(l),e.updateQueue=E}else w.add(l);break e}else{if(!(e&1)){z0(s,c,e),jm();break e}l=Error(z(426))}}else if(Re&&a.mode&1){var S=$0(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),H0(S,o,a,s,e),mm(Gs(l,a));break e}}s=l=Gs(l,a),et!==4&&(et=2),da===null?da=[s]:da.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=$1(s,l,e);O0(s,b);break e;case 1:a=l;var x=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Wr===null||!Wr.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=H1(s,a,e);O0(s,P);break e}}s=s.return}while(s!==null)}cb(n)}catch(M){e=M,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function ab(){var t=vu.current;return vu.current=yu,t===null?yu:t}function jm(){(et===0||et===3||et===2)&&(et=4),at===null||!(Hi&268435455)&&!(ph&268435455)||kr(at,ft)}function wu(t,e){var n=de;de|=2;var r=ab();(at!==t||ft!==e)&&(Gn=null,Oi(t,e));do try{CC();break}catch(i){ob(t,i)}while(1);if(ym(),de=n,vu.current=r,Ke!==null)throw Error(z(261));return at=null,ft=0,et}function CC(){for(;Ke!==null;)lb(Ke)}function AC(){for(;Ke!==null&&!ek();)lb(Ke)}function lb(t){var e=hb(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?cb(t):Ke=e,Pm.current=null}function cb(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bC(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ke=null;return}}else if(n=wC(n,e,Gt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);et===0&&(et=5)}function ki(t,e,n){var r=_e,i=cn.transition;try{cn.transition=null,_e=1,PC(t,e,n,r)}finally{cn.transition=i,_e=r}return null}function PC(t,e,n,r){do Ms();while(Mr!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(uk(t,s),t===at&&(Ke=at=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tc||(tc=!0,db(nu,function(){return Ms(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=cn.transition,cn.transition=null;var o=_e;_e=1;var a=de;de|=4,Pm.current=null,TC(t,n),rb(n,t),Yk(Of),iu=!!jf,Of=jf=null,t.current=n,SC(n),tk(),de=a,_e=o,cn.transition=s}else t.current=n;if(tc&&(tc=!1,Mr=t,xu=i),s=t.pendingLanes,s===0&&(Wr=null),ik(n.stateNode),Ht(t,We()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_u)throw _u=!1,t=np,np=null,t;return xu&1&&t.tag!==0&&Ms(),s=t.pendingLanes,s&1?t===rp?fa++:(fa=0,rp=t):fa=0,pi(),null}function Ms(){if(Mr!==null){var t=$w(xu),e=cn.transition,n=_e;try{if(cn.transition=null,_e=16>t?16:t,Mr===null)var r=!1;else{if(t=Mr,Mr=null,xu=0,de&6)throw Error(z(331));var i=de;for(de|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(G=c;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:ha(8,h,s)}var f=h.child;if(f!==null)f.return=h,G=f;else for(;G!==null;){h=G;var p=h.sibling,y=h.return;if(eb(h),h===c){G=null;break}if(p!==null){p.return=y,G=p;break}G=y}}}var w=s.alternate;if(w!==null){var E=w.child;if(E!==null){w.child=null;do{var S=E.sibling;E.sibling=null,E=S}while(E!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ha(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,G=b;break e}G=s.return}}var x=t.current;for(G=x;G!==null;){o=G;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,G=I;else e:for(o=x;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fh(9,a)}}catch(M){ze(a,a.return,M)}if(a===o){G=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,G=P;break e}G=a.return}}if(de=i,pi(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(sh,t)}catch{}r=!0}return r}finally{_e=n,cn.transition=e}}return!1}function rv(t,e,n){e=Gs(n,e),e=$1(t,e,1),t=Hr(t,e,1),e=Dt(),t!==null&&(il(t,1,e),Ht(t,e))}function ze(t,e,n){if(t.tag===3)rv(t,t,n);else for(;e!==null;){if(e.tag===3){rv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wr===null||!Wr.has(r))){t=Gs(n,t),t=H1(e,t,1),e=Hr(e,t,1),t=Dt(),e!==null&&(il(e,1,t),Ht(e,t));break}}e=e.return}}function NC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,at===t&&(ft&n)===n&&(et===4||et===3&&(ft&130023424)===ft&&500>We()-Rm?Oi(t,0):Nm|=n),Ht(t,e)}function ub(t,e){e===0&&(t.mode&1?(e=Wl,Wl<<=1,!(Wl&130023424)&&(Wl=4194304)):e=1);var n=Dt();t=or(t,e),t!==null&&(il(t,e,n),Ht(t,n))}function RC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ub(t,n)}function DC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),ub(t,n)}var hb;hb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,xC(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Re&&e.flags&1048576&&m1(e,hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rc(t,e),t=e.pendingProps;var i=Hs(e,It.current);Ds(e,n),i=Sm(null,e,r,t,i,n);var s=Im();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(s=!0,cu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xm(e),i.updater=dh,e.stateNode=i,i._reactInternals=e,Wf(e,r,t,n),e=Gf(null,e,r,!0,s,n)):(e.tag=0,Re&&s&&fm(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jC(r),t=mn(r,t),i){case 0:e=Kf(null,e,r,t,n);break e;case 1:e=K0(null,e,r,t,n);break e;case 11:e=W0(null,e,r,t,n);break e;case 14:e=q0(null,e,r,mn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),Kf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),K0(t,e,r,i,n);case 3:e:{if(G1(e),t===null)throw Error(z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,w1(t,e),pu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gs(Error(z(423)),e),e=G0(t,e,r,n,i);break e}else if(r!==i){i=Gs(Error(z(424)),e),e=G0(t,e,r,n,i);break e}else for(Qt=$r(e.stateNode.containerInfo.firstChild),Jt=e,Re=!0,vn=null,n=_1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ws(),r===i){e=ar(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return b1(e),t===null&&zf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Lf(r,i)?o=null:s!==null&&Lf(r,s)&&(e.flags|=32),K1(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&zf(e),null;case 13:return Q1(t,e,n);case 4:return wm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qs(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),W0(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,be(du,r._currentValue),r._currentValue=o,s!==null)if(En(s.value,o)){if(s.children===i.children&&!zt.current){e=ar(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=nr(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),$f(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),$f(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ds(e,n),i=hn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=mn(r,e.pendingProps),i=mn(r.type,i),q0(t,e,r,i,n);case 15:return W1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:mn(r,i),Rc(t,e),e.tag=1,$t(r)?(t=!0,cu(e)):t=!1,Ds(e,n),z1(e,r,i),Wf(e,r,i,n),Gf(null,e,r,!0,t,n);case 19:return Y1(t,e,n);case 22:return q1(t,e,n)}throw Error(z(156,e.tag))};function db(t,e){return Fw(t,e)}function MC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,r){return new MC(t,e,n,r)}function Om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jC(t){if(typeof t=="function")return Om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tm)return 11;if(t===nm)return 14}return 2}function Kr(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Om(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ys:return Li(n.children,i,s,e);case em:o=8,i|=8;break;case mf:return t=an(12,n,e,i|2),t.elementType=mf,t.lanes=s,t;case gf:return t=an(13,n,e,i),t.elementType=gf,t.lanes=s,t;case yf:return t=an(19,n,e,i),t.elementType=yf,t.lanes=s,t;case bw:return mh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xw:o=10;break e;case ww:o=9;break e;case tm:o=11;break e;case nm:o=14;break e;case Er:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=an(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Li(t,e,n,r){return t=an(7,t,r,e),t.lanes=n,t}function mh(t,e,n,r){return t=an(22,t,r,e),t.elementType=bw,t.lanes=n,t.stateNode={isHidden:!1},t}function Ud(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function Bd(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function OC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lm(t,e,n,r,i,s,o,a,l){return t=new OC(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=an(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xm(s),t}function LC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function fb(t){if(!t)return ni;t=t._reactInternals;e:{if(es(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if($t(n))return f1(t,n,e)}return e}function pb(t,e,n,r,i,s,o,a,l){return t=Lm(n,r,!0,t,i,s,o,a,l),t.context=fb(null),n=t.current,r=Dt(),i=qr(n),s=nr(r,i),s.callback=e??null,Hr(n,s,i),t.current.lanes=i,il(t,i,r),Ht(t,r),t}function gh(t,e,n,r){var i=e.current,s=Dt(),o=qr(i);return n=fb(n),e.context===null?e.context=n:e.pendingContext=n,e=nr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(i,e,o),t!==null&&(wn(t,i,o,s),Ac(t,i,o)),o}function bu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vm(t,e){iv(t,e),(t=t.alternate)&&iv(t,e)}function VC(){return null}var mb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fm(t){this._internalRoot=t}yh.prototype.render=Fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));gh(t,e,null,null)};yh.prototype.unmount=Fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wi(function(){gh(null,t,null,null)}),e[sr]=null}};function yh(t){this._internalRoot=t}yh.prototype.unstable_scheduleHydration=function(t){if(t){var e=qw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&Gw(t)}};function Um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sv(){}function FC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=bu(o);s.call(c)}}var o=pb(e,r,t,0,null,!1,!1,"",sv);return t._reactRootContainer=o,t[sr]=o.current,Ra(t.nodeType===8?t.parentNode:t),Wi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=bu(l);a.call(c)}}var l=Lm(t,0,!1,null,null,!1,!1,"",sv);return t._reactRootContainer=l,t[sr]=l.current,Ra(t.nodeType===8?t.parentNode:t),Wi(function(){gh(e,l,n,r)}),l}function _h(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=bu(o);a.call(l)}}gh(e,o,t,i)}else o=FC(n,e,t,i,r);return bu(o)}Hw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(sm(e,n|1),Ht(e,We()),!(de&6)&&(Qs=We()+500,pi()))}break;case 13:Wi(function(){var r=or(t,1);if(r!==null){var i=Dt();wn(r,t,1,i)}}),Vm(t,1)}};om=function(t){if(t.tag===13){var e=or(t,134217728);if(e!==null){var n=Dt();wn(e,t,134217728,n)}Vm(t,134217728)}};Ww=function(t){if(t.tag===13){var e=qr(t),n=or(t,e);if(n!==null){var r=Dt();wn(n,t,e,r)}Vm(t,e)}};qw=function(){return _e};Kw=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};kf=function(t,e,n){switch(e){case"input":if(xf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ch(r);if(!i)throw Error(z(90));Tw(r),xf(r,i)}}}break;case"textarea":Iw(t,n);break;case"select":e=n.value,e!=null&&As(t,!!n.multiple,e,!1)}};Dw=Dm;Mw=Wi;var UC={usingClientEntryPoint:!1,Events:[ol,ws,ch,Nw,Rw,Dm]},Uo={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BC={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lw(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||VC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{sh=nc.inject(BC),Rn=nc}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UC;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Um(e))throw Error(z(200));return LC(t,e,null,n)};en.createRoot=function(t,e){if(!Um(t))throw Error(z(299));var n=!1,r="",i=mb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lm(t,1,!1,null,null,n,!1,r,i),t[sr]=e.current,Ra(t.nodeType===8?t.parentNode:t),new Fm(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Lw(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return Wi(t)};en.hydrate=function(t,e,n){if(!vh(e))throw Error(z(200));return _h(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!Um(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=pb(e,null,t,1,n??null,i,!1,s,o),t[sr]=e.current,Ra(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yh(e)};en.render=function(t,e,n){if(!vh(e))throw Error(z(200));return _h(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!vh(t))throw Error(z(40));return t._reactRootContainer?(Wi(function(){_h(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};en.unstable_batchedUpdates=Dm;en.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vh(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return _h(t,e,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function gb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gb)}catch(t){console.error(t)}}gb(),gw.exports=en;var zC=gw.exports,ov=zC;ff.createRoot=ov.createRoot,ff.hydrateRoot=ov.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ba(){return Ba=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ba.apply(this,arguments)}var jr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jr||(jr={}));const av="popstate";function $C(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return op("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Eu(i)}return WC(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HC(){return Math.random().toString(36).substr(2,8)}function lv(t,e){return{usr:t.state,key:t.key,idx:e}}function op(t,e,n,r){return n===void 0&&(n=null),Ba({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uo(e):e,{state:n,key:e&&e.key||r||HC()})}function Eu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=jr.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ba({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=jr.Pop;let S=h(),b=S==null?null:S-c;c=S,l&&l({action:a,location:E.location,delta:b})}function p(S,b){a=jr.Push;let x=op(E.location,S,b);n&&n(x,S),c=h()+1;let I=lv(x,c),P=E.createHref(x);try{o.pushState(I,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(P)}s&&l&&l({action:a,location:E.location,delta:1})}function y(S,b){a=jr.Replace;let x=op(E.location,S,b);n&&n(x,S),c=h();let I=lv(x,c),P=E.createHref(x);o.replaceState(I,"",P),s&&l&&l({action:a,location:E.location,delta:0})}function w(S){let b=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof S=="string"?S:Eu(S);return x=x.replace(/ $/,"%20"),Ye(b,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,b)}let E={get action(){return a},get location(){return t(i,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(av,f),l=S,()=>{i.removeEventListener(av,f),l=null}},createHref(S){return e(i,S)},createURL:w,encodeLocation(S){let b=w(S);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:y,go(S){return o.go(S)}};return E}var cv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cv||(cv={}));function qC(t,e,n){return n===void 0&&(n="/"),KC(t,e,n,!1)}function KC(t,e,n,r){let i=typeof e=="string"?uo(e):e,s=Bm(i.pathname||"/",n);if(s==null)return null;let o=vb(t);GC(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=sA(s);a=rA(o[l],c,r)}return a}function vb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ye(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Gr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ye(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vb(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:tA(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of _b(s.path))i(s,o,l)}),e}function _b(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=_b(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function GC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QC=/^:[\w-]+$/,YC=3,XC=2,JC=1,ZC=10,eA=-2,uv=t=>t==="*";function tA(t,e){let n=t.split("/"),r=n.length;return n.some(uv)&&(r+=eA),e&&(r+=XC),n.filter(i=>!uv(i)).reduce((i,s)=>i+(QC.test(s)?YC:s===""?JC:ZC),r)}function nA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rA(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=hv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=hv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Gr([s,f.pathname]),pathnameBase:cA(Gr([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Gr([s,f.pathnameBase]))}return o}function hv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:y}=h;if(p==="*"){let E=a[f]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const w=a[f];return y&&!w?c[p]=void 0:c[p]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function iA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Bm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function oA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uo(t):t;return{pathname:n?n.startsWith("/")?n:aA(n,e):e,search:uA(r),hash:hA(i)}}function aA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xb(t,e){let n=lA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function wb(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=uo(t):(i=Ba({},t),Ye(!i.pathname||!i.pathname.includes("?"),zd("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),zd("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),zd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=oA(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Gr=t=>t.join("/").replace(/\/\/+/g,"/"),cA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function dA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bb=["post","put","patch","delete"];new Set(bb);const fA=["get",...bb];new Set(fA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},za.apply(this,arguments)}const zm=V.createContext(null),pA=V.createContext(null),ts=V.createContext(null),xh=V.createContext(null),ns=V.createContext({outlet:null,matches:[],isDataRoute:!1}),Eb=V.createContext(null);function mA(t,e){let{relative:n}=e===void 0?{}:e;ll()||Ye(!1);let{basename:r,navigator:i}=V.useContext(ts),{hash:s,pathname:o,search:a}=Ib(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Gr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ll(){return V.useContext(xh)!=null}function cl(){return ll()||Ye(!1),V.useContext(xh).location}function Tb(t){V.useContext(ts).static||V.useLayoutEffect(t)}function Sb(){let{isDataRoute:t}=V.useContext(ns);return t?CA():gA()}function gA(){ll()||Ye(!1);let t=V.useContext(zm),{basename:e,future:n,navigator:r}=V.useContext(ts),{matches:i}=V.useContext(ns),{pathname:s}=cl(),o=JSON.stringify(xb(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return Tb(()=>{a.current=!0}),V.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=wb(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Gr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}function Ib(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(ts),{matches:i}=V.useContext(ns),{pathname:s}=cl(),o=JSON.stringify(xb(i,r.v7_relativeSplatPath));return V.useMemo(()=>wb(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function yA(t,e){return vA(t,e)}function vA(t,e,n,r){ll()||Ye(!1);let{navigator:i}=V.useContext(ts),{matches:s}=V.useContext(ns),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=cl(),h;if(e){var f;let S=typeof e=="string"?uo(e):e;l==="/"||(f=S.pathname)!=null&&f.startsWith(l)||Ye(!1),h=S}else h=c;let p=h.pathname||"/",y=p;if(l!=="/"){let S=l.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=qC(t,{pathname:y}),E=EA(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Gr([l,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:Gr([l,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return e&&E?V.createElement(xh.Provider,{value:{location:za({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:jr.Pop}},E):E}function _A(){let t=kA(),e=dA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,s)}const xA=V.createElement(_A,null);class wA extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(ns.Provider,{value:this.props.routeContext},V.createElement(Eb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bA(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(zm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(ns.Provider,{value:e},r)}function EA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Ye(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:y}=n,w=f.route.loader&&p[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let y,w=!1,E=null,S=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,E=f.route.errorElement||xA,l&&(c<0&&p===0?(AA("route-fallback",!1),w=!0,S=null):c===p&&(w=!0,S=f.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),x=()=>{let I;return y?I=E:w?I=S:f.route.Component?I=V.createElement(f.route.Component,null):f.route.element?I=f.route.element:I=h,V.createElement(bA,{match:f,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:I})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?V.createElement(wA,{location:n.location,revalidation:n.revalidation,component:E,error:y,children:x(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):x()},null)}var kb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kb||{}),Tu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tu||{});function TA(t){let e=V.useContext(zm);return e||Ye(!1),e}function SA(t){let e=V.useContext(pA);return e||Ye(!1),e}function IA(t){let e=V.useContext(ns);return e||Ye(!1),e}function Cb(t){let e=IA(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function kA(){var t;let e=V.useContext(Eb),n=SA(Tu.UseRouteError),r=Cb(Tu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function CA(){let{router:t}=TA(kb.UseNavigateStable),e=Cb(Tu.UseNavigateStable),n=V.useRef(!1);return Tb(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,za({fromRouteId:e},s)))},[t,e])}const dv={};function AA(t,e,n){!e&&!dv[t]&&(dv[t]=!0)}function PA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function br(t){Ye(!1)}function NA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=jr.Pop,navigator:s,static:o=!1,future:a}=t;ll()&&Ye(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:s,static:o,future:za({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=uo(r));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:w="default"}=r,E=V.useMemo(()=>{let S=Bm(h,l);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:w},navigationType:i}},[l,h,f,p,y,w,i]);return E==null?null:V.createElement(ts.Provider,{value:c},V.createElement(xh.Provider,{children:n,value:E}))}function RA(t){let{children:e,location:n}=t;return yA(ap(e),n)}new Promise(()=>{});function ap(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,ap(r.props.children,s));return}r.type!==br&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ap(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lp(){return lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lp.apply(this,arguments)}function DA(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function MA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jA(t,e){return t.button===0&&(!e||e==="_self")&&!MA(t)}const OA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LA="6";try{window.__reactRouterVersion=LA}catch{}const VA="startTransition",fv=NI[VA];function FA(t){let{basename:e,children:n,future:r,window:i}=t,s=V.useRef();s.current==null&&(s.current=$C({window:i,v5Compat:!0}));let o=s.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=V.useCallback(f=>{c&&fv?fv(()=>l(f)):l(f)},[l,c]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.useEffect(()=>PA(r),[r]),V.createElement(NA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const UA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pv=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,p=DA(e,OA),{basename:y}=V.useContext(ts),w,E=!1;if(typeof c=="string"&&BA.test(c)&&(w=c,UA))try{let I=new URL(window.location.href),P=c.startsWith("//")?new URL(I.protocol+c):new URL(c),M=Bm(P.pathname,y);P.origin===I.origin&&M!=null?c=M+P.search+P.hash:E=!0}catch{}let S=mA(c,{relative:i}),b=zA(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function x(I){r&&r(I),I.defaultPrevented||b(I)}return V.createElement("a",lp({},p,{href:w||S,onClick:E||s?r:x,ref:n,target:l}))});var mv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mv||(mv={}));var gv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gv||(gv={}));function zA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Sb(),c=cl(),h=Ib(t,{relative:o});return V.useCallback(f=>{if(jA(f,n)){f.preventDefault();let p=r!==void 0?r:Eu(c)===Eu(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $A={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ue=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},h)=>V.createElement("svg",{ref:h,...$A,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${HA(t)}`,a].join(" "),...c},[...e.map(([f,p])=>V.createElement(f,p)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=Ue("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=Ue("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Ue("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Ue("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=Ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=Ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=Ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=Ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=Ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=Ue("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=Ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=Ue("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=Ue("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=Ue("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ZA=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Rb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new tP;const p=s<<2|a>>4;if(r.push(p),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const w=c<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nP=function(t){const e=Nb(t);return Rb.encodeByteArray(e,!0)},ku=function(t){return nP(t).replace(/\./g,"")},Db=function(t){try{return Rb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=()=>rP().__FIREBASE_DEFAULTS__,sP=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Db(t[1]);return e&&JSON.parse(e)},bh=()=>{try{return ZA()||iP()||sP()||oP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mb=t=>{var e,n;return(n=(e=bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aP=t=>{const e=Mb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jb=()=>{var t;return(t=bh())===null||t===void 0?void 0:t.config},Ob=t=>{var e;return(e=bh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Lb(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ku(JSON.stringify(n)),ku(JSON.stringify(o)),a].join(".")}const pa={};function uP(){const t={prod:[],emulator:[]};for(const e of Object.keys(pa))pa[e]?t.emulator.push(e):t.prod.push(e);return t}function hP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let _v=!1;function Vb(t,e){if(typeof window>"u"||typeof document>"u"||!ho(window.location.host)||pa[t]===e||pa[t]||_v)return;pa[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=uP().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,y){p.setAttribute("width","24"),p.setAttribute("id",y),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{_v=!0,o()},p}function h(p,y){p.setAttribute("id",y),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=hP(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),E=n("learnmore"),S=document.getElementById(E)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const I=p.element;a(I),h(S,E);const P=c();l(x,b),I.append(x,w,S,P),document.body.appendChild(I)}s?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function fP(){var t;const e=(t=bh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yP(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vP(){return!fP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _P(){try{return typeof indexedDB=="object"}catch{return!1}}function xP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="FirebaseError";class gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wP,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ul.prototype.create)}}class ul{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?bP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new gr(i,a,r)}}function bP(t,e){return t.replace(EP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EP=/\{\$([^}]+)}/g;function TP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(xv(s)&&xv(o)){if(!qi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function xv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function SP(t,e){const n=new IP(t,e);return n.subscribe.bind(n)}class IP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Hd),i.error===void 0&&(i.error=Hd),i.complete===void 0&&(i.complete=Hd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return t&&t._delegate?t._delegate:t}class Ki{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PP(e))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ci){return this.instances.has(e)}getOptions(e=Ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ci){return this.component?this.component.multipleInstances?e:Ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AP(t){return t===Ci?void 0:t}function PP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(le||(le={}));const RP={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},DP=le.INFO,MP={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},jP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=MP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $m{constructor(e){this.name=e,this._logLevel=DP,this._logHandler=jP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}}const OP=(t,e)=>e.some(n=>t instanceof n);let wv,bv;function LP(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VP(){return bv||(bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fb=new WeakMap,cp=new WeakMap,Ub=new WeakMap,Wd=new WeakMap,Hm=new WeakMap;function FP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Qr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fb.set(n,t)}).catch(()=>{}),Hm.set(e,t),e}function UP(t){if(cp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cp.set(t,e)}let up={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ub.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BP(t){up=t(up)}function zP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qd(this),e,...n);return Ub.set(r,e.sort?e.sort():[e]),Qr(r)}:VP().includes(t)?function(...e){return t.apply(qd(this),e),Qr(Fb.get(this))}:function(...e){return Qr(t.apply(qd(this),e))}}function $P(t){return typeof t=="function"?zP(t):(t instanceof IDBTransaction&&UP(t),OP(t,LP())?new Proxy(t,up):t)}function Qr(t){if(t instanceof IDBRequest)return FP(t);if(Wd.has(t))return Wd.get(t);const e=$P(t);return e!==t&&(Wd.set(t,e),Hm.set(e,t)),e}const qd=t=>Hm.get(t);function HP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Qr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Qr(o.result),l.oldVersion,l.newVersion,Qr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const WP=["get","getKey","getAll","getAllKeys","count"],qP=["put","add","delete","clear"],Kd=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Kd.set(e,s),s}BP(t=>({...t,get:(e,n,r)=>Ev(e,n)||t.get(e,n,r),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",Tv="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new $m("@firebase/app"),QP="@firebase/app-compat",YP="@firebase/analytics-compat",XP="@firebase/analytics",JP="@firebase/app-check-compat",ZP="@firebase/app-check",e2="@firebase/auth",t2="@firebase/auth-compat",n2="@firebase/database",r2="@firebase/data-connect",i2="@firebase/database-compat",s2="@firebase/functions",o2="@firebase/functions-compat",a2="@firebase/installations",l2="@firebase/installations-compat",c2="@firebase/messaging",u2="@firebase/messaging-compat",h2="@firebase/performance",d2="@firebase/performance-compat",f2="@firebase/remote-config",p2="@firebase/remote-config-compat",m2="@firebase/storage",g2="@firebase/storage-compat",y2="@firebase/firestore",v2="@firebase/ai",_2="@firebase/firestore-compat",x2="firebase",w2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="[DEFAULT]",b2={[hp]:"fire-core",[QP]:"fire-core-compat",[XP]:"fire-analytics",[YP]:"fire-analytics-compat",[ZP]:"fire-app-check",[JP]:"fire-app-check-compat",[e2]:"fire-auth",[t2]:"fire-auth-compat",[n2]:"fire-rtdb",[r2]:"fire-data-connect",[i2]:"fire-rtdb-compat",[s2]:"fire-fn",[o2]:"fire-fn-compat",[a2]:"fire-iid",[l2]:"fire-iid-compat",[c2]:"fire-fcm",[u2]:"fire-fcm-compat",[h2]:"fire-perf",[d2]:"fire-perf-compat",[f2]:"fire-rc",[p2]:"fire-rc-compat",[m2]:"fire-gcs",[g2]:"fire-gcs-compat",[y2]:"fire-fst",[_2]:"fire-fst-compat",[v2]:"fire-vertex","fire-js":"fire-js",[x2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Map,E2=new Map,fp=new Map;function Sv(t,e){try{t.container.addComponent(e)}catch(n){lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xs(t){const e=t.name;if(fp.has(e))return lr.debug(`There were multiple attempts to register component ${e}.`),!1;fp.set(e,t);for(const n of Cu.values())Sv(n,t);for(const n of E2.values())Sv(n,t);return!0}function Wm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new ul("app","Firebase",T2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=w2;function Bb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dp,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Yr.create("bad-app-name",{appName:String(i)});if(n||(n=jb()),!n)throw Yr.create("no-options");const s=Cu.get(i);if(s){if(qi(n,s.options)&&qi(r,s.config))return s;throw Yr.create("duplicate-app",{appName:i})}const o=new NP(i);for(const l of fp.values())o.addComponent(l);const a=new S2(n,r,o);return Cu.set(i,a),a}function zb(t=dp){const e=Cu.get(t);if(!e&&t===dp&&jb())return Bb();if(!e)throw Yr.create("no-app",{appName:t});return e}function Xr(t,e,n){var r;let i=(r=b2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lr.warn(a.join(" "));return}Xs(new Ki(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="firebase-heartbeat-database",k2=1,Ha="firebase-heartbeat-store";let Gd=null;function $b(){return Gd||(Gd=HP(I2,k2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ha)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yr.create("idb-open",{originalErrorMessage:t.message})})),Gd}async function C2(t){try{const n=(await $b()).transaction(Ha),r=await n.objectStore(Ha).get(Hb(t));return await n.done,r}catch(e){if(e instanceof gr)lr.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lr.warn(n.message)}}}async function Iv(t,e){try{const r=(await $b()).transaction(Ha,"readwrite");await r.objectStore(Ha).put(e,Hb(t)),await r.done}catch(n){if(n instanceof gr)lr.warn(n.message);else{const r=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lr.warn(r.message)}}}function Hb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1024,P2=30;class N2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new D2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>P2){const o=M2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){lr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kv(),{heartbeatsToSend:r,unsentEntries:i}=R2(this._heartbeatsCache.heartbeats),s=ku(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return lr.warn(n),""}}}function kv(){return new Date().toISOString().substring(0,10)}function R2(t,e=A2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class D2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _P()?xP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Cv(t){return ku(JSON.stringify({version:2,heartbeats:t})).length}function M2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t){Xs(new Ki("platform-logger",e=>new KP(e),"PRIVATE")),Xs(new Ki("heartbeat",e=>new N2(e),"PRIVATE")),Xr(hp,Tv,t),Xr(hp,Tv,"esm2017"),Xr("fire-js","")}j2("");var Av=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,Wb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,v){function k(){}k.prototype=v.prototype,_.D=v.prototype,_.prototype=new k,_.prototype.constructor=_,_.C=function(A,R,D){for(var N=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)N[Te-2]=arguments[Te];return v.prototype[R].apply(A,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(_,v,k){k||(k=0);var A=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)A[R]=v.charCodeAt(k++)|v.charCodeAt(k++)<<8|v.charCodeAt(k++)<<16|v.charCodeAt(k++)<<24;else for(R=0;16>R;++R)A[R]=v[k++]|v[k++]<<8|v[k++]<<16|v[k++]<<24;v=_.g[0],k=_.g[1],R=_.g[2];var D=_.g[3],N=v+(D^k&(R^D))+A[0]+3614090360&4294967295;v=k+(N<<7&4294967295|N>>>25),N=D+(R^v&(k^R))+A[1]+3905402710&4294967295,D=v+(N<<12&4294967295|N>>>20),N=R+(k^D&(v^k))+A[2]+606105819&4294967295,R=D+(N<<17&4294967295|N>>>15),N=k+(v^R&(D^v))+A[3]+3250441966&4294967295,k=R+(N<<22&4294967295|N>>>10),N=v+(D^k&(R^D))+A[4]+4118548399&4294967295,v=k+(N<<7&4294967295|N>>>25),N=D+(R^v&(k^R))+A[5]+1200080426&4294967295,D=v+(N<<12&4294967295|N>>>20),N=R+(k^D&(v^k))+A[6]+2821735955&4294967295,R=D+(N<<17&4294967295|N>>>15),N=k+(v^R&(D^v))+A[7]+4249261313&4294967295,k=R+(N<<22&4294967295|N>>>10),N=v+(D^k&(R^D))+A[8]+1770035416&4294967295,v=k+(N<<7&4294967295|N>>>25),N=D+(R^v&(k^R))+A[9]+2336552879&4294967295,D=v+(N<<12&4294967295|N>>>20),N=R+(k^D&(v^k))+A[10]+4294925233&4294967295,R=D+(N<<17&4294967295|N>>>15),N=k+(v^R&(D^v))+A[11]+2304563134&4294967295,k=R+(N<<22&4294967295|N>>>10),N=v+(D^k&(R^D))+A[12]+1804603682&4294967295,v=k+(N<<7&4294967295|N>>>25),N=D+(R^v&(k^R))+A[13]+4254626195&4294967295,D=v+(N<<12&4294967295|N>>>20),N=R+(k^D&(v^k))+A[14]+2792965006&4294967295,R=D+(N<<17&4294967295|N>>>15),N=k+(v^R&(D^v))+A[15]+1236535329&4294967295,k=R+(N<<22&4294967295|N>>>10),N=v+(R^D&(k^R))+A[1]+4129170786&4294967295,v=k+(N<<5&4294967295|N>>>27),N=D+(k^R&(v^k))+A[6]+3225465664&4294967295,D=v+(N<<9&4294967295|N>>>23),N=R+(v^k&(D^v))+A[11]+643717713&4294967295,R=D+(N<<14&4294967295|N>>>18),N=k+(D^v&(R^D))+A[0]+3921069994&4294967295,k=R+(N<<20&4294967295|N>>>12),N=v+(R^D&(k^R))+A[5]+3593408605&4294967295,v=k+(N<<5&4294967295|N>>>27),N=D+(k^R&(v^k))+A[10]+38016083&4294967295,D=v+(N<<9&4294967295|N>>>23),N=R+(v^k&(D^v))+A[15]+3634488961&4294967295,R=D+(N<<14&4294967295|N>>>18),N=k+(D^v&(R^D))+A[4]+3889429448&4294967295,k=R+(N<<20&4294967295|N>>>12),N=v+(R^D&(k^R))+A[9]+568446438&4294967295,v=k+(N<<5&4294967295|N>>>27),N=D+(k^R&(v^k))+A[14]+3275163606&4294967295,D=v+(N<<9&4294967295|N>>>23),N=R+(v^k&(D^v))+A[3]+4107603335&4294967295,R=D+(N<<14&4294967295|N>>>18),N=k+(D^v&(R^D))+A[8]+1163531501&4294967295,k=R+(N<<20&4294967295|N>>>12),N=v+(R^D&(k^R))+A[13]+2850285829&4294967295,v=k+(N<<5&4294967295|N>>>27),N=D+(k^R&(v^k))+A[2]+4243563512&4294967295,D=v+(N<<9&4294967295|N>>>23),N=R+(v^k&(D^v))+A[7]+1735328473&4294967295,R=D+(N<<14&4294967295|N>>>18),N=k+(D^v&(R^D))+A[12]+2368359562&4294967295,k=R+(N<<20&4294967295|N>>>12),N=v+(k^R^D)+A[5]+4294588738&4294967295,v=k+(N<<4&4294967295|N>>>28),N=D+(v^k^R)+A[8]+2272392833&4294967295,D=v+(N<<11&4294967295|N>>>21),N=R+(D^v^k)+A[11]+1839030562&4294967295,R=D+(N<<16&4294967295|N>>>16),N=k+(R^D^v)+A[14]+4259657740&4294967295,k=R+(N<<23&4294967295|N>>>9),N=v+(k^R^D)+A[1]+2763975236&4294967295,v=k+(N<<4&4294967295|N>>>28),N=D+(v^k^R)+A[4]+1272893353&4294967295,D=v+(N<<11&4294967295|N>>>21),N=R+(D^v^k)+A[7]+4139469664&4294967295,R=D+(N<<16&4294967295|N>>>16),N=k+(R^D^v)+A[10]+3200236656&4294967295,k=R+(N<<23&4294967295|N>>>9),N=v+(k^R^D)+A[13]+681279174&4294967295,v=k+(N<<4&4294967295|N>>>28),N=D+(v^k^R)+A[0]+3936430074&4294967295,D=v+(N<<11&4294967295|N>>>21),N=R+(D^v^k)+A[3]+3572445317&4294967295,R=D+(N<<16&4294967295|N>>>16),N=k+(R^D^v)+A[6]+76029189&4294967295,k=R+(N<<23&4294967295|N>>>9),N=v+(k^R^D)+A[9]+3654602809&4294967295,v=k+(N<<4&4294967295|N>>>28),N=D+(v^k^R)+A[12]+3873151461&4294967295,D=v+(N<<11&4294967295|N>>>21),N=R+(D^v^k)+A[15]+530742520&4294967295,R=D+(N<<16&4294967295|N>>>16),N=k+(R^D^v)+A[2]+3299628645&4294967295,k=R+(N<<23&4294967295|N>>>9),N=v+(R^(k|~D))+A[0]+4096336452&4294967295,v=k+(N<<6&4294967295|N>>>26),N=D+(k^(v|~R))+A[7]+1126891415&4294967295,D=v+(N<<10&4294967295|N>>>22),N=R+(v^(D|~k))+A[14]+2878612391&4294967295,R=D+(N<<15&4294967295|N>>>17),N=k+(D^(R|~v))+A[5]+4237533241&4294967295,k=R+(N<<21&4294967295|N>>>11),N=v+(R^(k|~D))+A[12]+1700485571&4294967295,v=k+(N<<6&4294967295|N>>>26),N=D+(k^(v|~R))+A[3]+2399980690&4294967295,D=v+(N<<10&4294967295|N>>>22),N=R+(v^(D|~k))+A[10]+4293915773&4294967295,R=D+(N<<15&4294967295|N>>>17),N=k+(D^(R|~v))+A[1]+2240044497&4294967295,k=R+(N<<21&4294967295|N>>>11),N=v+(R^(k|~D))+A[8]+1873313359&4294967295,v=k+(N<<6&4294967295|N>>>26),N=D+(k^(v|~R))+A[15]+4264355552&4294967295,D=v+(N<<10&4294967295|N>>>22),N=R+(v^(D|~k))+A[6]+2734768916&4294967295,R=D+(N<<15&4294967295|N>>>17),N=k+(D^(R|~v))+A[13]+1309151649&4294967295,k=R+(N<<21&4294967295|N>>>11),N=v+(R^(k|~D))+A[4]+4149444226&4294967295,v=k+(N<<6&4294967295|N>>>26),N=D+(k^(v|~R))+A[11]+3174756917&4294967295,D=v+(N<<10&4294967295|N>>>22),N=R+(v^(D|~k))+A[2]+718787259&4294967295,R=D+(N<<15&4294967295|N>>>17),N=k+(D^(R|~v))+A[9]+3951481745&4294967295,_.g[0]=_.g[0]+v&4294967295,_.g[1]=_.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,_.g[2]=_.g[2]+R&4294967295,_.g[3]=_.g[3]+D&4294967295}r.prototype.u=function(_,v){v===void 0&&(v=_.length);for(var k=v-this.blockSize,A=this.B,R=this.h,D=0;D<v;){if(R==0)for(;D<=k;)i(this,_,D),D+=this.blockSize;if(typeof _=="string"){for(;D<v;)if(A[R++]=_.charCodeAt(D++),R==this.blockSize){i(this,A),R=0;break}}else for(;D<v;)if(A[R++]=_[D++],R==this.blockSize){i(this,A),R=0;break}}this.h=R,this.o+=v},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var v=1;v<_.length-8;++v)_[v]=0;var k=8*this.o;for(v=_.length-8;v<_.length;++v)_[v]=k&255,k/=256;for(this.u(_),_=Array(16),v=k=0;4>v;++v)for(var A=0;32>A;A+=8)_[k++]=this.g[v]>>>A&255;return _};function s(_,v){var k=a;return Object.prototype.hasOwnProperty.call(k,_)?k[_]:k[_]=v(_)}function o(_,v){this.h=v;for(var k=[],A=!0,R=_.length-1;0<=R;R--){var D=_[R]|0;A&&D==v||(k[R]=D,A=!1)}this.g=k}var a={};function l(_){return-128<=_&&128>_?s(_,function(v){return new o([v|0],0>v?-1:0)}):new o([_|0],0>_?-1:0)}function c(_){if(isNaN(_)||!isFinite(_))return f;if(0>_)return S(c(-_));for(var v=[],k=1,A=0;_>=k;A++)v[A]=_/k|0,k*=4294967296;return new o(v,0)}function h(_,v){if(_.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(_.charAt(0)=="-")return S(h(_.substring(1),v));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(v,8)),A=f,R=0;R<_.length;R+=8){var D=Math.min(8,_.length-R),N=parseInt(_.substring(R,R+D),v);8>D?(D=c(Math.pow(v,D)),A=A.j(D).add(c(N))):(A=A.j(k),A=A.add(c(N)))}return A}var f=l(0),p=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-S(this).m();for(var _=0,v=1,k=0;k<this.g.length;k++){var A=this.i(k);_+=(0<=A?A:4294967296+A)*v,v*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w(this))return"0";if(E(this))return"-"+S(this).toString(_);for(var v=c(Math.pow(_,6)),k=this,A="";;){var R=P(k,v).g;k=b(k,R.j(v));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(_);if(k=R,w(k))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function w(_){if(_.h!=0)return!1;for(var v=0;v<_.g.length;v++)if(_.g[v]!=0)return!1;return!0}function E(_){return _.h==-1}t.l=function(_){return _=b(this,_),E(_)?-1:w(_)?0:1};function S(_){for(var v=_.g.length,k=[],A=0;A<v;A++)k[A]=~_.g[A];return new o(k,~_.h).add(p)}t.abs=function(){return E(this)?S(this):this},t.add=function(_){for(var v=Math.max(this.g.length,_.g.length),k=[],A=0,R=0;R<=v;R++){var D=A+(this.i(R)&65535)+(_.i(R)&65535),N=(D>>>16)+(this.i(R)>>>16)+(_.i(R)>>>16);A=N>>>16,D&=65535,N&=65535,k[R]=N<<16|D}return new o(k,k[k.length-1]&-2147483648?-1:0)};function b(_,v){return _.add(S(v))}t.j=function(_){if(w(this)||w(_))return f;if(E(this))return E(_)?S(this).j(S(_)):S(S(this).j(_));if(E(_))return S(this.j(S(_)));if(0>this.l(y)&&0>_.l(y))return c(this.m()*_.m());for(var v=this.g.length+_.g.length,k=[],A=0;A<2*v;A++)k[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<_.g.length;R++){var D=this.i(A)>>>16,N=this.i(A)&65535,Te=_.i(R)>>>16,pe=_.i(R)&65535;k[2*A+2*R]+=N*pe,x(k,2*A+2*R),k[2*A+2*R+1]+=D*pe,x(k,2*A+2*R+1),k[2*A+2*R+1]+=N*Te,x(k,2*A+2*R+1),k[2*A+2*R+2]+=D*Te,x(k,2*A+2*R+2)}for(A=0;A<v;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=v;A<2*v;A++)k[A]=0;return new o(k,0)};function x(_,v){for(;(_[v]&65535)!=_[v];)_[v+1]+=_[v]>>>16,_[v]&=65535,v++}function I(_,v){this.g=_,this.h=v}function P(_,v){if(w(v))throw Error("division by zero");if(w(_))return new I(f,f);if(E(_))return v=P(S(_),v),new I(S(v.g),S(v.h));if(E(v))return v=P(_,S(v)),new I(S(v.g),v.h);if(30<_.g.length){if(E(_)||E(v))throw Error("slowDivide_ only works with positive integers.");for(var k=p,A=v;0>=A.l(_);)k=M(k),A=M(A);var R=C(k,1),D=C(A,1);for(A=C(A,2),k=C(k,2);!w(A);){var N=D.add(A);0>=N.l(_)&&(R=R.add(k),D=N),A=C(A,1),k=C(k,1)}return v=b(_,R.j(v)),new I(R,v)}for(R=f;0<=_.l(v);){for(k=Math.max(1,Math.floor(_.m()/v.m())),A=Math.ceil(Math.log(k)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(k),N=D.j(v);E(N)||0<N.l(_);)k-=A,D=c(k),N=D.j(v);w(D)&&(D=p),R=R.add(D),_=b(_,N)}return new I(R,_)}t.A=function(_){return P(this,_).h},t.and=function(_){for(var v=Math.max(this.g.length,_.g.length),k=[],A=0;A<v;A++)k[A]=this.i(A)&_.i(A);return new o(k,this.h&_.h)},t.or=function(_){for(var v=Math.max(this.g.length,_.g.length),k=[],A=0;A<v;A++)k[A]=this.i(A)|_.i(A);return new o(k,this.h|_.h)},t.xor=function(_){for(var v=Math.max(this.g.length,_.g.length),k=[],A=0;A<v;A++)k[A]=this.i(A)^_.i(A);return new o(k,this.h^_.h)};function M(_){for(var v=_.g.length+1,k=[],A=0;A<v;A++)k[A]=_.i(A)<<1|_.i(A-1)>>>31;return new o(k,_.h)}function C(_,v){var k=v>>5;v%=32;for(var A=_.g.length-k,R=[],D=0;D<A;D++)R[D]=0<v?_.i(D+k)>>>v|_.i(D+k+1)<<32-v:_.i(D+k);return new o(R,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Jr=o}).apply(typeof Av<"u"?Av:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qb,Yo,Kb,Vc,pp,Gb,Qb,Yb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,g){return u==Array.prototype||u==Object.prototype||(u[m]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var m=0;m<u.length;++m){var g=u[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,m){if(m)e:{var g=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in g))break e;g=g[j]}u=u[u.length-1],T=g[u],m=m(T),m!=T&&m!=null&&e(g,u,{configurable:!0,writable:!0,value:m})}}function s(u,m){u instanceof String&&(u+="");var g=0,T=!1,j={next:function(){if(!T&&g<u.length){var L=g++;return{value:m(L,u[L]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}i("Array.prototype.values",function(u){return u||function(){return s(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function c(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function h(u,m,g){return u.call.apply(u.bind,arguments)}function f(u,m,g){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function p(u,m,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function y(u,m){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function w(u,m){function g(){}g.prototype=m.prototype,u.aa=m.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(T,j,L){for(var W=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)W[xe-2]=arguments[xe];return m.prototype[j].apply(T,W)}}function E(u){const m=u.length;if(0<m){const g=Array(m);for(let T=0;T<m;T++)g[T]=u[T];return g}return[]}function S(u,m){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(l(T)){const j=u.length||0,L=T.length||0;u.length=j+L;for(let W=0;W<L;W++)u[j+W]=T[W]}else u.push(T)}}class b{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function x(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function P(u){return P[" "](u),u}P[" "]=function(){};var M=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function C(u,m,g){for(const T in u)m.call(g,u[T],T,u)}function _(u,m){for(const g in u)m.call(void 0,u[g],g,u)}function v(u){const m={};for(const g in u)m[g]=u[g];return m}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,m){let g,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(g in T)u[g]=T[g];for(let L=0;L<k.length;L++)g=k[L],Object.prototype.hasOwnProperty.call(T,g)&&(u[g]=T[g])}}function R(u){var m=1;u=u.split(":");const g=[];for(;0<m&&u.length;)g.push(u.shift()),m--;return u.length&&g.push(u.join(":")),g}function D(u){a.setTimeout(()=>{throw u},0)}function N(){var u=J;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Te{constructor(){this.h=this.g=null}add(m,g){const T=pe.get();T.set(m,g),this.h?this.h.next=T:this.g=T,this.h=T}}var pe=new b(()=>new Se,u=>u.reset());class Se{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,q=!1,J=new Te,Z=()=>{const u=a.Promise.resolve(void 0);Ne=()=>{u.then(ge)}};var ge=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(g){D(g)}var m=pe;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}q=!1};function O(){this.s=this.s,this.C=this.C}O.prototype.s=!1,O.prototype.ma=function(){this.s||(this.s=!0,this.N())},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,m),a.removeEventListener("test",g,m)}catch{}return u}();function F(u,m){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(M){e:{try{P(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else g=="mouseover"?m=u.fromElement:g=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&F.aa.h.call(this)}}w(F,$);var De={2:"touch",3:"pen",4:"mouse"};F.prototype.h=function(){F.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var At="closure_listenable_"+(1e6*Math.random()|0),lt=0;function zn(u,m,g,T,j){this.listener=u,this.proxy=null,this.src=m,this.type=g,this.capture=!!T,this.ha=j,this.key=++lt,this.da=this.fa=!1}function bl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function El(u){this.src=u,this.g={},this.h=0}El.prototype.add=function(u,m,g,T,j){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var W=Kh(u,m,T,j);return-1<W?(m=u[W],g||(m.fa=!1)):(m=new zn(m,this.src,L,!!T,j),m.fa=g,u.push(m)),m};function qh(u,m){var g=m.type;if(g in u.g){var T=u.g[g],j=Array.prototype.indexOf.call(T,m,void 0),L;(L=0<=j)&&Array.prototype.splice.call(T,j,1),L&&(bl(m),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Kh(u,m,g,T){for(var j=0;j<u.length;++j){var L=u[j];if(!L.da&&L.listener==m&&L.capture==!!g&&L.ha==T)return j}return-1}var Gh="closure_lm_"+(1e6*Math.random()|0),Qh={};function Jg(u,m,g,T,j){if(T&&T.once)return ey(u,m,g,T,j);if(Array.isArray(m)){for(var L=0;L<m.length;L++)Jg(u,m[L],g,T,j);return null}return g=Zh(g),u&&u[At]?u.K(m,g,c(T)?!!T.capture:!!T,j):Zg(u,m,g,!1,T,j)}function Zg(u,m,g,T,j,L){if(!m)throw Error("Invalid event type");var W=c(j)?!!j.capture:!!j,xe=Xh(u);if(xe||(u[Gh]=xe=new El(u)),g=xe.add(m,g,T,W,L),g.proxy)return g;if(T=VS(),g.proxy=T,T.src=u,T.listener=g,u.addEventListener)H||(j=W),j===void 0&&(j=!1),u.addEventListener(m.toString(),T,j);else if(u.attachEvent)u.attachEvent(ny(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function VS(){function u(g){return m.call(u.src,u.listener,g)}const m=FS;return u}function ey(u,m,g,T,j){if(Array.isArray(m)){for(var L=0;L<m.length;L++)ey(u,m[L],g,T,j);return null}return g=Zh(g),u&&u[At]?u.L(m,g,c(T)?!!T.capture:!!T,j):Zg(u,m,g,!0,T,j)}function ty(u,m,g,T,j){if(Array.isArray(m))for(var L=0;L<m.length;L++)ty(u,m[L],g,T,j);else T=c(T)?!!T.capture:!!T,g=Zh(g),u&&u[At]?(u=u.i,m=String(m).toString(),m in u.g&&(L=u.g[m],g=Kh(L,g,T,j),-1<g&&(bl(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete u.g[m],u.h--)))):u&&(u=Xh(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Kh(m,g,T,j)),(g=-1<u?m[u]:null)&&Yh(g))}function Yh(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[At])qh(m.i,u);else{var g=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(g,T,u.capture):m.detachEvent?m.detachEvent(ny(g),T):m.addListener&&m.removeListener&&m.removeListener(T),(g=Xh(m))?(qh(g,u),g.h==0&&(g.src=null,m[Gh]=null)):bl(u)}}}function ny(u){return u in Qh?Qh[u]:Qh[u]="on"+u}function FS(u,m){if(u.da)u=!0;else{m=new F(m,this);var g=u.listener,T=u.ha||u.src;u.fa&&Yh(u),u=g.call(T,m)}return u}function Xh(u){return u=u[Gh],u instanceof El?u:null}var Jh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zh(u){return typeof u=="function"?u:(u[Jh]||(u[Jh]=function(m){return u.handleEvent(m)}),u[Jh])}function gt(){O.call(this),this.i=new El(this),this.M=this,this.F=null}w(gt,O),gt.prototype[At]=!0,gt.prototype.removeEventListener=function(u,m,g,T){ty(this,u,m,g,T)};function Pt(u,m){var g,T=u.F;if(T)for(g=[];T;T=T.F)g.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new $(m,u);else if(m instanceof $)m.target=m.target||u;else{var j=m;m=new $(T,u),A(m,j)}if(j=!0,g)for(var L=g.length-1;0<=L;L--){var W=m.g=g[L];j=Tl(W,T,!0,m)&&j}if(W=m.g=u,j=Tl(W,T,!0,m)&&j,j=Tl(W,T,!1,m)&&j,g)for(L=0;L<g.length;L++)W=m.g=g[L],j=Tl(W,T,!1,m)&&j}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var g=u.g[m],T=0;T<g.length;T++)bl(g[T]);delete u.g[m],u.h--}}this.F=null},gt.prototype.K=function(u,m,g,T){return this.i.add(String(u),m,!1,g,T)},gt.prototype.L=function(u,m,g,T){return this.i.add(String(u),m,!0,g,T)};function Tl(u,m,g,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,L=0;L<m.length;++L){var W=m[L];if(W&&!W.da&&W.capture==g){var xe=W.listener,ct=W.ha||W.src;W.fa&&qh(u.i,W),j=xe.call(ct,T)!==!1&&j}}return j&&!T.defaultPrevented}function ry(u,m,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(u,m||0)}function iy(u){u.g=ry(()=>{u.g=null,u.i&&(u.i=!1,iy(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class US extends O{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:iy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(u){O.call(this),this.h=u,this.g={}}w(xo,O);var sy=[];function oy(u){C(u.g,function(m,g){this.g.hasOwnProperty(g)&&Yh(m)},u),u.g={}}xo.prototype.N=function(){xo.aa.N.call(this),oy(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ed=a.JSON.stringify,BS=a.JSON.parse,zS=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function td(){}td.prototype.h=null;function ay(u){return u.h||(u.h=u.i())}function ly(){}var wo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nd(){$.call(this,"d")}w(nd,$);function rd(){$.call(this,"c")}w(rd,$);var vi={},cy=null;function Sl(){return cy=cy||new gt}vi.La="serverreachability";function uy(u){$.call(this,vi.La,u)}w(uy,$);function bo(u){const m=Sl();Pt(m,new uy(m))}vi.STAT_EVENT="statevent";function hy(u,m){$.call(this,vi.STAT_EVENT,u),this.stat=m}w(hy,$);function Nt(u){const m=Sl();Pt(m,new hy(m,u))}vi.Ma="timingevent";function dy(u,m){$.call(this,vi.Ma,u),this.size=m}w(dy,$);function Eo(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function To(){this.g=!0}To.prototype.xa=function(){this.g=!1};function $S(u,m,g,T,j,L){u.info(function(){if(u.g)if(L)for(var W="",xe=L.split("&"),ct=0;ct<xe.length;ct++){var fe=xe[ct].split("=");if(1<fe.length){var yt=fe[0];fe=fe[1];var vt=yt.split("_");W=2<=vt.length&&vt[1]=="type"?W+(yt+"="+fe+"&"):W+(yt+"=redacted&")}}else W=null;else W=L;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+g+`
`+W})}function HS(u,m,g,T,j,L,W){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+g+`
`+L+" "+W})}function os(u,m,g,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+qS(u,g)+(T?" "+T:"")})}function WS(u,m){u.info(function(){return"TIMEOUT: "+m})}To.prototype.info=function(){};function qS(u,m){if(!u.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var T=g[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var W=1;W<j.length;W++)j[W]=""}}}}return ed(g)}catch{return m}}var Il={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},id;function kl(){}w(kl,td),kl.prototype.g=function(){return new XMLHttpRequest},kl.prototype.i=function(){return{}},id=new kl;function yr(u,m,g,T){this.j=u,this.i=m,this.l=g,this.R=T||1,this.U=new xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new py}function py(){this.i=null,this.g="",this.h=!1}var my={},sd={};function od(u,m,g){u.L=1,u.v=Nl($n(m)),u.m=g,u.P=!0,gy(u,null)}function gy(u,m){u.F=Date.now(),Cl(u),u.A=$n(u.v);var g=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Py(g.i,"t",T),u.C=0,g=u.j.J,u.h=new py,u.g=Gy(u.j,g?m:null,!u.m),0<u.O&&(u.M=new US(p(u.Y,u,u.g),u.O)),m=u.U,g=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(sy[0]=j.toString()),j=sy);for(var L=0;L<j.length;L++){var W=Jg(g,j[L],T||m.handleEvent,!1,m.h||m);if(!W)break;m.g[W.key]=W}m=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),bo(),$S(u.i,u.u,u.A,u.l,u.R,u.m)}yr.prototype.ca=function(u){u=u.target;const m=this.M;m&&Hn(u)==3?m.j():this.Y(u)},yr.prototype.Y=function(u){try{if(u==this.g)e:{const vt=Hn(this.g);var m=this.g.Ba();const cs=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||Ly(this.g)))){this.J||vt!=4||m==7||(m==8||0>=cs?bo(3):bo(2)),ad(this);var g=this.g.Z();this.X=g;t:if(yy(this)){var T=Ly(this.g);u="";var j=T.length,L=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),So(this);var W="";break t}this.h.i=new a.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(L&&m==j-1)});T.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=g==200,HS(this.i,this.u,this.A,this.l,this.R,vt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,ct=this.g;if((xe=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(xe)){var fe=xe;break t}}fe=null}if(g=fe)os(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ld(this,g);else{this.o=!1,this.s=3,Nt(12),_i(this),So(this);break e}}if(this.P){g=!0;let fn;for(;!this.J&&this.C<W.length;)if(fn=KS(this,W),fn==sd){vt==4&&(this.s=4,Nt(14),g=!1),os(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==my){this.s=4,Nt(15),os(this.i,this.l,W,"[Invalid Chunk]"),g=!1;break}else os(this.i,this.l,fn,null),ld(this,fn);if(yy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||W.length!=0||this.h.h||(this.s=1,Nt(16),g=!1),this.o=this.o&&g,!g)os(this.i,this.l,W,"[Invalid Chunked Response]"),_i(this),So(this);else if(0<W.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),pd(yt),yt.M=!0,Nt(11))}}else os(this.i,this.l,W,null),ld(this,W);vt==4&&_i(this),this.o&&!this.J&&(vt==4?Hy(this.j,this):(this.o=!1,Cl(this)))}else uI(this.g),g==400&&0<W.indexOf("Unknown SID")?(this.s=3,Nt(12)):(this.s=0,Nt(13)),_i(this),So(this)}}}catch{}finally{}};function yy(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function KS(u,m){var g=u.C,T=m.indexOf(`
`,g);return T==-1?sd:(g=Number(m.substring(g,T)),isNaN(g)?my:(T+=1,T+g>m.length?sd:(m=m.slice(T,T+g),u.C=T+g,m)))}yr.prototype.cancel=function(){this.J=!0,_i(this)};function Cl(u){u.S=Date.now()+u.I,vy(u,u.I)}function vy(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Eo(p(u.ba,u),m)}function ad(u){u.B&&(a.clearTimeout(u.B),u.B=null)}yr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(WS(this.i,this.A),this.L!=2&&(bo(),Nt(17)),_i(this),this.s=2,So(this)):vy(this,this.S-u)};function So(u){u.j.G==0||u.J||Hy(u.j,u)}function _i(u){ad(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,oy(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ld(u,m){try{var g=u.j;if(g.G!=0&&(g.g==u||cd(g.h,u))){if(!u.K&&cd(g.h,u)&&g.G==3){try{var T=g.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Ll(g),jl(g);else break e;fd(g),Nt(18)}}else g.za=j[1],0<g.za-g.T&&37500>j[2]&&g.F&&g.v==0&&!g.C&&(g.C=Eo(p(g.Za,g),6e3));if(1>=wy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else wi(g,11)}else if((u.K||g.g==u)&&Ll(g),!x(m))for(j=g.Da.g.parse(m),m=0;m<j.length;m++){let fe=j[m];if(g.T=fe[0],fe=fe[1],g.G==2)if(fe[0]=="c"){g.K=fe[1],g.ia=fe[2];const yt=fe[3];yt!=null&&(g.la=yt,g.j.info("VER="+g.la));const vt=fe[4];vt!=null&&(g.Aa=vt,g.j.info("SVER="+g.Aa));const cs=fe[5];cs!=null&&typeof cs=="number"&&0<cs&&(T=1.5*cs,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const fn=u.g;if(fn){const Fl=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fl){var L=T.h;L.g||Fl.indexOf("spdy")==-1&&Fl.indexOf("quic")==-1&&Fl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(ud(L,L.h),L.h=null))}if(T.D){const md=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;md&&(T.ya=md,Ie(T.I,T.D,md))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var W=u;if(T.qa=Ky(T,T.J?T.ia:null,T.W),W.K){by(T.h,W);var xe=W,ct=T.L;ct&&(xe.I=ct),xe.B&&(ad(xe),Cl(xe)),T.g=W}else zy(T);0<g.i.length&&Ol(g)}else fe[0]!="stop"&&fe[0]!="close"||wi(g,7);else g.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?wi(g,7):dd(g):fe[0]!="noop"&&g.l&&g.l.ta(fe),g.v=0)}}bo(4)}catch{}}var GS=class{constructor(u,m){this.g=u,this.map=m}};function _y(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wy(u){return u.h?1:u.g?u.g.size:0}function cd(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ud(u,m){u.g?u.g.add(m):u.h=m}function by(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}_y.prototype.cancel=function(){if(this.i=Ey(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ey(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const g of u.g.values())m=m.concat(g.D);return m}return E(u.i)}function QS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var m=[],g=u.length,T=0;T<g;T++)m.push(u[T]);return m}m=[],g=0;for(T in u)m[g++]=u[T];return m}function YS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var m=[];u=u.length;for(var g=0;g<u;g++)m.push(g);return m}m=[],g=0;for(const T in u)m[g++]=T;return m}}}function Ty(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var g=YS(u),T=QS(u),j=T.length,L=0;L<j;L++)m.call(void 0,T[L],g&&g[L],u)}var Sy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function XS(u,m){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var T=u[g].indexOf("="),j=null;if(0<=T){var L=u[g].substring(0,T);j=u[g].substring(T+1)}else L=u[g];m(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function xi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof xi){this.h=u.h,Al(this,u.j),this.o=u.o,this.g=u.g,Pl(this,u.s),this.l=u.l;var m=u.i,g=new Co;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),Iy(this,g),this.m=u.m}else u&&(m=String(u).match(Sy))?(this.h=!1,Al(this,m[1]||"",!0),this.o=Io(m[2]||""),this.g=Io(m[3]||"",!0),Pl(this,m[4]),this.l=Io(m[5]||"",!0),Iy(this,m[6]||"",!0),this.m=Io(m[7]||"")):(this.h=!1,this.i=new Co(null,this.h))}xi.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ko(m,ky,!0),":");var g=this.g;return(g||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ko(m,ky,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(ko(g,g.charAt(0)=="/"?eI:ZS,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",ko(g,nI)),u.join("")};function $n(u){return new xi(u)}function Al(u,m,g){u.j=g?Io(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Pl(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Iy(u,m,g){m instanceof Co?(u.i=m,rI(u.i,u.h)):(g||(m=ko(m,tI)),u.i=new Co(m,u.h))}function Ie(u,m,g){u.i.set(m,g)}function Nl(u){return Ie(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Io(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ko(u,m,g){return typeof u=="string"?(u=encodeURI(u).replace(m,JS),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function JS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ky=/[#\/\?@]/g,ZS=/[#\?:]/g,eI=/[#\?]/g,tI=/[#\?@]/g,nI=/#/g;function Co(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function vr(u){u.g||(u.g=new Map,u.h=0,u.i&&XS(u.i,function(m,g){u.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Co.prototype,t.add=function(u,m){vr(this),this.i=null,u=as(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(m),this.h+=1,this};function Cy(u,m){vr(u),m=as(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ay(u,m){return vr(u),m=as(u,m),u.g.has(m)}t.forEach=function(u,m){vr(this),this.g.forEach(function(g,T){g.forEach(function(j){u.call(m,j,T,this)},this)},this)},t.na=function(){vr(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let T=0;T<m.length;T++){const j=u[T];for(let L=0;L<j.length;L++)g.push(m[T])}return g},t.V=function(u){vr(this);let m=[];if(typeof u=="string")Ay(this,u)&&(m=m.concat(this.g.get(as(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)m=m.concat(u[g])}return m},t.set=function(u,m){return vr(this),this.i=null,u=as(this,u),Ay(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Py(u,m,g){Cy(u,m),0<g.length&&(u.i=null,u.g.set(as(u,m),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var T=m[g];const L=encodeURIComponent(String(T)),W=this.V(T);for(T=0;T<W.length;T++){var j=L;W[T]!==""&&(j+="="+encodeURIComponent(String(W[T]))),u.push(j)}}return this.i=u.join("&")};function as(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function rI(u,m){m&&!u.j&&(vr(u),u.i=null,u.g.forEach(function(g,T){var j=T.toLowerCase();T!=j&&(Cy(this,T),Py(this,j,g))},u)),u.j=m}function iI(u,m){const g=new To;if(a.Image){const T=new Image;T.onload=y(_r,g,"TestLoadImage: loaded",!0,m,T),T.onerror=y(_r,g,"TestLoadImage: error",!1,m,T),T.onabort=y(_r,g,"TestLoadImage: abort",!1,m,T),T.ontimeout=y(_r,g,"TestLoadImage: timeout",!1,m,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function sI(u,m){const g=new To,T=new AbortController,j=setTimeout(()=>{T.abort(),_r(g,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(L=>{clearTimeout(j),L.ok?_r(g,"TestPingServer: ok",!0,m):_r(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),_r(g,"TestPingServer: error",!1,m)})}function _r(u,m,g,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(g)}catch{}}function oI(){this.g=new zS}function aI(u,m,g){const T=g||"";try{Ty(u,function(j,L){let W=j;c(j)&&(W=ed(j)),m.push(T+L+"="+encodeURIComponent(W))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function Rl(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Rl,td),Rl.prototype.g=function(){return new Dl(this.l,this.j)},Rl.prototype.i=function(u){return function(){return u}}({});function Dl(u,m){gt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Dl,gt),t=Dl.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Po(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Po(this)),this.g&&(this.readyState=3,Po(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ny(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ny(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Ao(this):Po(this),this.readyState==3&&Ny(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ao(this))},t.Qa=function(u){this.g&&(this.response=u,Ao(this))},t.ga=function(){this.g&&Ao(this)};function Ao(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Po(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=m.next();return u.join(`\r
`)};function Po(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Dl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ry(u){let m="";return C(u,function(g,T){m+=T,m+=":",m+=g,m+=`\r
`}),m}function hd(u,m,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Ry(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ie(u,m,g))}function Be(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Be,gt);var lI=/^https?$/i,cI=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():id.g(),this.v=this.o?ay(this.o):ay(id),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(L){Dy(this,L);return}if(u=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)g.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())g.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),j=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cI,m,void 0))||T||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of g)this.g.setRequestHeader(L,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oy(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Dy(this,L)}};function Dy(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,My(u),Ml(u)}function My(u){u.A||(u.A=!0,Pt(u,"complete"),Pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Pt(this,"complete"),Pt(this,"abort"),Ml(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ml(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jy(this):this.bb())},t.bb=function(){jy(this)};function jy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Hn(u)!=4||u.Z()!=2)){if(u.u&&Hn(u)==4)ry(u.Ea,0,u);else if(Pt(u,"readystatechange"),Hn(u)==4){u.h=!1;try{const W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var T;if(T=W===0){var j=String(u.D).match(Sy)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),T=!lI.test(j?j.toLowerCase():"")}g=T}if(g)Pt(u,"complete"),Pt(u,"success");else{u.m=6;try{var L=2<Hn(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",My(u)}}finally{Ml(u)}}}}function Ml(u,m){if(u.g){Oy(u);const g=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Pt(u,"ready");try{g.onreadystatechange=T}catch{}}}function Oy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),BS(m)}};function Ly(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function uI(u){const m={};u=(u.g&&2<=Hn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(x(u[T]))continue;var g=R(u[T]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=m[j]||[];m[j]=L,L.push(g)}_(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(u,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||m}function Vy(u){this.Aa=0,this.i=[],this.j=new To,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=No("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=No("baseRetryDelayMs",5e3,u),this.cb=No("retryDelaySeedMs",1e4,u),this.Wa=No("forwardChannelMaxRetries",2,u),this.wa=No("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _y(u&&u.concurrentRequestLimit),this.Da=new oI,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vy.prototype,t.la=8,t.G=1,t.connect=function(u,m,g,T){Nt(0),this.W=u,this.H=m||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=Ky(this,null,this.W),Ol(this)};function dd(u){if(Fy(u),u.G==3){var m=u.U++,g=$n(u.I);if(Ie(g,"SID",u.K),Ie(g,"RID",m),Ie(g,"TYPE","terminate"),Ro(u,g),m=new yr(u,u.j,m),m.L=2,m.v=Nl($n(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=m.v,g=!0),g||(m.g=Gy(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Cl(m)}qy(u)}function jl(u){u.g&&(pd(u),u.g.cancel(),u.g=null)}function Fy(u){jl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ll(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ol(u){if(!xy(u.h)&&!u.s){u.s=!0;var m=u.Ga;Ne||Z(),q||(Ne(),q=!0),J.add(m,u),u.B=0}}function hI(u,m){return wy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Eo(p(u.Ga,u,m),Wy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new yr(this,this.j,u);let L=this.o;if(this.S&&(L?(L=v(L),A(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=By(this,j,m),g=$n(this.I),Ie(g,"RID",u),Ie(g,"CVER",22),this.D&&Ie(g,"X-HTTP-Session-Id",this.D),Ro(this,g),L&&(this.O?m="headers="+encodeURIComponent(String(Ry(L)))+"&"+m:this.m&&hd(g,this.m,L)),ud(this.h,j),this.Ua&&Ie(g,"TYPE","init"),this.P?(Ie(g,"$req",m),Ie(g,"SID","null"),j.T=!0,od(j,g,null)):od(j,g,m),this.G=2}}else this.G==3&&(u?Uy(this,u):this.i.length==0||xy(this.h)||Uy(this))};function Uy(u,m){var g;m?g=m.l:g=u.U++;const T=$n(u.I);Ie(T,"SID",u.K),Ie(T,"RID",g),Ie(T,"AID",u.T),Ro(u,T),u.m&&u.o&&hd(T,u.m,u.o),g=new yr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),m&&(u.i=m.D.concat(u.i)),m=By(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ud(u.h,g),od(g,T,m)}function Ro(u,m){u.H&&C(u.H,function(g,T){Ie(m,T,g)}),u.l&&Ty({},function(g,T){Ie(m,T,g)})}function By(u,m,g){g=Math.min(u.i.length,g);var T=u.l?p(u.l.Na,u.l,u):null;e:{var j=u.i;let L=-1;for(;;){const W=["count="+g];L==-1?0<g?(L=j[0].g,W.push("ofs="+L)):L=0:W.push("ofs="+L);let xe=!0;for(let ct=0;ct<g;ct++){let fe=j[ct].g;const yt=j[ct].map;if(fe-=L,0>fe)L=Math.max(0,j[ct].g-100),xe=!1;else try{aI(yt,W,"req"+fe+"_")}catch{T&&T(yt)}}if(xe){T=W.join("&");break e}}}return u=u.i.splice(0,g),m.D=u,T}function zy(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;Ne||Z(),q||(Ne(),q=!0),J.add(m,u),u.v=0}}function fd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Eo(p(u.Fa,u),Wy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,$y(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Eo(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Nt(10),jl(this),$y(this))};function pd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function $y(u){u.g=new yr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=$n(u.qa);Ie(m,"RID","rpc"),Ie(m,"SID",u.K),Ie(m,"AID",u.T),Ie(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ie(m,"TO",u.ja),Ie(m,"TYPE","xmlhttp"),Ro(u,m),u.m&&u.o&&hd(m,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Nl($n(m)),g.m=null,g.P=!0,gy(g,u)}t.Za=function(){this.C!=null&&(this.C=null,jl(this),fd(this),Nt(19))};function Ll(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Hy(u,m){var g=null;if(u.g==m){Ll(u),pd(u),u.g=null;var T=2}else if(cd(u.h,m))g=m.D,by(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;T=Sl(),Pt(T,new dy(T,g)),Ol(u)}else zy(u);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&hI(u,m)||T==2&&fd(u)))switch(g&&0<g.length&&(m=u.h,m.i=m.i.concat(g)),j){case 1:wi(u,5);break;case 4:wi(u,10);break;case 3:wi(u,6);break;default:wi(u,2)}}}function Wy(u,m){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*m}function wi(u,m){if(u.j.info("Error code "+m),m==2){var g=p(u.fb,u),T=u.Xa;const j=!T;T=new xi(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Al(T,"https"),Nl(T),j?iI(T.toString(),g):sI(T.toString(),g)}else Nt(2);u.G=0,u.l&&u.l.sa(m),qy(u),Fy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function qy(u){if(u.G=0,u.ka=[],u.l){const m=Ey(u.h);(m.length!=0||u.i.length!=0)&&(S(u.ka,m),S(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function Ky(u,m,g){var T=g instanceof xi?$n(g):new xi(g);if(T.g!="")m&&(T.g=m+"."+T.g),Pl(T,T.s);else{var j=a.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var L=new xi(null);T&&Al(L,T),m&&(L.g=m),j&&Pl(L,j),g&&(L.l=g),T=L}return g=u.D,m=u.ya,g&&m&&Ie(T,g,m),Ie(T,"VER",u.la),Ro(u,T),T}function Gy(u,m,g){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Be(new Rl({eb:g})):new Be(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qy(){}t=Qy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Vl(){}Vl.prototype.g=function(u,m){return new qt(u,m)};function qt(u,m){gt.call(this),this.g=new Vy(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!x(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!x(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ls(this)}w(qt,gt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){dd(this.g)},qt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=ed(u),u=g);m.i.push(new GS(m.Ya++,u)),m.G==3&&Ol(m)},qt.prototype.N=function(){this.g.l=null,delete this.j,dd(this.g),delete this.g,qt.aa.N.call(this)};function Yy(u){nd.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const g in m){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}w(Yy,nd);function Xy(){rd.call(this),this.status=1}w(Xy,rd);function ls(u){this.g=u}w(ls,Qy),ls.prototype.ua=function(){Pt(this.g,"a")},ls.prototype.ta=function(u){Pt(this.g,new Yy(u))},ls.prototype.sa=function(u){Pt(this.g,new Xy)},ls.prototype.ra=function(){Pt(this.g,"b")},Vl.prototype.createWebChannel=Vl.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,Yb=function(){return new Vl},Qb=function(){return Sl()},Gb=vi,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Il.NO_ERROR=0,Il.TIMEOUT=8,Il.HTTP_ERROR=6,Vc=Il,fy.COMPLETE="complete",Kb=fy,ly.EventType=wo,wo.OPEN="a",wo.CLOSE="b",wo.ERROR="c",wo.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Yo=ly,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,qb=Be}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const Pv="@firebase/firestore",Nv="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi=new $m("@firebase/firestore");function ds(){return Gi.logLevel}function K(t,...e){if(Gi.logLevel<=le.DEBUG){const n=e.map(qm);Gi.debug(`Firestore (${po}): ${t}`,...n)}}function cr(t,...e){if(Gi.logLevel<=le.ERROR){const n=e.map(qm);Gi.error(`Firestore (${po}): ${t}`,...n)}}function ii(t,...e){if(Gi.logLevel<=le.WARN){const n=e.map(qm);Gi.warn(`Firestore (${po}): ${t}`,...n)}}function qm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Xb(t,r,n)}function Xb(t,e,n){let r=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cr(r),new Error(r)}function ye(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Xb(e,i,r)}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class O2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class L2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class V2{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new Jb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class F2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class U2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new F2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Rv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Rv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=z2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function mp(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return oe(r,i);{const s=Zb(),o=$2(s.encode(Dv(t,n)),s.encode(Dv(e,n)));return o!==0?o:oe(r,i)}}n+=r>65535?2:1}return oe(t.length,e.length)}function Dv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function $2(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function Js(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="__name__";class Cn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Cn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Cn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return oe(e.length,n.length)}static compareSegments(e,n){const r=Cn.isNumericId(e),i=Cn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Cn.extractNumericId(e).compare(Cn.extractNumericId(n)):mp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class Ce extends Cn{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const H2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends Cn{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return H2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mv}static keyField(){return new dt([Mv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Q(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Q(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ce.fromString(e))}static fromName(e){return new X(Ce.fromString(e).popFirst(5))}static empty(){return new X(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e,n){if(!n)throw new Q(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function W2(t,e,n,r){if(e===!0&&r===!0)throw new Q(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jv(t){if(!X.isDocumentKey(t))throw new Q(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ov(t){if(X.isDocumentKey(t))throw new Q(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gm(t);throw new Q(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t,e){const n={typeString:t};return e&&(n.value=e),n}function dl(t,e){if(!tE(t))throw new Q(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Q(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=-62135596800,Vv=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Vv);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lv)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vv}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dl(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:Ge("string",Ae._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new Ae(0,0))}static max(){return new re(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=-1;function q2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new si(i,X.empty(),e)}function K2(t){return new si(t.readTime,t.key,Wa)}class si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new si(re.min(),X.empty(),Wa)}static max(){return new si(re.max(),X.empty(),Wa)}}function G2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==Q2)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function X2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Eh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=-1;function Th(t){return t==null}function Au(t){return t===0&&1/t==-1/0}function J2(t){return typeof t=="number"&&Number.isInteger(t)&&!Au(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="";function Z2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fv(e)),e=eN(t.get(n),e);return Fv(e)}function eN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case nE:n+="";break;default:n+=s}}return n}function Fv(t){return t+nE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ht.RED,this.left=i??ht.EMPTY,this.right=s??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ht(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bv(this.data.getIterator())}getIteratorFrom(e){return new Bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new rt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iE("Invalid base64 string: "+s):s}}(e);return new mt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new mt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mt.EMPTY_BYTE_STRING=new mt("");const tN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=tN.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ai(t){return typeof t=="string"?mt.fromBase64String(t):mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="server_timestamp",oE="__type__",aE="__previous_value__",lE="__local_write_time__";function Ym(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[oE])===null||n===void 0?void 0:n.stringValue)===sE}function Sh(t){const e=t.mapValue.fields[aE];return Ym(e)?Sh(e):e}function qa(t){const e=oi(t.mapValue.fields[lE].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r,i,s,o,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Pu="(default)";class Ka{constructor(e,n){this.projectId=e,this.database=n||Pu}static empty(){return new Ka("","")}get isDefaultDatabase(){return this.database===Pu}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="__type__",uE="__max__",sc={mapValue:{fields:{__type__:{stringValue:uE}}}},hE="__vector__",Nu="value";function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ym(t)?4:iN(t)?9007199254740991:rN(t)?10:11:ee(28295,{value:t})}function Un(t,e){if(t===e)return!0;const n=li(t);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qa(t).isEqual(qa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=oi(i.timestampValue),a=oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ai(i.bytesValue).isEqual(ai(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return He(i.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return He(i.integerValue)===He(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=He(i.doubleValue),a=He(s.doubleValue);return o===a?Au(o)===Au(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Js(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Uv(o)!==Uv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Un(o[l],a[l])))return!1;return!0}(t,e);default:return ee(52216,{left:t})}}function Ga(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Zs(t,e){if(t===e)return 0;const n=li(t),r=li(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=He(s.integerValue||s.doubleValue),l=He(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return zv(t.timestampValue,e.timestampValue);case 4:return zv(qa(t),qa(e));case 5:return mp(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ai(s),l=ai(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=oe(a[c],l[c]);if(h!==0)return h}return oe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=oe(He(s.latitude),He(o.latitude));return a!==0?a:oe(He(s.longitude),He(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $v(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const f=s.fields||{},p=o.fields||{},y=(a=f[Nu])===null||a===void 0?void 0:a.arrayValue,w=(l=p[Nu])===null||l===void 0?void 0:l.arrayValue,E=oe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:$v(y,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===sc.mapValue&&o===sc.mapValue)return 0;if(s===sc.mapValue)return 1;if(o===sc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=mp(l[f],h[f]);if(p!==0)return p;const y=Zs(a[l[f]],c[h[f]]);if(y!==0)return y}return oe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ee(23264,{le:n})}}function zv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=oi(t),r=oi(e),i=oe(n.seconds,r.seconds);return i!==0?i:oe(n.nanos,r.nanos)}function $v(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Zs(n[i],r[i]);if(s)return s}return oe(n.length,r.length)}function eo(t){return gp(t)}function gp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=gp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${gp(n.fields[o])}`;return i+"}"}(t.mapValue):ee(61005,{value:t})}function Fc(t){switch(li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sh(t);return e?16+Fc(e):16;case 5:return 2*t.stringValue.length;case 6:return ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Fc(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return mi(r.fields,(s,o)=>{i+=s.length+Fc(o)}),i}(t.mapValue);default:throw ee(13486,{value:t})}}function yp(t){return!!t&&"integerValue"in t}function Xm(t){return!!t&&"arrayValue"in t}function Hv(t){return!!t&&"nullValue"in t}function Wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uc(t){return!!t&&"mapValue"in t}function rN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cE])===null||n===void 0?void 0:n.stringValue)===hE}function ma(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return mi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ma(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ma(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ma(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ma(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Uc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Uc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){mi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ft(ma(this.value))}}function dE(t){const e=[];return mi(t.fields,(n,r)=>{const i=new dt([n]);if(Uc(r)){const s=dE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,re.min(),re.min(),re.min(),Ft.empty(),0)}static newFoundDocument(e,n,r,i){return new St(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new St(e,2,n,re.min(),re.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,re.min(),re.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.position=e,this.inclusive=n}}function qv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Zs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n="asc"){this.field=e,this.dir=n}}function sN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{}class Ze extends fE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aN(e,n,r):n==="array-contains"?new uN(e,r):n==="in"?new hN(e,r):n==="not-in"?new dN(e,r):n==="array-contains-any"?new fN(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lN(e,r):new cN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zs(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison(Zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends fE{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Bn(e,n)}matches(e){return pE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function pE(t){return t.op==="and"}function mE(t){return oN(t)&&pE(t)}function oN(t){for(const e of t.filters)if(e instanceof Bn)return!1;return!0}function vp(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(mE(t))return t.filters.map(e=>vp(e)).join(",");{const e=t.filters.map(n=>vp(n)).join(",");return`${t.op}(${e})`}}function gE(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)}(t,e):t instanceof Bn?function(r,i){return i instanceof Bn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gE(o,i.filters[a]),!0):!1}(t,e):void ee(19439)}function yE(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map(yE).join(" ,")+"}"}(t):"Filter"}class aN extends Ze{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class lN extends Ze{constructor(e,n){super(e,"in",n),this.keys=vE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cN extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=vE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class uN extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xm(n)&&Ga(n.arrayValue,this.value)}}class hN extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ga(this.value.arrayValue,n)}}class dN extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ga(this.value.arrayValue,n)}}class fN extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ga(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function Gv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new pN(t,e,n,r,i,s,o)}function Jm(t){const e=ie(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>vp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.Pe=n}return e.Pe}function Zm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kv(t.startAt,e.startAt)&&Kv(t.endAt,e.endAt)}function _p(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function mN(t,e,n,r,i,s,o,a){return new Ih(t,e,n,r,i,s,o,a)}function eg(t){return new Ih(t)}function Qv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gN(t){return t.collectionGroup!==null}function ga(t){const e=ie(t);if(e.Te===null){e.Te=[];const n=new Set;for(const s of e.explicitOrderBy)e.Te.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Du(s,r))}),n.has(dt.keyField().canonicalString())||e.Te.push(new Du(dt.keyField(),r))}return e.Te}function Mn(t){const e=ie(t);return e.Ie||(e.Ie=yN(e,ga(t))),e.Ie}function yN(t,e){if(t.limitType==="F")return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Du(i.field,s)});const n=t.endAt?new Ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ru(t.startAt.position,t.startAt.inclusive):null;return Gv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xp(t,e,n){return new Ih(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kh(t,e){return Zm(Mn(t),Mn(e))&&t.limitType===e.limitType}function _E(t){return`${Jm(Mn(t))}|lt:${t.limitType}`}function fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yE(i)).join(", ")}]`),Th(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>eo(i)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function Ch(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):X.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ga(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=qv(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ga(r),i)||r.endAt&&!function(o,a,l){const c=qv(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ga(r),i))}(t,e)}function vN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xE(t){return(e,n)=>{let r=!1;for(const i of ga(t)){const s=_N(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _N(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Zs(l,c):ee(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new Fe(X.comparator);function hr(){return xN}const wE=new Fe(X.comparator);function Xo(...t){let e=wE;for(const n of t)e=e.insert(n.key,n);return e}function bE(t){let e=wE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ji(){return ya()}function EE(){return ya()}function ya(){return new rs(t=>t.toString(),(t,e)=>t.isEqual(e))}const wN=new Fe(X.comparator),bN=new rt(X.comparator);function ce(...t){let e=bN;for(const n of t)e=e.add(n);return e}const EN=new rt(oe);function TN(){return EN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Au(e)?"-0":e}}function TE(t){return{integerValue:""+t}}function SN(t,e){return J2(e)?TE(e):tg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(){this._=void 0}}function IN(t,e,n){return t instanceof Qa?function(i,s){const o={fields:{[oE]:{stringValue:sE},[lE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ym(s)&&(s=Sh(s)),s&&(o.fields[aE]=s),{mapValue:o}}(n,e):t instanceof Ya?IE(t,e):t instanceof Xa?kE(t,e):function(i,s){const o=SE(i,s),a=Yv(o)+Yv(i.Ee);return yp(o)&&yp(i.Ee)?TE(a):tg(i.serializer,a)}(t,e)}function kN(t,e,n){return t instanceof Ya?IE(t,e):t instanceof Xa?kE(t,e):n}function SE(t,e){return t instanceof Mu?function(r){return yp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Qa extends Ah{}class Ya extends Ah{constructor(e){super(),this.elements=e}}function IE(t,e){const n=CE(e);for(const r of t.elements)n.some(i=>Un(i,r))||n.push(r);return{arrayValue:{values:n}}}class Xa extends Ah{constructor(e){super(),this.elements=e}}function kE(t,e){let n=CE(e);for(const r of t.elements)n=n.filter(i=>!Un(i,r));return{arrayValue:{values:n}}}class Mu extends Ah{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Yv(t){return He(t.integerValue||t.doubleValue)}function CE(t){return Xm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n){this.field=e,this.transform=n}}function AN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ya&&i instanceof Ya||r instanceof Xa&&i instanceof Xa?Js(r.elements,i.elements,Un):r instanceof Mu&&i instanceof Mu?Un(r.Ee,i.Ee):r instanceof Qa&&i instanceof Qa}(t.transform,e.transform)}class PN{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ph{}function AE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ng(t.key,bn.none()):new fl(t.key,t.data,bn.none());{const n=t.data,r=Ft.empty();let i=new rt(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new gi(t.key,r,new Yt(i.toArray()),bn.none())}}function NN(t,e,n){t instanceof fl?function(i,s,o){const a=i.value.clone(),l=Jv(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof gi?function(i,s,o){if(!Bc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Jv(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(PE(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function va(t,e,n,r){return t instanceof fl?function(s,o,a,l){if(!Bc(s.precondition,o))return a;const c=s.value.clone(),h=Zv(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof gi?function(s,o,a,l){if(!Bc(s.precondition,o))return a;const c=Zv(s.fieldTransforms,l,o),h=o.data;return h.setAll(PE(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Bc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function RN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=SE(r.transform,i||null);s!=null&&(n===null&&(n=Ft.empty()),n.set(r.field,s))}return n||null}function Xv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Js(r,i,(s,o)=>AN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fl extends Ph{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class gi extends Ph{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Jv(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,kN(o,a,n[i]))}return r}function Zv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,IN(s,o,e))}return r}class ng extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DN extends Ph{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&NN(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=AE(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(n,r)=>Xv(n,r))&&Js(this.baseMutations,e.baseMutations,(n,r)=>Xv(n,r))}}class rg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return wN}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new rg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,he;function LN(t){switch(t){case B.OK:return ee(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function NE(t){if(t===void 0)return cr("GRPC error has no .code"),B.UNKNOWN;switch(t){case qe.OK:return B.OK;case qe.CANCELLED:return B.CANCELLED;case qe.UNKNOWN:return B.UNKNOWN;case qe.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case qe.INTERNAL:return B.INTERNAL;case qe.UNAVAILABLE:return B.UNAVAILABLE;case qe.UNAUTHENTICATED:return B.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case qe.NOT_FOUND:return B.NOT_FOUND;case qe.ALREADY_EXISTS:return B.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return B.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case qe.ABORTED:return B.ABORTED;case qe.OUT_OF_RANGE:return B.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return B.UNIMPLEMENTED;case qe.DATA_LOSS:return B.DATA_LOSS;default:return ee(39323,{code:t})}}(he=qe||(qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new Jr([4294967295,4294967295],0);function e_(t){const e=Zb().encode(t),n=new Wb;return n.update(e),new Uint8Array(n.digest())}function t_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jr([n,r],0),new Jr([i,s],0)]}class ig{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jo(`Invalid padding: ${n}`);if(r<0)throw new Jo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Jr.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Jr.fromNumber(r)));return i.compare(VN)===1&&(i=new Jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=e_(e),[r,i]=t_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ig(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;const n=e_(e),[r,i]=t_(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,pl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nh(re.min(),i,new Fe(oe),hr(),ce())}}class pl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new pl(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class RE{constructor(e,n){this.targetId=e,this.De=n}}class DE{constructor(e,n,r=mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class n_{constructor(){this.ve=0,this.Ce=r_(),this.Fe=mt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ce(),n=ce(),r=ce();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:s})}}),new pl(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=r_()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class FN{constructor(e){this.We=e,this.Ge=new Map,this.ze=hr(),this.je=oc(),this.Je=oc(),this.He=new Fe(oe)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const s=i.target;if(_p(s))if(r===0){const o=new X(s.path);this.Xe(n,o,St.newNoDocument(o,re.min()))}else ye(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(e),l=a?this.ut(a,e,o):1;if(l!==0){this.rt(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,c)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ai(r).toUint8Array()}catch(l){if(l instanceof iE)return ii("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ig(o,i,s)}catch(l){return ii(l instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,s,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((s,o)=>{const a=this.st(o);if(a){if(s.current&&_p(a.target)){const l=new X(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,St.newNoDocument(l,e))}s.Ne&&(n.set(o,s.Le()),s.ke())}});let r=ce();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.st(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));const i=new Nh(e,n,this.He,this.ze,r);return this.ze=hr(),this.je=oc(),this.Je=oc(),this.He=new Fe(oe),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new n_,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new rt(oe),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new rt(oe),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new n_),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function oc(){return new Fe(X.comparator)}function r_(){return new Fe(X.comparator)}const UN=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),BN=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),zN=(()=>({and:"AND",or:"OR"}))();class $N{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function wp(t,e){return t.useProto3Json||Th(e)?e:{value:e}}function ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ME(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HN(t,e){return ju(t,e.toTimestamp())}function jn(t){return ye(!!t,49232),re.fromTimestamp(function(n){const r=oi(n);return new Ae(r.seconds,r.nanos)}(t))}function sg(t,e){return bp(t,e).canonicalString()}function bp(t,e){const n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function jE(t){const e=Ce.fromString(t);return ye(UE(e),10190,{key:e.toString()}),e}function Ep(t,e){return sg(t.databaseId,e.path)}function Qd(t,e){const n=jE(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(LE(n))}function OE(t,e){return sg(t.databaseId,e)}function WN(t){const e=jE(t);return e.length===4?Ce.emptyPath():LE(e)}function Tp(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LE(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function i_(t,e,n){return{name:Ep(t,e),fields:n.value.mapValue.fields}}function qN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ye(h===void 0||typeof h=="string",58123),mt.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?B.UNKNOWN:NE(c.code);return new Q(h,c.message||"")}(o);n=new DE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qd(t,r.document.name),s=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):re.min(),a=new Ft({mapValue:{fields:r.document.fields}}),l=St.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new zc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qd(t,r.document),s=r.readTime?jn(r.readTime):re.min(),o=St.newNoDocument(i,s),a=r.removedTargetIds||[];n=new zc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qd(t,r.document),s=r.removedTargetIds||[];n=new zc([],s,i,null)}else{if(!("filter"in e))return ee(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ON(i,s),a=r.targetId;n=new RE(a,o)}}return n}function KN(t,e){let n;if(e instanceof fl)n={update:i_(t,e.key,e.value)};else if(e instanceof ng)n={delete:Ep(t,e.key)};else if(e instanceof gi)n={update:i_(t,e.key,e.data),updateMask:nR(e.fieldMask)};else{if(!(e instanceof DN))return ee(16599,{Rt:e.type});n={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Qa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ya)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Mu)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw ee(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HN(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ee(27497)}(t,e.precondition)),n}function GN(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?jn(i.updateTime):jn(s);return o.isEqual(re.min())&&(o=jn(s)),new PN(o,i.transformResults||[])}(n,e))):[]}function QN(t,e){return{documents:[OE(t,e.path)]}}function YN(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OE(t,i);const s=function(c){if(c.length!==0)return FE(Bn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ps(p.field),direction:ZN(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=wp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{Vt:n,parent:i}}function XN(t){let e=WN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ye(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=VE(f);return p instanceof Bn&&mE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new Du(ms(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Th(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,y=f.values||[];return new Ru(y,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,y=f.values||[];return new Ru(y,p)}(n.endAt)),mN(e,i,o,s,a,"F",l,c)}function JN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ms(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ms(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ms(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ms(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(ms(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(r=>VE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}}(n.compositeFilter.op))}(t):ee(30097,{filter:t})}function ZN(t){return UN[t]}function eR(t){return BN[t]}function tR(t){return zN[t]}function ps(t){return{fieldPath:t.canonicalString()}}function ms(t){return dt.fromServerFormat(t.fieldPath)}function FE(t){return t instanceof Ze?function(n){if(n.op==="=="){if(Wv(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NAN"}};if(Hv(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wv(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NAN"}};if(Hv(n.value))return{unaryFilter:{field:ps(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ps(n.field),op:eR(n.op),value:n.value}}}(t):t instanceof Bn?function(n){const r=n.getFilters().map(i=>FE(i));return r.length===1?r[0]:{compositeFilter:{op:tR(n.op),filters:r}}}(t):ee(54877,{filter:t})}function nR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r,i,s=re.min(),o=re.min(),a=mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.gt=e}}function iR(t){const e=XN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.Dn=new oR}addToCollectionParentIndex(e,n){return this.Dn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(si.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class oR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BE=41943040;class Lt{static withCacheSize(e){return new Lt(e,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lt.DEFAULT_COLLECTION_PERCENTILE=10,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lt.DEFAULT=new Lt(BE,Lt.DEFAULT_COLLECTION_PERCENTILE,Lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lt.DISABLED=new Lt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new to(0)}static ur(){return new to(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="LruGarbageCollector",aR=1048576;function a_([t,e],[n,r]){const i=oe(t,n);return i===0?oe(e,r):i}class lR{constructor(e){this.Tr=e,this.buffer=new rt(a_),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();a_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class cR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){K(o_,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){go(n)?K(o_,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.Rr(3e5)})}}class uR{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Eh.ue);const r=new lR(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(s_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s_):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),ds()<=le.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function hR(t,e){return new uR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.changes=new rs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&va(r.mutation,i,Yt.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Xo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=hr();const o=ya(),a=function(){return ya()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof gi)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),va(h.mutation,c,h.mutation.getFieldMask(),Ae.now())):o.set(c.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new fR(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ya();let i=new Fe((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Yt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||ce()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=EE();h.forEach(p=>{if(!s.has(p)){const y=AE(n.get(p),r.get(p));y!==null&&f.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(ji());let a=Wa,l=s;return o.next(c=>U.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:bE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=Xo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Xo();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const c=function(f,p){return new Ih(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,St.newInvalidDocument(h)))});let a=Xo();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&va(h.mutation,c,Yt.empty(),Ae.now()),Ch(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return U.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:iR(i.bundledQuery),readTime:jn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.overlays=new Fe(X.comparator),this.kr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ji();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.wt(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=ji(),s=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=ji(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=ji(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return U.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jN(n,r));let s=this.kr.get(n);s===void 0&&(s=ce(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.sessionToken=mt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(){this.qr=new rt(it.Qr),this.$r=new rt(it.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new it(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new it(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new X(new Ce([])),r=new it(n,e),i=new it(n,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new X(new Ce([])),r=new it(n,e),i=new it(n,e+1);let s=ce();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new it(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return X.comparator(e.key,n.key)||oe(e.Hr,n.Hr)}static Ur(e,n){return oe(e.Hr,n.Hr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new rt(it.Qr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MN(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new it(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Qm:this.er-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{const a=this.Zr(o.Hr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(oe);return n.forEach(i=>{const s=new it(i,0),o=new it(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),U.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;X.isDocumentKey(s)||(s=s.child(""));const o=new it(new X(s),0);let a=new rt(oe);return this.Yr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Hr)),!0)},o),U.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ye(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return U.forEach(n.mutations,i=>{const s=new it(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new it(n,0),i=this.Yr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.ni=e,this.docs=function(){return new Fe(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():St.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hr();const o=n.path,a=new X(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||G2(K2(h),r)<=0||(i.has(h.key)||Ch(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ee(9500)}ri(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xR(this)}getSize(e){return U.resolve(this.size)}}class xR extends dR{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.persistence=e,this.ii=new rs(n=>Jm(n),Zm),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.si=0,this.oi=new og,this.targetCount=0,this._i=to.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),U.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new to(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.hr(n),U.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.ai={},this.overlays={},this.ui=new Eh(0),this.ci=!1,this.ci=!0,this.li=new yR,this.referenceDelegate=e(this),this.hi=new wR(this),this.indexManager=new sR,this.remoteDocumentCache=function(i){return new _R(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new rR(n),this.Ti=new mR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new vR(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const i=new bR(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return U.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class bR extends Y2{constructor(e){super(),this.currentSequenceNumber=e}}class ag{constructor(e){this.persistence=e,this.Ai=new og,this.Ri=null}static Vi(e){return new ag(e)}get mi(){if(this.Ri)return this.Ri;throw ee(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.mi,r=>{const i=X.fromPath(r);return this.fi(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return U.or([()=>U.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ou{constructor(e,n){this.persistence=e,this.gi=new rs(r=>Z2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=hR(this,n)}static Vi(e,n){return new Ou(e,n)}Ii(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return U.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,re.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),U.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fc(e.data.value)),n}Sr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new lg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return vP()?8:X2(kt())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ps(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new ER;return this.ws(e,n,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,n,o,a.size)})}).next(()=>s.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ds()<=le.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(ds()<=le.DEBUG&&K("QueryEngine","Query:",fs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ds()<=le.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):U.resolve())}ps(e,n){if(Qv(n))return U.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xp(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.bs(n,a);return this.Ds(n,c,o,l.readTime)?this.ps(e,xp(n,null,"F")):this.vs(e,c,n,l)}))})))}ys(e,n,r,i){return Qv(n)||i.isEqual(re.min())?U.resolve(null):this.gs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?U.resolve(null):(ds()<=le.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fs(n)),this.vs(e,o,n,q2(i,Wa)).next(a=>a))})}bs(e,n){let r=new rt(xE(e));return n.forEach((i,s)=>{Ch(e,s)&&(r=r.add(s))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,n,r){return ds()<=le.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",fs(n)),this.gs.getDocumentsMatchingQuery(e,n,si.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="LocalStore",SR=3e8;class IR{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Fe(oe),this.Ms=new rs(s=>Jm(s),Zm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function kR(t,e,n,r){return new IR(t,e,n,r)}async function $E(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ce();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Bs:c,removedBatchIds:o,addedBatchIds:a}))})})}function CR(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let y=U.resolve();return p.forEach(w=>{y=y.next(()=>h.getEntry(l,w)).next(E=>{const S=c.docVersions.get(w);ye(S!==null,48541),E.version.compareTo(S)<0&&(f.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function HE(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function AR(t,e){const n=ie(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.hi.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.hi.addMatchingKeys(s,h.addedDocuments,f)));let y=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(mt.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(E,S,b){return E.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=SR?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,y,h)&&a.push(n.hi.updateTargetData(s,y))});let l=hr(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(PR(s,o,e.documentUpdates).next(h=>{l=h.Ls,c=h.ks})),!r.isEqual(re.min())){const h=n.hi.getLastRemoteSnapshotVersion(s).next(f=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Fs=i,s))}function PR(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=hr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K(cg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ls:o,ks:i}})}function NR(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Qm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function RR(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.hi.allocateTargetId(r).next(o=>(i=new Or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Sp(t,e,n){const r=ie(t),i=r.Fs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!go(o))throw o;K(cg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function l_(t,e,n){const r=ie(t);let i=re.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ie(l),p=f.Ms.get(h);return p!==void 0?U.resolve(f.Fs.get(p)):f.hi.getTargetData(c,h)}(r,o,Mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:ce())).next(a=>(DR(r,vN(e),a),{documents:a,qs:s})))}function DR(t,e,n){let r=t.xs.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.xs.set(e,r)}class c_{constructor(){this.activeTargetIds=TN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MR{constructor(){this.Fo=new c_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new c_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="ConnectivityMonitor";class h_{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){K(u_,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){K(u_,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function Ip(){return ac===null?ac=function(){return 268435456+Math.round(2147483648*Math.random())}():ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="RestConnection",OR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LR{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Pu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=Ip(),a=this.Go(e,n.toUriEncodedString());K(Yd,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:c}=new URL(a),h=ho(c);return this.jo(e,a,l,r,h).then(f=>(K(Yd,`Received RPC '${e}' ${o}: `,f),f),f=>{throw ii(Yd,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+po}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,n){const r=OR[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class FR extends LR{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,s){const o=Ip();return new Promise((a,l)=>{const c=new qb;c.setWithCredentials(!0),c.listenOnce(Kb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vc.NO_ERROR:const f=c.getResponseJson();K(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Vc.TIMEOUT:K(wt,`RPC '${e}' ${o} timed out`),l(new Q(B.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const p=c.getStatus();if(K(wt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y==null?void 0:y.error;if(w&&w.status&&w.message){const E=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(x)>=0?x:B.UNKNOWN}(w.status);l(new Q(E,w.message))}else l(new Q(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Q(B.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{c_:e,streamId:o,l_:c.getLastErrorCode(),h_:c.getLastError()})}}finally{K(wt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);K(wt,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",h,r,15)})}P_(e,n,r){const i=Ip(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Yb(),a=Qb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");K(wt,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);this.T_(f);let p=!1,y=!1;const w=new VR({Ho:S=>{y?K(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(p||(K(wt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),K(wt,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},Yo:()=>f.close()}),E=(S,b,x)=>{S.listen(b,I=>{try{x(I)}catch(P){setTimeout(()=>{throw P},0)}})};return E(f,Yo.EventType.OPEN,()=>{y||(K(wt,`RPC '${e}' stream ${i} transport opened.`),w.s_())}),E(f,Yo.EventType.CLOSE,()=>{y||(y=!0,K(wt,`RPC '${e}' stream ${i} transport closed`),w.__(),this.I_(f))}),E(f,Yo.EventType.ERROR,S=>{y||(y=!0,ii(wt,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),w.__(new Q(B.UNAVAILABLE,"The operation could not be completed")))}),E(f,Yo.EventType.MESSAGE,S=>{var b;if(!y){const x=S.data[0];ye(!!x,16349);const I=x,P=(I==null?void 0:I.error)||((b=I[0])===null||b===void 0?void 0:b.error);if(P){K(wt,`RPC '${e}' stream ${i} received error:`,P);const M=P.status;let C=function(k){const A=qe[k];if(A!==void 0)return NE(A)}(M),_=P.message;C===void 0&&(C=B.INTERNAL,_="Unknown error status: "+M+" with message "+P.message),y=!0,w.__(new Q(C,_)),f.close()}else K(wt,`RPC '${e}' stream ${i} received:`,x),w.a_(x)}}),E(a,Gb.STAT_EVENT,S=>{S.stat===pp.PROXY?K(wt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===pp.NOPROXY&&K(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t){return new $N(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="PersistentStream";class qE{constructor(e,n,r,i,s,o,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new WE(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new Q(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return K(d_,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(K(d_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UR extends qE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=qN(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?jn(o.readTime):re.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Tp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=_p(l)?{documents:QN(s,l)}:{query:YN(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ME(s,o.resumeToken);const c=wp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=ju(s,o.snapshotVersion.toTimestamp());const c=wp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=JN(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Tp(this.serializer),n.removeTarget=e,this.k_(n)}}class BR extends qE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=GN(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Tp(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KN(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{}class $R extends zR{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,bp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(B.UNKNOWN,s.toString())})}Jo(e,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,bp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(B.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class HR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(cr(n),this._a=!1):K("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="RemoteStore";class WR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{is(this)&&(K(Qi,"Restarting streams for network reachability change."),await async function(l){const c=ie(l);c.Ia.add(4),await ml(c),c.Aa.set("Unknown"),c.Ia.delete(4),await Dh(c)}(this))})}),this.Aa=new HR(r,i)}}async function Dh(t){if(is(t))for(const e of t.da)await e(!0)}async function ml(t){for(const e of t.da)await e(!1)}function KE(t,e){const n=ie(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),fg(n)?dg(n):yo(n).x_()&&hg(n,e))}function ug(t,e){const n=ie(t),r=yo(n);n.Ta.delete(e),r.x_()&&GE(n,e),n.Ta.size===0&&(r.x_()?r.B_():is(n)&&n.Aa.set("Unknown"))}function hg(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yo(t).H_(e)}function GE(t,e){t.Ra.$e(e),yo(t).Y_(e)}function dg(t){t.Ra=new FN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),yo(t).start(),t.Aa.aa()}function fg(t){return is(t)&&!yo(t).M_()&&t.Ta.size>0}function is(t){return ie(t).Ia.size===0}function QE(t){t.Ra=void 0}async function qR(t){t.Aa.set("Online")}async function KR(t){t.Ta.forEach((e,n)=>{hg(t,e)})}async function GR(t,e){QE(t),fg(t)?(t.Aa.la(e),dg(t)):t.Aa.set("Unknown")}async function QR(t,e,n){if(t.Aa.set("Online"),e instanceof DE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){K(Qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lu(t,r)}else if(e instanceof zc?t.Ra.Ye(e):e instanceof RE?t.Ra.it(e):t.Ra.et(e),!n.isEqual(re.min()))try{const r=await HE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ta.get(c);h&&s.Ta.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.Ta.get(l);if(!h)return;s.Ta.set(l,h.withResumeToken(mt.EMPTY_BYTE_STRING,h.snapshotVersion)),GE(s,l);const f=new Or(h.target,l,c,h.sequenceNumber);hg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){K(Qi,"Failed to raise snapshot:",r),await Lu(t,r)}}async function Lu(t,e,n){if(!go(e))throw e;t.Ia.add(1),await ml(t),t.Aa.set("Offline"),n||(n=()=>HE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(Qi,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Dh(t)})}function YE(t,e){return e().catch(n=>Lu(t,n,e))}async function Mh(t){const e=ie(t),n=ci(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Qm;for(;YR(e);)try{const i=await NR(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,XR(e,i)}catch(i){await Lu(e,i)}XE(e)&&JE(e)}function YR(t){return is(t)&&t.Pa.length<10}function XR(t,e){t.Pa.push(e);const n=ci(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function XE(t){return is(t)&&!ci(t).M_()&&t.Pa.length>0}function JE(t){ci(t).start()}async function JR(t){ci(t).na()}async function ZR(t){const e=ci(t);for(const n of t.Pa)e.X_(n.mutations)}async function eD(t,e,n){const r=t.Pa.shift(),i=rg.from(r,e,n);await YE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Mh(t)}async function tD(t,e){e&&ci(t).Z_&&await async function(r,i){if(function(o){return LN(o)&&o!==B.ABORTED}(i.code)){const s=r.Pa.shift();ci(r).N_(),await YE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Mh(r)}}(t,e),XE(t)&&JE(t)}async function f_(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),K(Qi,"RemoteStore received new credentials");const r=is(n);n.Ia.add(3),await ml(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Dh(n)}async function nD(t,e){const n=ie(t);e?(n.Ia.delete(2),await Dh(n)):e||(n.Ia.add(2),await ml(n),n.Aa.set("Unknown"))}function yo(t){return t.Va||(t.Va=function(n,r,i){const s=ie(n);return s.ia(),new UR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:qR.bind(null,t),e_:KR.bind(null,t),n_:GR.bind(null,t),J_:QR.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),fg(t)?dg(t):t.Aa.set("Unknown")):(await t.Va.stop(),QE(t))})),t.Va}function ci(t){return t.ma||(t.ma=function(n,r,i){const s=ie(n);return s.ia(),new BR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:JR.bind(null,t),n_:tD.bind(null,t),ea:ZR.bind(null,t),ta:eD.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Mh(t)):(await t.ma.stop(),t.Pa.length>0&&(K(Qi,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new pg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mg(t,e){if(cr("AsyncQueue",`${e}: ${t}`),go(t))return new Q(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{static emptySet(e){return new Os(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Xo(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Os;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.fa=new Fe(X.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class no{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new no(e,n,Os.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class iD{constructor(){this.queries=m_(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=ie(n),s=i.queries;i.queries=m_(),s.forEach((o,a)=>{for(const l of a.wa)l.onError(r)})})(this,new Q(B.ABORTED,"Firestore shutting down"))}}function m_(){return new rs(t=>_E(t),kh)}async function ZE(t,e){const n=ie(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new rD,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=mg(o,`Initialization of query '${fs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.wa.push(e),e.va(n.onlineState),s.ya&&e.Ca(s.ya)&&gg(n)}async function eT(t,e){const n=ie(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sD(t,e){const n=ie(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&gg(n)}function oD(t,e,n){const r=ie(t),i=r.queries.get(e);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(e)}function gg(t){t.Da.forEach(e=>{e.next()})}var kp,g_;(g_=kp||(kp={})).Fa="default",g_.Cache="cache";class tT{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new no(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.key=e}}class rT{constructor(e){this.key=e}}class aD{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ce(),this.mutatedKeys=ce(),this.Xa=xE(e),this.eu=new Os(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new p_,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),y=Ch(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),E=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let S=!1;p&&y?p.data.isEqual(y.data)?w!==E&&(r.track({type:3,doc:y}),S=!0):this.iu(p,y)||(r.track({type:2,doc:y}),S=!0,(l&&this.Xa(y,l)>0||c&&this.Xa(y,c)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),S=!0):p&&!y&&(r.track({type:1,doc:p}),S=!0,(l||c)&&(a=!0)),S&&(y?(o=o.add(y),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const o=e.ru.pa();o.sort((h,f)=>function(y,w){const E=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{At:S})}};return E(y)-E(w)}(h.type,f.type)||this.Xa(h.doc,f.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,c=l!==this.Ya;return this.Ya=l,o.length!==0||c?{snapshot:new no(this.query,e.eu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new p_,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ce(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new rT(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new nT(r))}),n}uu(e){this.Ha=e.qs,this.Za=ce();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return no.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const yg="SyncEngine";class lD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cD{constructor(e){this.key=e,this.lu=!1}}class uD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new rs(a=>_E(a),kh),this.Tu=new Map,this.Iu=new Set,this.du=new Fe(X.comparator),this.Eu=new Map,this.Au=new og,this.Ru={},this.Vu=new Map,this.mu=to.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function hD(t,e,n=!0){const r=cT(t);let i;const s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await iT(r,e,n,!0),i}async function dD(t,e){const n=cT(t);await iT(n,e,!0,!1)}async function iT(t,e,n,r){const i=await RR(t.localStore,Mn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await fD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&KE(t.remoteStore,i),a}async function fD(t,e,n,r,i){t.gu=(f,p,y)=>async function(E,S,b,x){let I=S.view.nu(b);I.Ds&&(I=await l_(E.localStore,S.query,!1).then(({documents:_})=>S.view.nu(_,I)));const P=x&&x.targetChanges.get(S.targetId),M=x&&x.targetMismatches.get(S.targetId)!=null,C=S.view.applyChanges(I,E.isPrimaryClient,P,M);return v_(E,S.targetId,C._u),C.snapshot}(t,f,p,y);const s=await l_(t.localStore,e,!0),o=new aD(e,s.qs),a=o.nu(s.documents),l=pl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);v_(t,n,c._u);const h=new lD(e,n,o);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),c.snapshot}async function pD(t,e,n){const r=ie(t),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!kh(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ug(r.remoteStore,i.targetId),Cp(r,i.targetId)}).catch(mo)):(Cp(r,i.targetId),await Sp(r.localStore,i.targetId,!0))}async function mD(t,e){const n=ie(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ug(n.remoteStore,r.targetId))}async function gD(t,e,n){const r=ED(t);try{const i=await function(o,a){const l=ie(o),c=Ae.now(),h=a.reduce((y,w)=>y.add(w.key),ce());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=hr(),E=ce();return l.Os.getEntries(y,h).next(S=>{w=S,w.forEach((b,x)=>{x.isValidDocument()||(E=E.add(b))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,w)).next(S=>{f=S;const b=[];for(const x of a){const I=RN(x,f.get(x.key).overlayedDocument);I!=null&&b.push(new gi(x.key,I,dE(I.value.mapValue),bn.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,b,a)}).next(S=>{p=S;const b=S.applyToLocalDocumentSet(f,E);return l.documentOverlayCache.saveOverlays(y,S.batchId,b)})}).then(()=>({batchId:p.batchId,changes:bE(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ru[o.currentUser.toKey()];c||(c=new Fe(oe)),c=c.insert(a,l),o.Ru[o.currentUser.toKey()]=c}(r,i.batchId,n),await gl(r,i.changes),await Mh(r.remoteStore)}catch(i){const s=mg(i,"Failed to persist write");n.reject(s)}}async function sT(t,e){const n=ie(t);try{const r=await AR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Eu.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ye(o.lu,14607):i.removedDocuments.size>0&&(ye(o.lu,42227),o.lu=!1))}),await gl(n,r,e)}catch(r){await mo(r)}}function y_(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ie(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.wa)p.va(a)&&(c=!0)}),c&&gg(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yD(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Fe(X.comparator);o=o.insert(s,St.newNoDocument(s,re.min()));const a=ce().add(s),l=new Nh(re.min(),new Map,new Fe(oe),o,a);await sT(r,l),r.du=r.du.remove(s),r.Eu.delete(e),vg(r)}else await Sp(r.localStore,e,!1).then(()=>Cp(r,e,n)).catch(mo)}async function vD(t,e){const n=ie(t),r=e.batch.batchId;try{const i=await CR(n.localStore,e);aT(n,r,null),oT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gl(n,i)}catch(i){await mo(i)}}async function _D(t,e,n){const r=ie(t);try{const i=await function(o,a){const l=ie(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(ye(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);aT(r,e,n),oT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gl(r,i)}catch(i){await mo(i)}}function oT(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function aT(t,e,n){const r=ie(t);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Cp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||lT(t,r)})}function lT(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(ug(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),vg(t))}function v_(t,e,n){for(const r of n)r instanceof nT?(t.Au.addReference(r.key,e),xD(t,r)):r instanceof rT?(K(yg,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||lT(t,r.key)):ee(19791,{yu:r})}function xD(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(K(yg,"New document in limbo: "+n),t.Iu.add(r),vg(t))}function vg(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new X(Ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new cD(n)),t.du=t.du.insert(n,r),KE(t.remoteStore,new Or(Mn(eg(n.path)),r,"TargetPurposeLimboResolution",Eh.ue))}}async function gl(t,e,n){const r=ie(t),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{o.push(r.gu(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=lg.Es(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.hu.J_(i),await async function(l,c){const h=ie(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(c,p=>U.forEach(p.Is,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>U.forEach(p.ds,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!go(f))throw f;K(cg,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const y=h.Fs.get(p),w=y.snapshotVersion,E=y.withLastLimboFreeSnapshotVersion(w);h.Fs=h.Fs.insert(p,E)}}}(r.localStore,s))}async function wD(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){K(yg,"User change. New user:",e.toKey());const r=await $E(n.localStore,e);n.currentUser=e,function(s,o){s.Vu.forEach(a=>{a.forEach(l=>{l.reject(new Q(B.CANCELLED,o))})}),s.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gl(n,r.Bs)}}function bD(t,e){const n=ie(t),r=n.Eu.get(e);if(r&&r.lu)return ce().add(r.key);{let i=ce();const s=n.Tu.get(e);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function cT(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yD.bind(null,e),e.hu.J_=sD.bind(null,e.eventManager),e.hu.pu=oD.bind(null,e.eventManager),e}function ED(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_D.bind(null,e),e}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return kR(this.persistence,new TR,e.initialUser,this.serializer)}Du(e){return new zE(ag.Vi,this.serializer)}bu(e){return new MR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class TD extends Vu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ye(this.persistence.referenceDelegate instanceof Ou,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cR(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Lt.withCacheSize(this.cacheSizeBytes):Lt.DEFAULT;return new zE(r=>Ou.Vi(r,n),this.serializer)}}class Ap{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>y_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wD.bind(null,this.syncEngine),await nD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iD}()}createDatastore(e){const n=Rh(e.databaseInfo.databaseId),r=function(s){return new FR(s)}(e.databaseInfo);return function(s,o,a,l){return new $R(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new WR(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>y_(this.syncEngine,n,0),function(){return h_.C()?new h_:new jR}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new uD(i,s,o,a,l,c);return h&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ie(i);K(Qi,"RemoteStore shutting down."),s.Ia.add(5),await ml(s),s.Ea.shutdown(),s.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="FirestoreClient";class SD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{K(ui,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(ui,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jd(t,e){t.asyncQueue.verifyOperationInProgress(),K(ui,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $E(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ii("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{K("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ii("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function __(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ID(t);K(ui,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>f_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>f_(e.remoteStore,i)),t._onlineComponents=e}async function ID(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(ui,"Using user provided OfflineComponentProvider");try{await Jd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await Jd(t,new Vu)}}else K(ui,"Using default OfflineComponentProvider"),await Jd(t,new TD(void 0));return t._offlineComponents}async function hT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(ui,"Using user provided OnlineComponentProvider"),await __(t,t._uninitializedComponentsProvider._online)):(K(ui,"Using default OnlineComponentProvider"),await __(t,new Ap))),t._onlineComponents}function kD(t){return hT(t).then(e=>e.syncEngine)}async function dT(t){const e=await hT(t),n=e.eventManager;return n.onListen=hD.bind(null,e.syncEngine),n.onUnlisten=pD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mD.bind(null,e.syncEngine),n}function CD(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new uT({next:p=>{h.Ou(),o.enqueueAndForget(()=>eT(s,f));const y=p.docs.has(a);!y&&p.fromCache?c.reject(new Q(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&l&&l.source==="server"?c.reject(new Q(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new tT(eg(a.path),h,{includeMetadataChanges:!0,ka:!0});return ZE(s,f)}(await dT(t),t.asyncQueue,e,n,r)),r.promise}function AD(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new uT({next:p=>{h.Ou(),o.enqueueAndForget(()=>eT(s,f)),p.fromCache&&l.source==="server"?c.reject(new Q(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new tT(a,h,{includeMetadataChanges:!0,ka:!0});return ZE(s,f)}(await dT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firestore.googleapis.com",w_=!0;class b_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pT,this.ssl=w_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:w_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aR)throw new Q(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}W2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O2;switch(r.type){case"firstParty":return new U2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=x_.get(n);r&&(K("ComponentProvider","Removing Datastore"),x_.delete(n),r.terminate())}(this),Promise.resolve()}}function PD(t,e,n,r={}){var i;t=ur(t,jh);const s=ho(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(Lb(`https://${l}`),Vb("Firestore",!0)),o.host!==pT&&o.host!==l&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!qi(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Et.MOCK_USER;else{h=cP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Q(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Et(p)}t._authCredentials=new L2(new Jb(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oh(this.firestore,e,this._query)}}class tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(dl(n,tt._jsonSchema))return new tt(e,r||null,new X(Ce.fromString(n.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:Ge("string",tt._jsonSchemaVersion),referencePath:Ge("string")};class Zr extends Oh{constructor(e,n,r){super(e,n,eg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new X(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function E_(t,e,...n){if(t=Wt(t),eE("collection","path",e),t instanceof jh){const r=Ce.fromString(e,...n);return Ov(r),new Zr(t,null,r)}{if(!(t instanceof tt||t instanceof Zr))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Ov(r),new Zr(t.firestore,null,r)}}function $c(t,e,...n){if(t=Wt(t),arguments.length===1&&(e=Km.newId()),eE("doc","path",e),t instanceof jh){const r=Ce.fromString(e,...n);return jv(r),new tt(t,null,new X(r))}{if(!(t instanceof tt||t instanceof Zr))throw new Q(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return jv(r),new tt(t.firestore,t instanceof Zr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="AsyncQueue";class S_{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new WE(this,"async_queue_retry"),this.oc=()=>{const r=Xd();r&&K(T_,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Xd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Xd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new rr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!go(e))throw e;K(T_,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,cr("INTERNAL UNHANDLED ERROR: ",I_(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=pg.createAndSchedule(this,e,n,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&ee(47125,{hc:I_(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function I_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class vo extends jh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new S_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S_(e),this._firestoreClient=void 0,await e}}}function ND(t,e){const n=typeof t=="object"?t:zb(),r=typeof t=="string"?t:e||Pu,i=Wm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=aP("firestore");s&&PD(i,...s)}return i}function _g(t){if(t._terminated)throw new Q(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RD(t),t._firestoreClient}function RD(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new nN(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fT(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new SD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this._byteString=e}static fromBase64String(e){try{return new on(mt.fromBase64String(e))}catch(n){throw new Q(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new on(mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:on._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dl(e,on._jsonSchema))return on.fromBase64String(e.bytes)}}on._jsonSchemaVersion="firestore/bytes/1.0",on._jsonSchema={type:Ge("string",on._jsonSchemaVersion),bytes:Ge("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:On._jsonSchemaVersion}}static fromJSON(e){if(dl(e,On._jsonSchema))return new On(e.latitude,e.longitude)}}On._jsonSchemaVersion="firestore/geoPoint/1.0",On._jsonSchema={type:Ge("string",On._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dl(e,Ln._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ln(e.vectorValues);throw new Q(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ln._jsonSchemaVersion="firestore/vectorValue/1.0",Ln._jsonSchema={type:Ge("string",Ln._jsonSchemaVersion),vectorValues:Ge("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=/^__.*__$/;class MD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new fl(e,this.data,n,this.fieldTransforms)}}class mT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ec:t})}}class xg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fu(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(gT(this.Ec)&&DD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class jD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rh(e)}Dc(e,n,r,i=!1){return new xg({Ec:e,methodName:n,bc:r,path:dt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yT(t){const e=t._freezeSettings(),n=Rh(t._databaseId);return new jD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function OD(t,e,n,r,i,s={}){const o=t.Dc(s.merge||s.mergeFields?2:0,e,n,i);bg("Data must be an object, but it was:",o,r);const a=vT(r,o);let l,c;if(s.merge)l=new Yt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Pp(e,f,n);if(!o.contains(p))throw new Q(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);xT(h,p)||h.push(p)}l=new Yt(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new MD(new Ft(a),l,c)}class Fh extends Vh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fh}}class wg extends Vh{_toFieldTransform(e){return new CN(e.path,new Qa)}isEqual(e){return e instanceof wg}}function LD(t,e,n,r){const i=t.Dc(1,e,n);bg("Data must be an object, but it was:",i,r);const s=[],o=Ft.empty();mi(r,(l,c)=>{const h=Eg(e,l,n);c=Wt(c);const f=i.gc(h);if(c instanceof Fh)s.push(h);else{const p=Uh(c,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Yt(s);return new mT(o,a,i.fieldTransforms)}function VD(t,e,n,r,i,s){const o=t.Dc(1,e,n),a=[Pp(e,r,n)],l=[i];if(s.length%2!=0)throw new Q(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Pp(e,s[p])),l.push(s[p+1]);const c=[],h=Ft.empty();for(let p=a.length-1;p>=0;--p)if(!xT(c,a[p])){const y=a[p];let w=l[p];w=Wt(w);const E=o.gc(y);if(w instanceof Fh)c.push(y);else{const S=Uh(w,E);S!=null&&(c.push(y),h.set(y,S))}}const f=new Yt(c);return new mT(h,f,o.fieldTransforms)}function Uh(t,e){if(_T(t=Wt(t)))return bg("Unsupported field value:",e,t),vT(t,e);if(t instanceof Vh)return function(r,i){if(!gT(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Uh(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ae.fromDate(r);return{timestampValue:ju(i.serializer,s)}}if(r instanceof Ae){const s=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ju(i.serializer,s)}}if(r instanceof On)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof on)return{bytesValue:ME(i.serializer,r._byteString)};if(r instanceof tt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ln)return function(o,a){return{mapValue:{fields:{[cE]:{stringValue:hE},[Nu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.wc("VectorValues must only contain numeric values.");return tg(a.serializer,c)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Gm(r)}`)}(t,e)}function vT(t,e){const n={};return rE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mi(t,(r,i)=>{const s=Uh(i,e.Vc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function _T(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof On||t instanceof on||t instanceof tt||t instanceof Vh||t instanceof Ln)}function bg(t,e,n){if(!_T(n)||!tE(n)){const r=Gm(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Pp(t,e,n){if((e=Wt(e))instanceof Lh)return e._internalPath;if(typeof e=="string")return Eg(t,e);throw Fu("Field path arguments must be of type string or ",t,!1,void 0,n)}const FD=new RegExp("[~\\*/\\[\\]]");function Eg(t,e,n){if(e.search(FD)>=0)throw Fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lh(...e.split("."))._internalPath}catch{throw Fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Q(B.INVALID_ARGUMENT,a+t+l)}function xT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UD extends wT{data(){return super.data()}}function bT(t,e){return typeof e=="string"?Eg(t,e):e instanceof Lh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zD{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return mi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Nu].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>He(o.doubleValue));return new Ln(s)}convertGeoPoint(e){return new On(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qa(e));default:return null}}convertTimestamp(e){const n=oi(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);ye(UE(r),9688,{name:e});const i=new Ka(r.get(1),r.get(3)),s=new X(r.popFirst(5));return i.isEqual(n)||cr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vi extends wT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Vi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vi._jsonSchema={type:Ge("string",Vi._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class Hc extends Vi{data(e={}){return super.data(e)}}class Ls{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hc(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Hc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Hc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Zo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:HD(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ls._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HD(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t){t=ur(t,tt);const e=ur(t.firestore,vo);return CD(_g(e),t._key).then(n=>YD(e,t,n))}Ls._jsonSchemaVersion="firestore/querySnapshot/1.0",Ls._jsonSchema={type:Ge("string",Ls._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};class ET extends zD{constructor(e){super(),this.firestore=e}convertBytes(e){return new on(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function qD(t){t=ur(t,Oh);const e=ur(t.firestore,vo),n=_g(e),r=new ET(e);return BD(t._query),AD(n,t._query).then(i=>new Ls(e,r,t,i))}function KD(t,e,n,...r){t=ur(t,tt);const i=ur(t.firestore,vo),s=yT(i);let o;return o=typeof(e=Wt(e))=="string"||e instanceof Lh?VD(s,"updateDoc",t._key,e,n,r):LD(s,"updateDoc",t._key,e),Tg(i,[o.toMutation(t._key,bn.exists(!0))])}function GD(t){return Tg(ur(t.firestore,vo),[new ng(t._key,bn.none())])}function QD(t,e){const n=ur(t.firestore,vo),r=$c(t),i=$D(t.converter,e);return Tg(n,[OD(yT(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bn.exists(!1))]).then(()=>r)}function Tg(t,e){return function(r,i){const s=new rr;return r.asyncQueue.enqueueAndForget(async()=>gD(await kD(r),i,s)),s.promise}(_g(t),e)}function YD(t,e,n){const r=n.docs.get(e._key),i=new ET(t);return new Vi(t,i,e._key,r,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}function Zd(){return new wg("serverTimestamp")}(function(e,n=!0){(function(i){po=i})(fo),Xs(new Ki("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new vo(new V2(r.getProvider("auth-internal")),new B2(o,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xr(Pv,Nv,e),Xr(Pv,Nv,"esm2017")})();var XD="firebase",JD="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xr(XD,JD,"app");function Sg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function TT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZD=TT,ST=new ul("auth","Firebase",TT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new $m("@firebase/auth");function eM(t,...e){Uu.logLevel<=le.WARN&&Uu.warn(`Auth (${fo}): ${t}`,...e)}function Wc(t,...e){Uu.logLevel<=le.ERROR&&Uu.error(`Auth (${fo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,...e){throw Ig(t,...e)}function Vn(t,...e){return Ig(t,...e)}function IT(t,e,n){const r=Object.assign(Object.assign({},ZD()),{[e]:n});return new ul("auth","Firebase",r).create(e,{appName:t.name})}function Fi(t){return IT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ig(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ST.create(t,...e)}function te(t,e,...n){if(!t)throw Ig(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wc(e),new Error(e)}function fr(t,e){t||Zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tM(){return k_()==="http:"||k_()==="https:"}function k_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tM()||mP()||"connection"in navigator)?navigator.onLine:!0}function rM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,fr(n>e,"Short delay should be less than long delay!"),this.isMobile=dP()||gP()}get(){return nM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e){fr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oM=new yl(3e4,6e4);function Cg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _o(t,e,n,r,i={}){return CT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=hl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return pP()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ho(t.emulatorConfig.host)&&(c.credentials="include"),kT.fetch()(await AT(t,t.config.apiHost,n,a),c)})}async function CT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},iM),e);try{const i=new lM(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw lc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw lc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw IT(t,h,c);dr(t,h)}}catch(i){if(i instanceof gr)throw i;dr(t,"network-request-failed",{message:String(i)})}}async function aM(t,e,n,r,i={}){const s=await _o(t,e,n,r,i);return"mfaPendingCredential"in s&&dr(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function AT(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?kg(t.config,i):`${t.config.apiScheme}://${i}`;return sM.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class lM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vn(this.auth,"network-request-failed")),oM.get())})}}function lc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(t,e){return _o(t,"POST","/v1/accounts:delete",e)}async function Bu(t,e){return _o(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uM(t,e=!1){const n=Wt(t),r=await n.getIdToken(e),i=Ag(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:_a(ef(i.auth_time)),issuedAtTime:_a(ef(i.iat)),expirationTime:_a(ef(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ef(t){return Number(t)*1e3}function Ag(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Db(n);return i?JSON.parse(i):(Wc("Failed to decode base64 JWT payload"),null)}catch(i){return Wc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function C_(t){const e=Ag(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gr&&hM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=_a(this.lastLoginAt),this.creationTime=_a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ja(t,Bu(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?PT(s.providerUserInfo):[],a=pM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Rp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function fM(t){const e=Wt(t);await zu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pM(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PT(t){return t.map(e=>{var{providerId:n}=e,r=Sg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e){const n=await CT(t,{},async()=>{const r=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await AT(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ho(t.emulatorConfig.host)&&(l.credentials="include"),kT.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function gM(t,e){return _o(t,"POST","/v2/accounts:revokeToken",Cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):C_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=C_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await mM(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vs;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vs,this.toJSON())}_performRefresh(){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _n{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Sg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Rp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uM(this,e)}reload(){return fM(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await zu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pn(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await Ja(this,cM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,b=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:I,emailVerified:P,isAnonymous:M,providerData:C,stsTokenManager:_}=n;te(I&&_,e,"internal-error");const v=Vs.fromJSON(this.name,_);te(typeof I=="string",e,"internal-error"),wr(f,e.name),wr(p,e.name),te(typeof P=="boolean",e,"internal-error"),te(typeof M=="boolean",e,"internal-error"),wr(y,e.name),wr(w,e.name),wr(E,e.name),wr(S,e.name),wr(b,e.name),wr(x,e.name);const k=new _n({uid:I,auth:e,email:p,emailVerified:P,displayName:f,isAnonymous:M,photoURL:w,phoneNumber:y,tenantId:E,stsTokenManager:v,createdAt:b,lastLoginAt:x});return C&&Array.isArray(C)&&(k.providerData=C.map(A=>Object.assign({},A))),S&&(k._redirectEventId=S),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vs;i.updateFromServerResponse(n);const s=new _n({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?PT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vs;a.updateFromIdToken(r);const l=new _n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Rp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=new Map;function er(t){fr(t instanceof Function,"Expected a class definition");let e=A_.get(t);return e?(fr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}NT.type="NONE";const P_=NT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t,e,n){return`firebase:${t}:${e}:${n}`}class Fs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=qc(this.userKey,i.apiKey,s),this.fullPersistenceKey=qc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bu(this.auth,{idToken:e}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,e):null}return _n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fs(er(P_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||er(P_);const o=qc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){let f;if(typeof h=="string"){const p=await Bu(e,{idToken:h}).catch(()=>{});if(!p)break;f=await _n._fromGetAccountInfoResponse(e,p,h)}else f=_n._fromJSON(e,h);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Fs(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Fs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LT(e))return"Blackberry";if(VT(e))return"Webos";if(DT(e))return"Safari";if((e.includes("chrome/")||MT(e))&&!e.includes("edge/"))return"Chrome";if(OT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RT(t=kt()){return/firefox\//i.test(t)}function DT(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MT(t=kt()){return/crios\//i.test(t)}function jT(t=kt()){return/iemobile/i.test(t)}function OT(t=kt()){return/android/i.test(t)}function LT(t=kt()){return/blackberry/i.test(t)}function VT(t=kt()){return/webos/i.test(t)}function Pg(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yM(t=kt()){var e;return Pg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vM(){return yP()&&document.documentMode===10}function FT(t=kt()){return Pg(t)||OT(t)||VT(t)||LT(t)||/windows phone/i.test(t)||jT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t,e=[]){let n;switch(t){case"Browser":n=N_(kt());break;case"Worker":n=`${N_(kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e={}){return _o(t,"GET","/v2/passwordPolicy",Cg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=6;class bM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R_(this),this.idTokenSubscription=new R_(this),this.beforeStateQueue=new _M(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ST,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Fs.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bu(this,{idToken:e}),r=await _n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pn(this.app))return Promise.reject(Fi(this));const n=e?Wt(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pn(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pn(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xM(this),n=new bM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ul("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await gM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&er(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Fs.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Pn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&eM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ng(t){return Wt(t)}class R_{constructor(e){this.auth=e,this.observer=null,this.addObserver=SP(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TM(t){Rg=t}function SM(t){return Rg.loadJS(t)}function IM(){return Rg.gapiScript}function kM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(t,e){const n=Wm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(qi(s,e??{}))return i;dr(i,"already-initialized")}return n.initialize({options:e})}function AM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PM(t,e,n){const r=Ng(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=BT(e),{host:o,port:a}=NM(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(qi(c,r.config.emulator)&&qi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ho(o)?(Lb(`${s}//${o}${l}`),Vb("Auth",!0)):i||RM()}function BT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NM(t){const e=BT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:D_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:D_(o)}}}function D_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t,e){return aM(t,"POST","/v1/accounts:signInWithIdp",Cg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="http://localhost";class Yi extends zT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Sg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Yi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Us(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Us(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Us(e,n)}buildRequest(){const e={requestUri:DM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends $T{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends vl{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yi._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends vl{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends vl{constructor(){super("twitter.com")}static credential(e,n){return Yi._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await _n._fromIdTokenResponse(e,r,i),o=M_(r);return new ro({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=M_(r);return new ro({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function M_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends gr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$u.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $u(e,n,r,i)}}function HT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$u._fromErrorAndOperation(t,s,e,r):s})}async function MM(t,e,n=!1){const r=await Ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ro._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(t,e,n=!1){const{auth:r}=t;if(Pn(r.app))return Promise.reject(Fi(r));const i="reauthenticate";try{const s=await Ja(t,HT(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=Ag(s.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),ro._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&dr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OM(t,e,n=!1){if(Pn(t.app))return Promise.reject(Fi(t));const r="signIn",i=await HT(t,r,e),s=await ro._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function LM(t,e,n,r){return Wt(t).onIdTokenChanged(e,n,r)}function VM(t,e,n){return Wt(t).beforeAuthStateChanged(e,n)}const Hu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hu,"1"),this.storage.removeItem(Hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=1e3,UM=10;class qT extends WT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=FT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);vM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,UM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qT.type="LOCAL";const BM=qT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT extends WT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}KT.type="SESSION";const GT=KT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Bh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await zM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Dg("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return window}function HM(t){Fn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){return typeof Fn().WorkerGlobalScope<"u"&&typeof Fn().importScripts=="function"}async function WM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function KM(){return QT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="firebaseLocalStorageDb",GM=1,Wu="firebaseLocalStorage",XT="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zh(t,e){return t.transaction([Wu],e?"readwrite":"readonly").objectStore(Wu)}function QM(){const t=indexedDB.deleteDatabase(YT);return new _l(t).toPromise()}function Dp(){const t=indexedDB.open(YT,GM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Wu,{keyPath:XT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Wu)?e(r):(r.close(),await QM(),e(await Dp()))})})}async function j_(t,e,n){const r=zh(t,!0).put({[XT]:e,value:n});return new _l(r).toPromise()}async function YM(t,e){const n=zh(t,!1).get(e),r=await new _l(n).toPromise();return r===void 0?null:r.value}function O_(t,e){const n=zh(t,!0).delete(e);return new _l(n).toPromise()}const XM=800,JM=3;class JT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bh._getInstance(KM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WM(),!this.activeServiceWorker)return;this.sender=new $M(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dp();return await j_(e,Hu,"1"),await O_(e,Hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>j_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>YM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>O_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zh(i,!1).getAll();return new _l(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JT.type="LOCAL";const ZM=JT;new yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e){return e?er(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends zT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Us(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Us(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Us(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tj(t){return OM(t.auth,new Mg(t),t.bypassAuthState)}function nj(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),jM(n,new Mg(t),t.bypassAuthState)}async function rj(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),MM(n,new Mg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tj;case"linkViaPopup":case"linkViaRedirect":return rj;case"reauthViaPopup":case"reauthViaRedirect":return nj;default:dr(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new yl(2e3,1e4);class Cs extends ZT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Cs.currentPopupAction&&Cs.currentPopupAction.cancel(),Cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=Dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ij.get())};e()}}Cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="pendingRedirect",Kc=new Map;class oj extends ZT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Kc.get(this.auth._key());if(!e){try{const r=await aj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Kc.set(this.auth._key(),e)}return this.bypassAuthState||Kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aj(t,e){const n=uj(e),r=cj(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function lj(t,e){Kc.set(t._key(),e)}function cj(t){return er(t._redirectPersistence)}function uj(t){return qc(sj,t.config.apiKey,t.name)}async function hj(t,e,n=!1){if(Pn(t.app))return Promise.reject(Fi(t));const r=Ng(t),i=ej(r,e),o=await new oj(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=10*60*1e3;class fj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!eS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dj&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(e))}saveEventToCache(e){this.cachedEventUids.add(L_(e)),this.lastProcessedEventTime=Date.now()}}function L_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function eS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e={}){return _o(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yj=/^https?/;async function vj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mj(t);for(const n of e)try{if(_j(n))return}catch{}dr(t,"unauthorized-domain")}function _j(t){const e=Np(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!yj.test(n))return!1;if(gj.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new yl(3e4,6e4);function V_(){const t=Fn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wj(t){return new Promise((e,n)=>{var r,i,s;function o(){V_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V_(),n(Vn(t,"network-request-failed"))},timeout:xj.get()})}if(!((i=(r=Fn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Fn().gapi)===null||s===void 0)&&s.load)o();else{const a=kM("iframefcb");return Fn()[a]=()=>{gapi.load?o():n(Vn(t,"network-request-failed"))},SM(`${IM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Gc=null,e})}let Gc=null;function bj(t){return Gc=Gc||wj(t),Gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=new yl(5e3,15e3),Tj="__/auth/iframe",Sj="emulator/auth/iframe",Ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cj(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kg(e,Sj):`https://${t.config.authDomain}/${Tj}`,r={apiKey:e.apiKey,appName:t.name,v:fo},i=kj.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hl(r).slice(1)}`}async function Aj(t){const e=await bj(t),n=Fn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:Cj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ij,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Vn(t,"network-request-failed"),a=Fn().setTimeout(()=>{s(o)},Ej.get());function l(){Fn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nj=500,Rj=600,Dj="_blank",Mj="http://localhost";class F_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jj(t,e,n,r=Nj,i=Rj){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Pj),{width:r.toString(),height:i.toString(),top:s,left:o}),c=kt().toLowerCase();n&&(a=MT(c)?Dj:n),RT(c)&&(e=e||Mj,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[y,w])=>`${p}${y}=${w},`,"");if(yM(c)&&a!=="_self")return Oj(e||"",a),new F_(null);const f=window.open(e||"",a,h);te(f,t,"popup-blocked");try{f.focus()}catch{}return new F_(f)}function Oj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="__/auth/handler",Vj="emulator/auth/handler",Fj=encodeURIComponent("fac");async function U_(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fo,eventId:i};if(e instanceof $T){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",TP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof vl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${Fj}=${encodeURIComponent(l)}`:"";return`${Uj(t)}?${hl(a).slice(1)}${c}`}function Uj({config:t}){return t.emulator?kg(t,Vj):`https://${t.authDomain}/${Lj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="webStorageSupport";class Bj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=GT,this._completeRedirectFn=hj,this._overrideRedirectResult=lj}async _openPopup(e,n,r,i){var s;fr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await U_(e,n,r,Np(),i);return jj(e,o,Dg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await U_(e,n,r,Np(),i);return HM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(fr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Aj(e),r=new fj(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tf,{type:tf},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[tf];o!==void 0&&n(!!o),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return FT()||DT()||Pg()}}const zj=Bj;var B_="@firebase/auth",z_="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wj(t){Xs(new Ki("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UT(t)},c=new EM(r,i,s,l);return AM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Xs(new Ki("auth-internal",e=>{const n=Ng(e.getProvider("auth").getImmediate());return(r=>new $j(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(B_,z_,Hj(t)),Xr(B_,z_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=5*60,Kj=Ob("authIdTokenMaxAge")||qj;let $_=null;const Gj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Kj)return;const i=n==null?void 0:n.token;$_!==i&&($_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Qj(t=zb()){const e=Wm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CM(t,{popupRedirectResolver:zj,persistence:[ZM,BM,GT]}),r=Ob("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Gj(s.toString());VM(n,o,()=>o(n.currentUser)),LM(n,a=>o(a))}}const i=Mb("auth");return i&&PM(n,`http://${i}`),n}function Yj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Vn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Yj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wj("Browser");const Xj=()=>({}).VITE_FIREBASE_API_KEY&&{}.VITE_FIREBASE_AUTH_DOMAIN&&{}.VITE_FIREBASE_PROJECT_ID,H_=Xj()?{apiKey:{}.VITE_FIREBASE_API_KEY,authDomain:{}.VITE_FIREBASE_AUTH_DOMAIN,projectId:{}.VITE_FIREBASE_PROJECT_ID,storageBucket:{}.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:{}.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:{}.VITE_FIREBASE_APP_ID}:null;let nf=null,Jj=null,Rr=null;if(H_)try{nf=Bb(H_),Jj=Qj(nf),Rr=ND(nf)}catch(t){console.warn("Firebase initialization failed:",t)}else console.warn("Firebase configuration not found. App will use localStorage for data persistence.");const Zj=()=>{try{return Rr&&typeof Rr.collection=="function"}catch{return console.warn("Firebase not properly configured, falling back to localStorage"),!1}};class eO{constructor(){this.isConfigured=Zj(),this.isConfigured||console.warn("Firebase not available, using localStorage fallback")}async getCollection(e){if(!this.isConfigured)return this.getFromLocalStorage(e);try{const n=await qD(E_(Rr,e)),r=[];return n.forEach(i=>{r.push({id:i.id,...i.data()})}),r}catch(n){return console.error(`Error fetching ${e}:`,n),this.getFromLocalStorage(e)}}async getDocument(e,n){if(!this.isConfigured)return this.getFromLocalStorage(e,n);try{const r=$c(Rr,e,n),i=await WD(r);return i.exists()?{id:i.id,...i.data()}:null}catch(r){return console.error(`Error fetching document ${n}:`,r),this.getFromLocalStorage(e,n)}}async addDocument(e,n){if(!this.isConfigured)return this.addToLocalStorage(e,n);try{return{id:(await QD(E_(Rr,e),{...n,createdAt:Zd(),updatedAt:Zd()})).id,...n}}catch(r){return console.error(`Error adding document to ${e}:`,r),this.addToLocalStorage(e,n)}}async updateDocument(e,n,r){if(!this.isConfigured)return this.updateInLocalStorage(e,n,r);try{const i=$c(Rr,e,n);return await KD(i,{...r,updatedAt:Zd()}),{id:n,...r}}catch(i){return console.error(`Error updating document ${n}:`,i),this.updateInLocalStorage(e,n,r)}}async deleteDocument(e,n){if(!this.isConfigured)return this.deleteFromLocalStorage(e,n);try{const r=$c(Rr,e,n);return await GD(r),!0}catch(r){return console.error(`Error deleting document ${n}:`,r),this.deleteFromLocalStorage(e,n)}}getFromLocalStorage(e,n=null){try{const r=localStorage.getItem(e);if(!r)return n?null:[];const i=JSON.parse(r);return n?i.find(s=>s.id===n)||null:i}catch(r){return console.error(`Error reading from localStorage ${e}:`,r),n?null:[]}}addToLocalStorage(e,n){try{const r=this.getFromLocalStorage(e),i={id:Date.now().toString(),...n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return r.push(i),localStorage.setItem(e,JSON.stringify(r)),i}catch(r){return console.error(`Error adding to localStorage ${e}:`,r),null}}updateInLocalStorage(e,n,r){try{const i=this.getFromLocalStorage(e),s=i.findIndex(o=>o.id===n);return s!==-1?(i[s]={...i[s],...r,updatedAt:new Date().toISOString()},localStorage.setItem(e,JSON.stringify(i)),i[s]):null}catch(i){return console.error(`Error updating in localStorage ${e}:`,i),null}}deleteFromLocalStorage(e,n){try{const i=this.getFromLocalStorage(e).filter(s=>s.id!==n);return localStorage.setItem(e,JSON.stringify(i)),!0}catch(r){return console.error(`Error deleting from localStorage ${e}:`,r),!1}}getConnectionStatus(){return{isOnline:navigator.onLine,storage:this.isConfigured?"firebase":"localStorage",firebaseConfigured:this.isConfigured}}}const Me=new eO;class tO{constructor(){this.storageKeys={properties:"str_properties",bookings:"str_bookings",expenses:"str_expenses",depreciation:"str_depreciation",materialParticipation:"str_material_participation",taxEstimates:"str_tax_estimates",settings:"str_settings"}}isStorageAvailable(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return console.warn("localStorage is not available:",e),!1}}getItem(e,n=null){if(!this.isStorageAvailable())return console.warn("localStorage not available, returning default value"),n;try{const r=localStorage.getItem(e);return r?JSON.parse(r):n}catch(r){return console.error("Error reading from localStorage:",r),n}}setItem(e,n){if(!this.isStorageAvailable())return console.warn("localStorage not available, data not saved"),!1;try{return localStorage.setItem(e,JSON.stringify(n)),!0}catch(r){return console.error("Error writing to localStorage:",r),!1}}removeItem(e){if(!this.isStorageAvailable())return!1;try{return localStorage.removeItem(e),!0}catch(n){return console.error("Error removing from localStorage:",n),!1}}getProperties(){return this.getItem(this.storageKeys.properties,[])}saveProperty(e){const n=this.getProperties(),r=n.findIndex(s=>s.id===e.id);let i;return r>=0?(n[r]={...n[r],...e},i=n[r]):(i={...e,id:e.id||Date.now().toString()},n.push(i)),this.setItem(this.storageKeys.properties,n),i}deleteProperty(e){const r=this.getProperties().filter(i=>i.id!==e);return this.setItem(this.storageKeys.properties,r)}getBookings(){return this.getItem(this.storageKeys.bookings,[])}saveBooking(e){const n=this.getBookings(),r=n.findIndex(i=>i.id===e.id);return r>=0?n[r]={...n[r],...e}:n.push({...e,id:e.id||Date.now().toString()}),this.setItem(this.storageKeys.bookings,n)}deleteBooking(e){const r=this.getBookings().filter(i=>i.id!==e);return this.setItem(this.storageKeys.bookings,r)}getExpenses(){return this.getItem(this.storageKeys.expenses,[])}saveExpense(e){const n=this.getExpenses(),r=n.findIndex(i=>i.id===e.id);return r>=0?n[r]={...n[r],...e}:n.push({...e,id:e.id||Date.now().toString()}),this.setItem(this.storageKeys.expenses,n)}deleteExpense(e){const r=this.getExpenses().filter(i=>i.id!==e);return this.setItem(this.storageKeys.expenses,r)}getDepreciation(){return this.getItem(this.storageKeys.depreciation,[])}saveDepreciation(e){const n=this.getDepreciation(),r=n.findIndex(i=>i.id===e.id);return r>=0?n[r]={...n[r],...e}:n.push({...e,id:e.id||Date.now().toString()}),this.setItem(this.storageKeys.depreciation,n)}deleteDepreciation(e){const r=this.getDepreciation().filter(i=>i.id!==e);return this.setItem(this.storageKeys.depreciation,r)}getMaterialParticipation(){return this.getItem(this.storageKeys.materialParticipation,[])}saveMaterialParticipation(e){const n=this.getMaterialParticipation(),r=n.findIndex(i=>i.id===e.id);return r>=0?n[r]={...n[r],...e}:n.push({...e,id:e.id||Date.now().toString()}),this.setItem(this.storageKeys.materialParticipation,n)}deleteMaterialParticipation(e){const r=this.getMaterialParticipation().filter(i=>i.id!==e);return this.setItem(this.storageKeys.materialParticipation,r)}getTaxEstimates(){return this.getItem(this.storageKeys.taxEstimates,[])}saveTaxEstimate(e){const n=this.getTaxEstimates(),r=n.findIndex(i=>i.id===e.id);return r>=0?n[r]={...n[r],...e}:n.push({...e,id:e.id||Date.now().toString()}),this.setItem(this.storageKeys.taxEstimates,n)}deleteTaxEstimate(e){const r=this.getTaxEstimates().filter(i=>i.id!==e);return this.setItem(this.storageKeys.taxEstimates,r)}getSettings(){return this.getItem(this.storageKeys.settings,{taxYear:new Date().getFullYear(),defaultCurrency:"USD",notifications:!0})}saveSettings(e){const n=this.getSettings();return this.setItem(this.storageKeys.settings,{...n,...e})}exportAllData(){return{properties:this.getProperties(),bookings:this.getBookings(),expenses:this.getExpenses(),depreciation:this.getDepreciation(),materialParticipation:this.getMaterialParticipation(),taxEstimates:this.getTaxEstimates(),settings:this.getSettings(),exportDate:new Date().toISOString()}}importData(e){try{return e.properties&&this.setItem(this.storageKeys.properties,e.properties),e.bookings&&this.setItem(this.storageKeys.bookings,e.bookings),e.expenses&&this.setItem(this.storageKeys.expenses,e.expenses),e.depreciation&&this.setItem(this.storageKeys.depreciation,e.depreciation),e.materialParticipation&&this.setItem(this.storageKeys.materialParticipation,e.materialParticipation),e.taxEstimates&&this.setItem(this.storageKeys.taxEstimates,e.taxEstimates),e.settings&&this.setItem(this.storageKeys.settings,e.settings),!0}catch(n){return console.error("Error importing data:",n),!1}}clearAllData(){Object.values(this.storageKeys).forEach(e=>{this.removeItem(e)})}getStorageInfo(){if(!this.isStorageAvailable())return{available:!1,used:0,total:0};try{let e=0;return Object.values(this.storageKeys).forEach(n=>{const r=localStorage.getItem(n);r&&(e+=r.length)}),{available:!0,used:e,total:5*1024*1024}}catch{return{available:!1,used:0,total:0}}}}const ne=new tO;class nO{constructor(){this.isOnline=navigator.onLine,this.setupOnlineOfflineListeners()}setupOnlineOfflineListeners(){window.addEventListener("online",()=>{this.isOnline=!0,console.log("App is online - switching to Firebase"),this.syncLocalToFirebase()}),window.addEventListener("offline",()=>{this.isOnline=!1,console.log("App is offline - using localStorage")})}async syncLocalToFirebase(){try{const e=ne.exportAllData();for(const[n,r]of Object.entries(e))if(n!=="exportDate")for(const i of r){const{id:s,...o}=i;try{await Me.addDocument(n,o)}catch(a){console.warn(`Failed to sync ${n} item:`,a)}}console.log("Local data synced to Firebase")}catch(e){console.error("Error syncing local data to Firebase:",e)}}async getCollection(e){if(this.isOnline)try{return await Me.getCollection(e)}catch(n){return console.warn("Firebase failed, falling back to localStorage:",n),ne.getItem(`str_${e}`,[])}else return ne.getItem(`str_${e}`,[])}async addDocument(e,n){if(this.isOnline)try{return await Me.addDocument(e,n)}catch(r){return console.warn("Firebase failed, saving to localStorage:",r),ne.setItem(`str_${e}`,n)}else return ne.setItem(`str_${e}`,n)}async updateDocument(e,n,r){if(this.isOnline)try{return await Me.updateDocument(e,n,r)}catch(i){return console.warn("Firebase failed, updating localStorage:",i),ne.setItem(`str_${e}`,r)}else return ne.setItem(`str_${e}`,r)}async deleteDocument(e,n){if(this.isOnline)try{return await Me.deleteDocument(e,n)}catch(r){return console.warn("Firebase failed, deleting from localStorage:",r),ne.removeItem(`str_${e}`)}else return ne.removeItem(`str_${e}`)}async getProperties(){return this.getCollection("properties")}async getProperty(e){if(this.isOnline)try{return await Me.getProperty(e)}catch(n){return console.warn("Firebase failed, getting from localStorage:",n),ne.getProperties().find(i=>i.id===e)||null}else return ne.getProperties().find(r=>r.id===e)||null}async createProperty(e){if(this.isOnline)try{return await Me.createProperty(e)}catch(n){return console.warn("Firebase failed, saving to localStorage:",n),ne.saveProperty(e)}else return ne.saveProperty(e)}async updateProperty(e,n){if(this.isOnline)try{return await Me.updateProperty(e,n)}catch(r){return console.warn("Firebase failed, updating localStorage:",r),ne.saveProperty({...n,id:e})}else return ne.saveProperty({...n,id:e})}async deleteProperty(e){if(this.isOnline)try{return await Me.deleteProperty(e)}catch(n){return console.warn("Firebase failed, deleting from localStorage:",n),ne.deleteProperty(e)}else return ne.deleteProperty(e)}async getBookings(){return this.getCollection("bookings")}async getPropertyBookings(e){if(this.isOnline)try{return await Me.getPropertyBookings(e)}catch(n){return console.warn("Firebase failed, getting from localStorage:",n),ne.getBookings().filter(i=>i.property_id===e)}else return ne.getBookings().filter(r=>r.property_id===e)}async createBooking(e){if(this.isOnline)try{return await Me.createBooking(e)}catch(n){return console.warn("Firebase failed, saving to localStorage:",n),ne.saveBooking(e)}else return ne.saveBooking(e)}async updateBooking(e,n){if(this.isOnline)try{return await Me.updateBooking(e,n)}catch(r){return console.warn("Firebase failed, updating localStorage:",r),ne.saveBooking({...n,id:e})}else return ne.saveBooking({...n,id:e})}async deleteBooking(e){if(this.isOnline)try{return await Me.deleteBooking(e)}catch(n){return console.warn("Firebase failed, deleting from localStorage:",n),ne.deleteBooking(e)}else return ne.deleteBooking(e)}async getExpenses(){return this.getCollection("expenses")}async getPropertyExpenses(e){if(this.isOnline)try{return await Me.getPropertyExpenses(e)}catch(n){return console.warn("Firebase failed, getting from localStorage:",n),ne.getExpenses().filter(i=>i.property_id===e)}else return ne.getExpenses().filter(r=>r.property_id===e)}async createExpense(e){if(this.isOnline)try{return await Me.createExpense(e)}catch(n){return console.warn("Firebase failed, saving to localStorage:",n),ne.saveExpense(e)}else return ne.saveExpense(e)}async updateExpense(e,n){if(this.isOnline)try{return await Me.updateExpense(e,n)}catch(r){return console.warn("Firebase failed, updating localStorage:",r),ne.saveExpense({...n,id:e})}else return ne.saveExpense({...n,id:e})}async deleteExpense(e){if(this.isOnline)try{return await Me.deleteExpense(e)}catch(n){return console.warn("Firebase failed, deleting from localStorage:",n),ne.deleteExpense(e)}else return ne.deleteExpense(e)}async getMaterialParticipation(){return this.getCollection("materialParticipation")}async createMaterialParticipation(e){if(this.isOnline)try{return await Me.createMaterialParticipation(e)}catch(n){return console.warn("Firebase failed, saving to localStorage:",n),ne.saveMaterialParticipation(e)}else return ne.saveMaterialParticipation(e)}async deleteMaterialParticipation(e){if(this.isOnline)try{return await Me.deleteMaterialParticipation(e)}catch(n){return console.warn("Firebase failed, deleting from localStorage:",n),ne.deleteMaterialParticipation(e)}else return ne.deleteMaterialParticipation(e)}async exportAllData(){if(this.isOnline)try{return await Me.exportAllData()}catch(e){return console.warn("Firebase failed, exporting from localStorage:",e),ne.exportAllData()}else return ne.exportAllData()}async importData(e){if(this.isOnline)try{return await Me.importData(e)}catch(n){return console.warn("Firebase failed, importing to localStorage:",n),ne.importData(e)}else return ne.importData(e)}async clearAllData(){if(this.isOnline)try{return await Me.clearAllData()}catch(e){return console.warn("Firebase failed, clearing localStorage:",e),ne.clearAllData()}else return ne.clearAllData()}async getStorageInfo(){if(this.isOnline)try{return await Me.getStorageInfo()}catch(e){return console.warn("Firebase failed, getting localStorage info:",e),ne.getStorageInfo()}else return ne.getStorageInfo()}getConnectionStatus(){return{isOnline:this.isOnline,storage:this.isOnline?"Firebase":"localStorage"}}}const Y=new nO;class rO{async getProperties(){return Y.getProperties()}async getProperty(e){return Y.getProperty(e)}async createProperty(e){return Y.createProperty(e)}async updateProperty(e,n){return Y.updateProperty(e,n)}async deleteProperty(e){return Y.deleteProperty(e)}async getTransactions(){return Y.getExpenses()}async getPropertyTransactions(e){return Y.getPropertyExpenses(e)}async getTransaction(e){return Y.getDocument("expenses",e)}async createTransaction(e){return Y.createExpense(e)}async updateTransaction(e,n){return Y.updateExpense(e,n)}async deleteTransaction(e){return Y.deleteExpense(e)}async getTransactionSummary(e,n){const i=(await Y.getExpenses()).filter(s=>s.property_id===e);if(n){const s=new Date(n,0,1),o=new Date(n,11,31);return i.filter(a=>{const l=new Date(a.date);return l>=s&&l<=o})}return i}async getBookings(){return Y.getBookings()}async getPropertyBookings(e){return Y.getPropertyBookings(e)}async getBooking(e){return Y.getDocument("bookings",e)}async createBooking(e){return Y.createBooking(e)}async updateBooking(e,n){return Y.updateBooking(e,n)}async deleteBooking(e){return Y.deleteBooking(e)}async getBookingStats(){const e=await Y.getBookings(),n=e.length,r=e.reduce((s,o)=>s+(o.amount||0),0),i=n>0?r/n:0;return{totalBookings:n,totalRevenue:r,avgBookingValue:i}}async getDepreciation(){return Y.getCollection("depreciation")}async getPropertyDepreciation(e){return(await Y.getCollection("depreciation")).filter(r=>r.property_id===e)}async getDepreciationRecord(e){return Y.getDocument("depreciation",e)}async createDepreciation(e){return Y.addDocument("depreciation",e)}async updateDepreciation(e,n){return Y.updateDocument("depreciation",e,n)}async deleteDepreciation(e){return Y.deleteDocument("depreciation",e)}async getDepreciationSummary(e){const r=(await Y.getCollection("depreciation")).filter(o=>o.property_id===e),i=r.reduce((o,a)=>o+(a.amount||0),0),s=r.filter(o=>o.type==="bonus").reduce((o,a)=>o+(a.amount||0),0);return{totalDepreciation:i,bonusDepreciation:s,regularDepreciation:i-s,records:r}}async getDashboardData(){const[e,n,r,i]=await Promise.all([Y.getProperties(),Y.getBookings(),Y.getExpenses(),Y.getCollection("depreciation")]),s=e.length,o=n.length,a=n.reduce((f,p)=>f+(p.amount||0),0),l=r.reduce((f,p)=>f+(p.amount||0),0),c=i.reduce((f,p)=>f+(p.amount||0),0),h=a-l;return{totalProperties:s,totalBookings:o,totalRevenue:a,totalExpenses:l,totalDepreciation:c,netIncome:h,properties:e.slice(0,5),recentBookings:n.slice(-5),recentExpenses:r.slice(-5)}}async getPropertyPerformance(){const[e,n,r]=await Promise.all([Y.getProperties(),Y.getBookings(),Y.getExpenses()]);return e.map(i=>{const s=n.filter(h=>h.property_id===i.id),o=r.filter(h=>h.property_id===i.id),a=s.reduce((h,f)=>h+(f.amount||0),0),l=o.reduce((h,f)=>h+(f.amount||0),0),c=a-l;return{...i,totalIncome:a,totalExpenses:l,netIncome:c,bookingCount:s.length,expenseCount:o.length}})}async getMonthlyCashFlow(e=new Date().getFullYear()){const[n,r]=await Promise.all([Y.getBookings(),Y.getExpenses()]);return Array.from({length:12},(s,o)=>{const a=o+1,l=n.filter(p=>{const y=new Date(p.date);return y.getFullYear()===e&&y.getMonth()===o}),c=f.filter(p=>{const y=new Date(p.date);return y.getFullYear()===e&&y.getMonth()===o}),h=l.reduce((p,y)=>p+(y.amount||0),0),f=c.reduce((p,y)=>p+(y.amount||0),0);return{month:a,income:h,expenses:f,net:h-f}})}async getDepreciationChart(){const e=await Y.getCollection("depreciation"),n=new Date().getFullYear();return Array.from({length:5},(i,s)=>{const o=n-2+s,a=e.filter(h=>new Date(h.date).getFullYear()===o),l=a.reduce((h,f)=>h+(f.amount||0),0),c=a.filter(h=>h.type==="bonus").reduce((h,f)=>h+(f.amount||0),0);return{year:o,total:l,bonus:c,regular:l-c}})}async getTransactionCategories(e=new Date().getFullYear()){const r=(await Y.getExpenses()).filter(s=>new Date(s.date).getFullYear()===e),i={};return r.forEach(s=>{const o=s.category||"Other";i[o]||(i[o]=0),i[o]+=s.amount||0}),Object.entries(i).map(([s,o])=>({category:s,amount:o}))}async getPropertyDistribution(){const[e,n]=await Promise.all([Y.getProperties(),Y.getBookings()]);return e.map(r=>{const s=n.filter(o=>o.property_id===r.id).reduce((o,a)=>o+(a.amount||0),0);return{id:r.id,name:r.address,value:r.current_value||0,income:s}})}async getTaxSummary(e=new Date().getFullYear()){const[n,r,i]=await Promise.all([Y.getBookings(),Y.getExpenses(),Y.getCollection("depreciation")]),s=n.filter(p=>new Date(p.date).getFullYear()===e),o=r.filter(p=>new Date(p.date).getFullYear()===e),a=i.filter(p=>new Date(p.date).getFullYear()===e),l=s.reduce((p,y)=>p+(y.amount||0),0),c=o.reduce((p,y)=>p+(y.amount||0),0),h=a.reduce((p,y)=>p+(y.amount||0),0),f=a.filter(p=>p.type==="bonus").reduce((p,y)=>p+(y.amount||0),0);return{year:e,totalIncome:l,totalExpenses:c,totalDepreciation:h,bonusDepreciation:f,regularDepreciation:h-f,netIncome:l-c-h,taxableIncome:l-c-h}}async getSection179Summary(e=new Date().getFullYear()){const r=(await Y.getCollection("depreciation")).filter(s=>new Date(s.date).getFullYear()===e&&s.type==="section179"),i=r.reduce((s,o)=>s+(o.amount||0),0);return{year:e,totalSection179:i,records:r}}async getBonusDepreciationSummary(e=new Date().getFullYear()){const r=(await Y.getCollection("depreciation")).filter(s=>new Date(s.date).getFullYear()===e&&s.type==="bonus"),i=r.reduce((s,o)=>s+(o.amount||0),0);return{year:e,totalBonus:i,records:r}}async getRentalIncomeSummary(e=new Date().getFullYear()){const r=(await Y.getBookings()).filter(o=>new Date(o.date).getFullYear()===e),i=r.reduce((o,a)=>o+(a.amount||0),0),s=r.length>0?i/r.length:0;return{year:e,totalIncome:i,bookingCount:r.length,avgBookingValue:s,bookings:r}}async getExpensesBreakdown(e=new Date().getFullYear()){const r=(await Y.getExpenses()).filter(o=>new Date(o.date).getFullYear()===e),i={};r.forEach(o=>{const a=o.category||"Other";i[a]||(i[a]=0),i[a]+=o.amount||0});const s=r.reduce((o,a)=>o+(a.amount||0),0);return{year:e,totalExpenses:s,categories:Object.entries(i).map(([o,a])=>({category:o,amount:a,percentage:s>0?a/s*100:0})),expenses:r}}async getTaxFormsData(e=new Date().getFullYear()){const[n,r,i,s,o]=await Promise.all([this.getTaxSummary(e),this.getSection179Summary(e),this.getBonusDepreciationSummary(e),this.getRentalIncomeSummary(e),this.getExpensesBreakdown(e)]);return{year:e,taxSummary:n,section179:r,bonusDepreciation:i,rentalIncome:s,expensesBreakdown:o}}async getMaterialParticipation(){return Y.getMaterialParticipation()}async saveMaterialParticipation(e){return Y.createMaterialParticipation(e)}async deleteMaterialParticipation(e){return Y.deleteMaterialParticipation(e)}async exportData(){return Y.exportAllData()}async importData(e){return Y.importData(e)}async clearAllData(){return Y.clearAllData()}async getStorageInfo(){return Y.getStorageInfo()}getConnectionStatus(){return Y.getConnectionStatus()}}const Qe=new rO,W_=()=>{const[t,e]=V.useState({isOnline:navigator.onLine,storage:"localStorage"});return V.useEffect(()=>{const n=()=>{const o=Qe.getConnectionStatus();e(o)};n();const r=()=>{setTimeout(n,1e3)},i=()=>{n()};window.addEventListener("online",r),window.addEventListener("offline",i);const s=setInterval(n,5e3);return()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i),clearInterval(s)}},[]),d.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-1",children:[t.isOnline?d.jsx(XA,{className:"h-4 w-4 text-green-500"}):d.jsx(YA,{className:"h-4 w-4 text-red-500"}),d.jsx("span",{className:t.isOnline?"text-green-600":"text-red-600",children:t.isOnline?"Online":"Offline"})]}),d.jsxs("span",{className:"text-gray-500",children:["(",t.storage,")"]})]})},iO=({children:t})=>{const[e,n]=V.useState(!1),r=cl(),i=[{name:"Dashboard",href:"/",icon:KA},{name:"Properties",href:"/properties",icon:js},{name:"Transactions",href:"/transactions",icon:Ys},{name:"Material Participation",href:"/material-participation",icon:Su},{name:"Depreciation",href:"/depreciation",icon:wh},{name:"Tax Forms",href:"/tax-forms",icon:$a},{name:"Data Manager",href:"/data-manager",icon:Pb}];return d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${e?"block":"hidden"}`,children:[d.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)}),d.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[d.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[d.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Portfolio Tracker"}),d.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(JA,{className:"h-6 w-6"})})]}),d.jsx("nav",{className:"flex-1 space-y-1 px-2 py-4",children:i.map(s=>{const o=r.pathname===s.href;return d.jsxs(pv,{to:s.href,onClick:()=>n(!1),className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md ${o?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[d.jsx(s.icon,{className:"mr-3 h-5 w-5"}),s.name]},s.name)})})]})]}),d.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:d.jsxs("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[d.jsx("div",{className:"flex h-16 items-center px-4",children:d.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Portfolio Tracker"})}),d.jsx("nav",{className:"flex-1 space-y-1 px-2 py-4",children:i.map(s=>{const o=r.pathname===s.href;return d.jsxs(pv,{to:s.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md ${o?"bg-primary-100 text-primary-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[d.jsx(s.icon,{className:"mr-3 h-5 w-5"}),s.name]},s.name)})})]})}),d.jsxs("div",{className:"lg:pl-64",children:[d.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm lg:hidden",children:[d.jsx("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>n(!0),children:d.jsx(GA,{className:"h-6 w-6"})}),d.jsx("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:d.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Portfolio Tracker"})}),d.jsx(W_,{})]}),d.jsxs("div",{className:"hidden lg:flex lg:items-center lg:justify-between lg:px-6 lg:py-4 lg:border-b lg:border-gray-200",children:[d.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Portfolio Tracker"}),d.jsx(W_,{})]}),d.jsx("main",{className:"py-6",children:d.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function xl(t){return t+.5|0}const Lr=(t,e,n)=>Math.max(Math.min(t,n),e);function ea(t){return Lr(xl(t*2.55),0,255)}function ei(t){return Lr(xl(t*255),0,255)}function Yn(t){return Lr(xl(t/2.55)/100,0,1)}function q_(t){return Lr(xl(t*100),0,100)}const nn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Mp=[..."0123456789ABCDEF"],sO=t=>Mp[t&15],oO=t=>Mp[(t&240)>>4]+Mp[t&15],cc=t=>(t&240)>>4===(t&15),aO=t=>cc(t.r)&&cc(t.g)&&cc(t.b)&&cc(t.a);function lO(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&nn[t[1]]*17,g:255&nn[t[2]]*17,b:255&nn[t[3]]*17,a:e===5?nn[t[4]]*17:255}:(e===7||e===9)&&(n={r:nn[t[1]]<<4|nn[t[2]],g:nn[t[3]]<<4|nn[t[4]],b:nn[t[5]]<<4|nn[t[6]],a:e===9?nn[t[7]]<<4|nn[t[8]]:255})),n}const cO=(t,e)=>t<255?e(t):"";function uO(t){var e=aO(t)?sO:oO;return t?"#"+e(t.r)+e(t.g)+e(t.b)+cO(t.a,e):void 0}const hO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tS(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function dO(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function fO(t,e,n){const r=tS(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function pO(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function jg(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=pO(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function Og(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ei)}function Lg(t,e,n){return Og(tS,t,e,n)}function mO(t,e,n){return Og(fO,t,e,n)}function gO(t,e,n){return Og(dO,t,e,n)}function nS(t){return(t%360+360)%360}function yO(t){const e=hO.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?ea(+e[5]):ei(+e[5]));const i=nS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=mO(i,s,o):e[1]==="hsv"?r=gO(i,s,o):r=Lg(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function vO(t,e){var n=jg(t);n[0]=nS(n[0]+e),n=Lg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function _O(t){if(!t)return;const e=jg(t),n=e[0],r=q_(e[1]),i=q_(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Yn(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const K_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},G_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xO(){const t={},e=Object.keys(G_),n=Object.keys(K_);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,K_[s]);s=parseInt(G_[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let uc;function wO(t){uc||(uc=xO(),uc.transparent=[0,0,0,0]);const e=uc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const bO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function EO(t){const e=bO.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?ea(o):Lr(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?ea(r):Lr(r,0,255)),i=255&(e[4]?ea(i):Lr(i,0,255)),s=255&(e[6]?ea(s):Lr(s,0,255)),{r,g:i,b:s,a:n}}}function TO(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Yn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const rf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,hs=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function SO(t,e,n){const r=hs(Yn(t.r)),i=hs(Yn(t.g)),s=hs(Yn(t.b));return{r:ei(rf(r+n*(hs(Yn(e.r))-r))),g:ei(rf(i+n*(hs(Yn(e.g))-i))),b:ei(rf(s+n*(hs(Yn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function hc(t,e,n){if(t){let r=jg(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Lg(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function rS(t,e){return t&&Object.assign(e||{},t)}function Q_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ei(t[3]))):(e=rS(t,{r:0,g:0,b:0,a:1}),e.a=ei(e.a)),e}function IO(t){return t.charAt(0)==="r"?EO(t):yO(t)}class Za{constructor(e){if(e instanceof Za)return e;const n=typeof e;let r;n==="object"?r=Q_(e):n==="string"&&(r=lO(e)||wO(e)||IO(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=rS(this._rgb);return e&&(e.a=Yn(e.a)),e}set rgb(e){this._rgb=Q_(e)}rgbString(){return this._valid?TO(this._rgb):void 0}hexString(){return this._valid?uO(this._rgb):void 0}hslString(){return this._valid?_O(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=SO(this._rgb,e._rgb,n)),this}clone(){return new Za(this.rgb)}alpha(e){return this._rgb.a=ei(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=xl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return hc(this._rgb,2,e),this}darken(e){return hc(this._rgb,2,-e),this}saturate(e){return hc(this._rgb,1,e),this}desaturate(e){return hc(this._rgb,1,-e),this}rotate(e){return vO(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Wn(){}const kO=(()=>{let t=0;return()=>t++})();function Ee(t){return t==null}function Oe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ot(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Kt(t,e){return ot(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const CO=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function we(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ve(t,e,n,r){let i,s,o;if(Oe(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(me(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function qu(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Ku(t){if(Oe(t))return t.map(Ku);if(me(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Ku(t[n[i]]);return e}return t}function iS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function AO(t,e,n,r){if(!iS(t))return;const i=e[t],s=n[t];me(i)&&me(s)?el(i,s,r):e[t]=Ku(s)}function el(t,e,n){const r=Oe(e)?e:[e],i=r.length;if(!me(t))return t;n=n||{};const s=n.merger||AO;let o;for(let a=0;a<i;++a){if(o=r[a],!me(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function xa(t,e){return el(t,e,{merger:PO})}function PO(t,e,n){if(!iS(t))return;const r=e[t],i=n[t];me(r)&&me(i)?xa(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ku(i))}const Y_={"":t=>t,x:t=>t.x,y:t=>t.y};function NO(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function RO(t){const e=NO(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Gu(t,e){return(Y_[e]||(Y_[e]=RO(e)))(t)}function Vg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Qu=t=>typeof t<"u",hi=t=>typeof t=="function",X_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function DO(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Xe=Math.PI,un=2*Xe,MO=un+Xe,Yu=Number.POSITIVE_INFINITY,jO=Xe/180,Xt=Xe/2,bi=Xe/4,J_=Xe*2/3,Vr=Math.log10,io=Math.sign;function wa(t,e,n){return Math.abs(t-e)<n}function Z_(t){const e=Math.round(t);t=wa(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Vr(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function OO(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function LO(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Xu(t){return!LO(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function VO(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function sS(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Fr(t){return t*(Xe/180)}function Fg(t){return t*(180/Xe)}function ex(t){if(!ot(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function FO(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Xe&&(s+=un),{angle:s,distance:i}}function jp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function UO(t,e){return(t-e+MO)%un-Xe}function yn(t){return(t%un+un)%un}function oS(t,e,n,r){const i=yn(t),s=yn(e),o=yn(n),a=yn(s-i),l=yn(o-i),c=yn(i-s),h=yn(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function Nn(t,e,n){return Math.max(e,Math.min(n,t))}function BO(t){return Nn(t,-32768,32767)}function ta(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Ug(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Op=(t,e,n,r)=>Ug(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),zO=(t,e,n)=>Ug(t,n,r=>t[r][e]>=n);function $O(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const aS=["push","pop","shift","splice","unshift"];function HO(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),aS.forEach(n=>{const r="_onData"+Vg(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function tx(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(aS.forEach(s=>{delete t[s]}),delete t._chartjs)}function WO(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const lS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function cS(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,lS.call(window,()=>{r=!1,t.apply(e,n)}))}}function qO(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Bg=t=>t==="start"?"left":t==="end"?"right":"center",bt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,KO=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e,dc=t=>t===0||t===1,nx=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*un/n)),rx=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*un/n)+1,ba={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Xt)+1,easeOutSine:t=>Math.sin(t*Xt),easeInOutSine:t=>-.5*(Math.cos(Xe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>dc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>dc(t)?t:nx(t,.075,.3),easeOutElastic:t=>dc(t)?t:rx(t,.075,.3),easeInOutElastic(t){return dc(t)?t:t<.5?.5*nx(t*2,.1125,.45):.5+.5*rx(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ba.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ba.easeInBounce(t*2)*.5:ba.easeOutBounce(t*2-1)*.5+.5};function zg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ix(t){return zg(t)?t:new Za(t)}function sf(t){return zg(t)?t:new Za(t).saturate(.5).darken(.1).hexString()}const GO=["x","y","borderWidth","radius","tension"],QO=["color","borderColor","backgroundColor"];function YO(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:QO},numbers:{type:"number",properties:GO}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function XO(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const sx=new Map;function JO(t,e){e=e||{};const n=t+JSON.stringify(e);let r=sx.get(n);return r||(r=new Intl.NumberFormat(t,e),sx.set(n,r)),r}function $g(t,e,n){return JO(e,n).format(t)}const uS={values(t){return Oe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=ZO(t,n)}const o=Vr(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),$g(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Vr(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?uS.numeric.call(this,t,e,n):""}};function ZO(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var $h={formatters:uS};function eL(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$h.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xi=Object.create(null),Lp=Object.create(null);function Ea(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function of(t,e,n){return typeof e=="string"?el(Ea(t,e),n):el(Ea(t,""),e)}class tL{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>sf(i.backgroundColor),this.hoverBorderColor=(r,i)=>sf(i.borderColor),this.hoverColor=(r,i)=>sf(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return of(this,e,n)}get(e){return Ea(this,e)}describe(e,n){return of(Lp,e,n)}override(e,n){return of(Xi,e,n)}route(e,n,r,i){const s=Ea(this,e),o=Ea(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return me(l)?Object.assign({},c,l):ue(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var $e=new tL({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[YO,XO,eL]);function nL(t){return!t||Ee(t.size)||Ee(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ju(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function rL(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,f,p;for(l=0;l<a;l++)if(f=n[l],f!=null&&!Oe(f))o=Ju(t,i,s,o,f);else if(Oe(f))for(c=0,h=f.length;c<h;c++)p=f[c],p!=null&&!Oe(p)&&(o=Ju(t,i,s,o,p));t.restore();const y=s.length/2;if(y>n.length){for(l=0;l<y;l++)delete i[s[l]];s.splice(0,y)}return o}function Ei(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function ox(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Vp(t,e,n,r){hS(t,e,n,r,null)}function hS(t,e,n,r,i){let s,o,a,l,c,h,f,p;const y=e.pointStyle,w=e.rotation,E=e.radius;let S=(w||0)*jO;if(y&&typeof y=="object"&&(s=y.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(S),t.drawImage(y,-y.width/2,-y.height/2,y.width,y.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),y){default:i?t.ellipse(n,r,i/2,E,0,0,un):t.arc(n,r,E,0,un),t.closePath();break;case"triangle":h=i?i/2:E,t.moveTo(n+Math.sin(S)*h,r-Math.cos(S)*E),S+=J_,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*E),S+=J_,t.lineTo(n+Math.sin(S)*h,r-Math.cos(S)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(S+bi)*l,f=Math.cos(S+bi)*(i?i/2-c:l),a=Math.sin(S+bi)*l,p=Math.sin(S+bi)*(i?i/2-c:l),t.arc(n-f,r-a,c,S-Xe,S-Xt),t.arc(n+p,r-o,c,S-Xt,S),t.arc(n+f,r+a,c,S,S+Xt),t.arc(n-p,r+o,c,S+Xt,S+Xe),t.closePath();break;case"rect":if(!w){l=Math.SQRT1_2*E,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}S+=bi;case"rectRot":f=Math.cos(S)*(i?i/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,p=Math.sin(S)*(i?i/2:E),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":S+=bi;case"cross":f=Math.cos(S)*(i?i/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,p=Math.sin(S)*(i?i/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(S)*(i?i/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,p=Math.sin(S)*(i?i/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),S+=bi,f=Math.cos(S)*(i?i/2:E),o=Math.cos(S)*E,a=Math.sin(S)*E,p=Math.sin(S)*(i?i/2:E),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(S)*E,a=Math.sin(S)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(S)*(i?i/2:E),r+Math.sin(S)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function tr(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Hg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Wg(t){t.restore()}function iL(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function sL(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function oL(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ee(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function aL(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function lL(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ji(t,e,n,r,i,s={}){const o=Oe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,oL(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&lL(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ee(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),aL(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Zu(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Xe,Xe,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Xe,Xt,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Xt,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Xt,!0),t.lineTo(n+o.topLeft,r)}const cL=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uL=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function hL(t,e){const n=(""+t).match(cL);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const dL=t=>+t||0;function dS(t,e){const n={},r=me(e),i=r?Object.keys(e):e,s=me(t)?r?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=dL(s(o));return n}function fL(t){return dS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Bs(t){return dS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ct(t){const e=fL(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nt(t,e){t=t||{},e=e||$e.font;let n=ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ue(t.style,e.style);r&&!(""+r).match(uL)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ue(t.family,e.family),lineHeight:hL(ue(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ue(t.weight,e.weight),string:""};return i.string=nL(i),i}function fc(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&Oe(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function pL(t,e,n){const{min:r,max:i}=t,s=CO(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function yi(t,e){return Object.assign(Object.create(t),e)}function qg(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=gS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>qg([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return pS(a,l,()=>bL(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return lx(a).includes(l)},ownKeys(a){return lx(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function so(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:fS(t,r),setContext:s=>so(t,s,n,r),override:s=>so(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return pS(s,o,()=>gL(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function fS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:hi(n)?n:()=>n,isIndexable:hi(r)?r:()=>r}}const mL=(t,e)=>t?t+Vg(e):e,Kg=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function gL(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return hi(a)&&o.isScriptable(e)&&(a=yL(e,a,t,n)),Oe(a)&&a.length&&(a=vL(e,a,t,o.isIndexable)),Kg(e,a)&&(a=so(a,i,s&&s[e],o)),a}function yL(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Kg(t,l)&&(l=Gg(i._scopes,i,t,l)),l}function vL(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(me(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const f=Gg(c,i,t,h);e.push(so(f,s,o&&o[t],a))}}return e}function mS(t,e,n){return hi(t)?t(e,n):t}const _L=(t,e)=>t===!0?e:typeof t=="string"?Gu(e,t):void 0;function xL(t,e,n,r,i){for(const s of e){const o=_L(n,s);if(o){t.add(o);const a=mS(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Gg(t,e,n,r){const i=e._rootScopes,s=mS(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=ax(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=ax(a,o,s,l,r),l===null)?!1:qg(Array.from(a),[""],i,s,()=>wL(e,n,r))}function ax(t,e,n,r,i){for(;n;)n=xL(t,e,n,r,i);return n}function wL(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Oe(i)&&me(n)?n:i||{}}function bL(t,e,n,r){let i;for(const s of e)if(i=gS(mL(s,t),n),typeof i<"u")return Kg(t,i)?Gg(n,r,t,i):i}function gS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function lx(t){let e=t._keys;return e||(e=t._keys=EL(t._scopes)),e}function EL(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const TL=Number.EPSILON||1e-14,oo=(t,e)=>e<t.length&&!t[e].skip&&t[e],yS=t=>t==="x"?"y":"x";function SL(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=jp(s,i),l=jp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const f=r*c,p=r*h;return{previous:{x:s.x-f*(o.x-i.x),y:s.y-f*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function IL(t,e,n){const r=t.length;let i,s,o,a,l,c=oo(t,0);for(let h=0;h<r-1;++h)if(l=c,c=oo(t,h+1),!(!l||!c)){if(wa(e[h],0,TL)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function kL(t,e,n="x"){const r=yS(n),i=t.length;let s,o,a,l=oo(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=oo(t,c+1),!a)continue;const h=a[n],f=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=f-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=f+s*e[c])}}function CL(t,e="x"){const n=yS(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=oo(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=oo(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?io(i[o-1])!==io(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}IL(t,i,s),kL(t,s,e)}function pc(t,e,n){return Math.max(Math.min(t,n),e)}function AL(t,e){let n,r,i,s,o,a=tr(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&tr(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=pc(i.cp1x,e.left,e.right),i.cp1y=pc(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=pc(i.cp2x,e.left,e.right),i.cp2y=pc(i.cp2y,e.top,e.bottom)))}function PL(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")CL(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=SL(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&AL(t,n)}function Qg(){return typeof window<"u"&&typeof document<"u"}function Yg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function eh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Hh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function NL(t,e){return Hh(t).getPropertyValue(e)}const RL=["top","right","bottom","left"];function Ui(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=RL[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const DL=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ML(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(DL(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Ai(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Hh(n),s=i.boxSizing==="border-box",o=Ui(i,"padding"),a=Ui(i,"border","width"),{x:l,y:c,box:h}=ML(t,n),f=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:y,height:w}=e;return s&&(y-=o.width+a.width,w-=o.height+a.height),{x:Math.round((l-f)/y*n.width/r),y:Math.round((c-p)/w*n.height/r)}}function jL(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Yg(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Hh(s),l=Ui(a,"border","width"),c=Ui(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=eh(a.maxWidth,s,"clientWidth"),i=eh(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Yu,maxHeight:i||Yu}}const mc=t=>Math.round(t*10)/10;function OL(t,e,n,r){const i=Hh(t),s=Ui(i,"margin"),o=eh(i.maxWidth,t,"clientWidth")||Yu,a=eh(i.maxHeight,t,"clientHeight")||Yu,l=jL(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const p=Ui(i,"border","width"),y=Ui(i,"padding");c-=y.width+p.width,h-=y.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=mc(Math.min(c,o,l.maxWidth)),h=mc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=mc(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=mc(Math.floor(h*r))),{width:c,height:h}}function cx(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const LL=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Qg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ux(t,e){const n=NL(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Pi(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function VL(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function FL(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Pi(t,i,n),a=Pi(i,s,n),l=Pi(s,e,n),c=Pi(o,a,n),h=Pi(a,l,n);return Pi(c,h,n)}const UL=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},BL=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function zs(t,e,n){return t?UL(e,n):BL()}function vS(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function _S(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function xS(t){return t==="angle"?{between:oS,compare:UO,normalize:yn}:{between:ta,compare:(e,n)=>e-n,normalize:e=>e}}function hx({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function zL(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=xS(r),l=e.length;let{start:c,end:h,loop:f}=t,p,y;if(f){for(c+=l,h+=l,p=0,y=l;p<y&&o(a(e[c%l][r]),i,s);++p)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:f,style:t.style}}function $L(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=xS(r),{start:h,end:f,loop:p,style:y}=zL(t,e,n),w=[];let E=!1,S=null,b,x,I;const P=()=>l(i,I,b)&&a(i,I)!==0,M=()=>a(s,b)===0||l(s,I,b),C=()=>E||P(),_=()=>!E||M();for(let v=h,k=h;v<=f;++v)x=e[v%o],!x.skip&&(b=c(x[r]),b!==I&&(E=l(b,i,s),S===null&&C()&&(S=a(b,i)===0?v:k),S!==null&&_()&&(w.push(hx({start:S,end:v,loop:p,count:o,style:y})),S=null),k=v,I=b));return S!==null&&w.push(hx({start:S,end:f,loop:p,count:o,style:y})),w}function HL(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=$L(r[i],t.points,e);s.length&&n.push(...s)}return n}function WL(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function qL(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function KL(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=WL(n,i,s,r);if(r===!0)return dx(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return dx(t,qL(n,o,l,c),n,e)}function dx(t,e,n,r){return!r||!r.setContext||!n?e:GL(t,e,n,r)}function GL(t,e,n,r){const i=t._chart.getContext(),s=fx(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,f=e[0].start,p=f;function y(w,E,S,b){const x=a?-1:1;if(w!==E){for(w+=l;n[w%l].skip;)w-=x;for(;n[E%l].skip;)E+=x;w%l!==E%l&&(c.push({start:w%l,end:E%l,loop:S,style:b}),h=b,f=E%l)}}for(const w of e){f=a?f:w.start;let E=n[f%l],S;for(p=f+1;p<=w.end;p++){const b=n[p%l];S=fx(r.setContext(yi(i,{type:"segment",p0:E,p1:b,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),QL(S,h)&&y(f,p-1,w.loop,h),E=b,h=S}f<p-1&&y(f,p-1,w.loop,h)}return c}function fx(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function QL(t,e){if(!e)return!1;const n=[],r=function(i,s){return zg(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function gc(t,e,n){return t.options.clip?t[n]:e[n]}function YL(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:gc(n,e,"left"),right:gc(n,e,"right"),top:gc(r,e,"top"),bottom:gc(r,e,"bottom")}:e}function XL(t,e){const n=e._clip;if(n.disabled)return!1;const r=YL(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class JL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=lS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var qn=new JL;const px="transparent",ZL={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=ix(t||px),i=r.valid&&ix(e||px);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class e4{constructor(e,n,r,i){const s=n[r];i=fc([e.to,i,s,e.from]);const o=fc([e.from,s,i]);this._active=!0,this._fn=e.fn||ZL[e.type||typeof o],this._easing=ba[e.easing]||ba.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=fc([e.to,n,i,e.from]),this._from=fc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class wS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys($e.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!me(s))return;const o={};for(const a of n)o[a]=s[a];(Oe(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=n4(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&t4(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let f=s[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,h,a);continue}else f.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=f=new e4(p,e,c,h),i.push(f)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return qn.add(this._chart,r),!0}}function t4(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function n4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function mx(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function r4(t,e,n){if(n===!1)return!1;const r=mx(t,n),i=mx(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function i4(t){let e,n,r,i;return me(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function bS(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function gx(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],ot(c)&&(s||e===0||io(e)===io(c))&&(e+=c)}return!h&&!r.all?0:e}function s4(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function af(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function o4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function a4(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function l4(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function yx(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function vx(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=o4(s,o,r),f=e.length;let p;for(let y=0;y<f;++y){const w=e[y],{[l]:E,[c]:S}=w,b=w._stacks||(w._stacks={});p=b[c]=l4(i,h,E),p[a]=S,p._top=yx(p,o,!0,r.type),p._bottom=yx(p,o,!1,r.type);const x=p._visualValues||(p._visualValues={});x[a]=S}}function lf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function c4(t,e){return yi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function u4(t,e,n){return yi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Bo(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const cf=t=>t==="reset"||t==="none",_x=(t,e)=>e?t:Object.assign({},t),h4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:bS(n,!0),values:null};class Qc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=af(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Bo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,p,y,w)=>f==="x"?p:f==="r"?w:y,s=n.xAxisID=ue(r.xAxisID,lf(e,"x")),o=n.yAxisID=ue(r.yAxisID,lf(e,"y")),a=n.rAxisID=ue(r.rAxisID,lf(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tx(this._data,this),e._stacked&&Bo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(me(n)){const i=this._cachedMeta;this._data=s4(n,i)}else if(r!==n){if(r){tx(r,this);const i=this._cachedMeta;Bo(i),i._parsed=[]}n&&Object.isExtensible(n)&&HO(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=af(n.vScale,n),n.stack!==r.stack&&(i=!0,Bo(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(vx(this,n._parsed),n._stacked=af(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,f,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{Oe(i[e])?p=this.parseArrayData(r,i,e,n):me(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const y=()=>f[a]===null||c&&f[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=f=p[h],l&&(y()&&(l=!1),c=f);r._sorted=l}o&&vx(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,f=new Array(i);let p,y,w;for(p=0,y=i;p<y;++p)w=p+r,f[p]={[a]:h||s.parse(c[w],w),[l]:o.parse(n[w],w)};return f}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,f;for(l=0,c=i;l<c;++l)h=l+r,f=n[h],a[l]={x:s.parse(f[0],h),y:o.parse(f[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,f,p,y;for(h=0,f=i;h<f;++h)p=h+r,y=n[p],c[h]={x:s.parse(Gu(y,a),p),y:o.parse(Gu(y,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:bS(i,!0),values:n._stacks[e.axis]._visualValues};return gx(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=gx(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=h4(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=a4(a);let p,y;function w(){y=i[p];const E=y[a.axis];return!ot(y[e.axis])||h>E||f<E}for(p=0;p<o&&!(!w()&&(this.updateRangeFromParsed(c,e,y,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!w()){this.updateRangeFromParsed(c,e,y,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],ot(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=i4(ue(this.options.clip,r4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const f=i[h];f.hidden||(f.active&&c?o.push(f):f.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=u4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=c4(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Qu(r);if(a)return _x(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),y=Object.keys($e.elements[e]),w=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(p,y,w,f);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(_x(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(p,this.getContext(e,r,n))}const c=new wS(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||cf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){cf(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!cf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Bo(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}se(Qc,"defaults",{}),se(Qc,"datasetElementType",null),se(Qc,"dataElementType",null);function Ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Xg{constructor(e){se(this,"options");this.options=e||{}}static override(e){Object.assign(Xg.prototype,e)}init(){}formats(){return Ti()}parse(){return Ti()}format(){return Ti()}add(){return Ti()}diff(){return Ti()}startOf(){return Ti()}endOf(){return Ti()}}var d4={_date:Xg};function f4(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?zO:Op;if(r){if(i._sharedOptions){const h=s[0],f=typeof h.getRange=="function"&&h.getRange(e);if(f){const p=c(s,e,n-f),y=c(s,e,n+f);return{lo:p.lo,hi:y.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:p}=t,y=p.slice(0,h.lo+1).reverse().findIndex(E=>!Ee(E[f.axis]));h.lo-=Math.max(0,y);const w=p.slice(h.hi).findIndex(E=>!Ee(E[f.axis]));h.hi+=Math.max(0,w)}return h}}return{lo:0,hi:s.length-1}}function wl(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:f,hi:p}=f4(s[a],e,o,i);for(let y=f;y<=p;++y){const w=h[y];w.skip||r(w,c,y)}}}function p4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function uf(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||wl(t,n,e,function(a,l,c){!i&&!tr(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function m4(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:f}=FO(o,{x:e.x,y:e.y});oS(f,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return wl(t,n,e,s),i}function g4(t,e,n,r,i,s){let o=[];const a=p4(n);let l=Number.POSITIVE_INFINITY;function c(h,f,p){const y=h.inRange(e.x,e.y,i);if(r&&!y)return;const w=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(w))&&!y)return;const S=a(e,w);S<l?(o=[{element:h,datasetIndex:f,index:p}],l=S):S===l&&o.push({element:h,datasetIndex:f,index:p})}return wl(t,n,e,c),o}function hf(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?m4(t,e,n,i):g4(t,e,n,r,i,s)}function xx(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return wl(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var y4={evaluateInteractionItems:wl,modes:{index(t,e,n,r){const i=Ai(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?uf(t,i,s,r,o):hf(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,f=c.data[h];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=Ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?uf(t,i,s,r,o):hf(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=Ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return uf(t,i,s,r,o)},nearest(t,e,n,r){const i=Ai(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return hf(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Ai(e,t);return xx(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Ai(e,t);return xx(t,i,"y",n.intersect,r)}}};const ES=["left","top","right","bottom"];function zo(t,e){return t.filter(n=>n.pos===e)}function wx(t,e){return t.filter(n=>ES.indexOf(n.pos)===-1&&n.box.axis===e)}function $o(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function v4(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function _4(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!ES.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function x4(t,e){const n=_4(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function w4(t){const e=v4(t),n=$o(e.filter(c=>c.box.fullSize),!0),r=$o(zo(e,"left"),!0),i=$o(zo(e,"right")),s=$o(zo(e,"top"),!0),o=$o(zo(e,"bottom")),a=wx(e,"x"),l=wx(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:zo(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function bx(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function TS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function b4(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!me(i)){n.size&&(t[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?s.height:s.width),n.size=f.size/f.count,t[i]+=n.size}s.getPadding&&TS(o,s.getPadding());const a=Math.max(0,e.outerWidth-bx(o,t,"left","right")),l=Math.max(0,e.outerHeight-bx(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function E4(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function T4(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function na(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,T4(a.horizontal,e));const{same:f,other:p}=b4(e,n,a,r);c|=f&&i.length,h=h||p,l.fullSize||i.push(a)}return c&&na(i,e,n,r)||h}function yc(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Ex(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*h,p=c.size||l.height;Qu(c.start)&&(o=c.start),l.fullSize?yc(l,i.left,o,n.outerWidth-i.right-i.left,p):yc(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*h,p=c.size||l.width;Qu(c.start)&&(s=c.start),l.fullSize?yc(l,s,i.top,p,n.outerHeight-i.bottom-i.top):yc(l,s,e.top+c.placed,p,f),c.start=s,c.placed+=f,s=l.right}}e.x=s,e.y=o}var ln={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ct(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=w4(t.boxes),l=a.vertical,c=a.horizontal;ve(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,S)=>S.box.options&&S.box.options.display===!1?E:E+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},i);TS(p,Ct(r));const y=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),w=x4(l.concat(c),f);na(a.fullSize,y,f,w),na(l,y,f,w),na(c,y,f,w)&&na(l,y,f,w),E4(y),Ex(a.leftAndTop,y,f,w),y.x+=y.w,y.y+=y.h,Ex(a.rightAndBottom,y,f,w),t.chartArea={left:y.left,top:y.top,right:y.left+y.w,bottom:y.top+y.h,height:y.h,width:y.w},ve(a.chartArea,E=>{const S=E.box;Object.assign(S,t.chartArea),S.update(y.w,y.h,{left:0,top:0,right:0,bottom:0})})}};class SS{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class S4 extends SS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Yc="$chartjs",I4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Tx=t=>t===null||t==="";function k4(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Yc]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Tx(i)){const s=ux(t,"width");s!==void 0&&(t.width=s)}if(Tx(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=ux(t,"height");s!==void 0&&(t.height=s)}return t}const IS=LL?{passive:!0}:!1;function C4(t,e,n){t&&t.addEventListener(e,n,IS)}function A4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,IS)}function P4(t,e){const n=I4[t.type]||t.type,{x:r,y:i}=Ai(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function th(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function N4(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||th(a.addedNodes,r),o=o&&!th(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function R4(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||th(a.removedNodes,r),o=o&&!th(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const tl=new Map;let Sx=0;function kS(){const t=window.devicePixelRatio;t!==Sx&&(Sx=t,tl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function D4(t,e){tl.size||window.addEventListener("resize",kS),tl.set(t,e)}function M4(t){tl.delete(t),tl.size||window.removeEventListener("resize",kS)}function j4(t,e,n){const r=t.canvas,i=r&&Yg(r);if(!i)return;const s=cS((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),D4(t,s),o}function df(t,e,n){n&&n.disconnect(),e==="resize"&&M4(t)}function O4(t,e,n){const r=t.canvas,i=cS(s=>{t.ctx!==null&&n(P4(s,t))},t);return C4(r,e,i),i}class L4 extends SS{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(k4(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Yc])return!1;const r=n[Yc].initial;["height","width"].forEach(s=>{const o=r[s];Ee(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Yc],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:N4,detach:R4,resize:j4}[n]||O4;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:df,detach:df,resize:df}[n]||A4)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return OL(e,n,r,i)}isAttached(e){const n=e&&Yg(e);return!!(n&&n.isConnected)}}function V4(t){return!Qg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?S4:L4}class pr{constructor(){se(this,"x");se(this,"y");se(this,"active",!1);se(this,"options");se(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Xu(this.x)&&Xu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}se(pr,"defaults",{}),se(pr,"defaultRoutes");function F4(t,e){const n=t.options.ticks,r=U4(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?z4(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return $4(e,c,s,o/i),c;const h=B4(s,e,i);if(o>0){let f,p;const y=o>1?Math.round((l-a)/(o-1)):null;for(vc(e,c,h,Ee(y)?0:a-y,a),f=0,p=o-1;f<p;f++)vc(e,c,h,s[f],s[f+1]);return vc(e,c,h,l,Ee(y)?e.length:l+y),c}return vc(e,c,h),c}function U4(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function B4(t,e,n){const r=H4(t),i=e.length/n;if(!r)return Math.max(i,1);const s=OO(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function z4(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function $4(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function vc(t,e,n,r,i){const s=ue(r,0),o=Math.min(ue(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function H4(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const W4=t=>t==="left"?"right":t==="right"?"left":t,Ix=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,kx=(t,e)=>Math.min(e||t,t);function Cx(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function q4(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function K4(t,e){ve(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Ho(t){return t.drawTicks?t.tickLength:0}function Ax(t,e){if(!t.display)return 0;const n=nt(t.font,e),r=Ct(t.padding);return(Oe(t.text)?t.text.length:1)*n.lineHeight+r.height}function G4(t,e){return yi(t,{scale:e,type:"scale"})}function Q4(t,e,n){return yi(t,{tick:n,index:e,type:"tick"})}function Y4(t,e,n){let r=Bg(t);return(n&&e!=="right"||!n&&e==="right")&&(r=W4(r)),r}function X4(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let f=0,p,y,w;const E=o-i,S=a-s;if(t.isHorizontal()){if(y=bt(r,s,a),me(n)){const b=Object.keys(n)[0],x=n[b];w=h[b].getPixelForValue(x)+E-e}else n==="center"?w=(c.bottom+c.top)/2+E-e:w=Ix(t,n,e);p=a-s}else{if(me(n)){const b=Object.keys(n)[0],x=n[b];y=h[b].getPixelForValue(x)-S+e}else n==="center"?y=(c.left+c.right)/2-S+e:y=Ix(t,n,e);w=bt(r,o,i),f=n==="left"?-Xt:Xt}return{titleX:y,titleY:w,maxWidth:p,rotation:f}}class ss extends pr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Kt(e,Number.POSITIVE_INFINITY),n=Kt(n,Number.NEGATIVE_INFINITY),r=Kt(r,Number.POSITIVE_INFINITY),i=Kt(i,Number.NEGATIVE_INFINITY),{min:Kt(e,r),max:Kt(n,i),minDefined:ot(e),maxDefined:ot(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Kt(n,Kt(r,n)),max:Kt(r,Kt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){we(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pL(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Cx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=F4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){we(this.options.afterUpdate,[this])}beforeSetDimensions(){we(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){we(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),we(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){we(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=we(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){we(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){we(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=kx(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),f=h.widest.width,p=h.highest.height,y=Nn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:y/(r-1),f+6>a&&(a=y/(r-(e.offset?.5:1)),l=this.maxHeight-Ho(e.grid)-n.padding-Ax(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=Fg(Math.min(Math.asin(Nn((h.highest.height+6)/a,-1,1)),Math.asin(Nn(l/c,-1,1))-Math.asin(Nn(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){we(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){we(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ax(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ho(s)+l):(e.height=this.maxHeight,e.width=Ho(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:f,highest:p}=this._getLabelSizes(),y=r.padding*2,w=Fr(this.labelRotation),E=Math.cos(w),S=Math.sin(w);if(a){const b=r.mirror?0:S*f.width+E*p.height;e.height=Math.min(this.maxHeight,e.height+b+y)}else{const b=r.mirror?0:E*f.width+S*p.height;e.width=Math.min(this.maxWidth,e.width+b+y)}this._calculatePadding(c,h,S,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,y=0;l?c?(p=i*e.width,y=r*n.height):(p=r*e.height,y=i*n.width):s==="start"?y=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,y=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((y-f+o)*this.width/(this.width-f),0)}else{let h=n.height/2,f=e.height/2;s==="start"?(h=0,f=e.height):s==="end"&&(h=n.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){we(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Ee(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Cx(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/kx(n,r));let c=0,h=0,f,p,y,w,E,S,b,x,I,P,M;for(f=0;f<n;f+=l){if(w=e[f].label,E=this._resolveTickFontOptions(f),i.font=S=E.string,b=s[S]=s[S]||{data:{},gc:[]},x=E.lineHeight,I=P=0,!Ee(w)&&!Oe(w))I=Ju(i,b.data,b.gc,I,w),P=x;else if(Oe(w))for(p=0,y=w.length;p<y;++p)M=w[p],!Ee(M)&&!Oe(M)&&(I=Ju(i,b.data,b.gc,I,M),P+=x);o.push(I),a.push(P),c=Math.max(I,c),h=Math.max(P,h)}K4(s,n);const C=o.indexOf(c),_=a.indexOf(h),v=k=>({width:o[k]||0,height:a[k]||0});return{first:v(0),last:v(n-1),widest:v(C),highest:v(_),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return BO(this._alignToPixels?Ei(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=Q4(this.getContext(),e,r))}return this.$context||(this.$context=G4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Fr(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=Ho(s),y=[],w=a.setContext(this.getContext()),E=w.display?w.width:0,S=E/2,b=function(Se){return Ei(r,Se,E)};let x,I,P,M,C,_,v,k,A,R,D,N;if(o==="top")x=b(this.bottom),_=this.bottom-p,k=x-S,R=b(e.top)+S,N=e.bottom;else if(o==="bottom")x=b(this.top),R=e.top,N=b(e.bottom)-S,_=x+S,k=this.top+p;else if(o==="left")x=b(this.right),C=this.right-p,v=x-S,A=b(e.left)+S,D=e.right;else if(o==="right")x=b(this.left),A=e.left,D=b(e.right)-S,C=x+S,v=this.left+p;else if(n==="x"){if(o==="center")x=b((e.top+e.bottom)/2+.5);else if(me(o)){const Se=Object.keys(o)[0],Ne=o[Se];x=b(this.chart.scales[Se].getPixelForValue(Ne))}R=e.top,N=e.bottom,_=x+S,k=_+p}else if(n==="y"){if(o==="center")x=b((e.left+e.right)/2);else if(me(o)){const Se=Object.keys(o)[0],Ne=o[Se];x=b(this.chart.scales[Se].getPixelForValue(Ne))}C=x-S,v=C-p,A=e.left,D=e.right}const Te=ue(i.ticks.maxTicksLimit,f),pe=Math.max(1,Math.ceil(f/Te));for(I=0;I<f;I+=pe){const Se=this.getContext(I),Ne=s.setContext(Se),q=a.setContext(Se),J=Ne.lineWidth,Z=Ne.color,ge=q.dash||[],O=q.dashOffset,$=Ne.tickWidth,H=Ne.tickColor,F=Ne.tickBorderDash||[],De=Ne.tickBorderDashOffset;P=q4(this,I,l),P!==void 0&&(M=Ei(r,P,J),c?C=v=A=D=M:_=k=R=N=M,y.push({tx1:C,ty1:_,tx2:v,ty2:k,x1:A,y1:R,x2:D,y2:N,width:J,color:Z,borderDash:ge,borderDashOffset:O,tickWidth:$,tickColor:H,tickBorderDash:F,tickBorderDashOffset:De}))}return this._ticksLength=f,this._borderValue=x,y}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:f}=s,p=Ho(r.grid),y=p+h,w=f?-h:y,E=-Fr(this.labelRotation),S=[];let b,x,I,P,M,C,_,v,k,A,R,D,N="middle";if(i==="top")C=this.bottom-w,_=this._getXAxisLabelAlignment();else if(i==="bottom")C=this.top+w,_=this._getXAxisLabelAlignment();else if(i==="left"){const pe=this._getYAxisLabelAlignment(p);_=pe.textAlign,M=pe.x}else if(i==="right"){const pe=this._getYAxisLabelAlignment(p);_=pe.textAlign,M=pe.x}else if(n==="x"){if(i==="center")C=(e.top+e.bottom)/2+y;else if(me(i)){const pe=Object.keys(i)[0],Se=i[pe];C=this.chart.scales[pe].getPixelForValue(Se)+y}_=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")M=(e.left+e.right)/2-y;else if(me(i)){const pe=Object.keys(i)[0],Se=i[pe];M=this.chart.scales[pe].getPixelForValue(Se)}_=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?N="top":l==="end"&&(N="bottom"));const Te=this._getLabelSizes();for(b=0,x=a.length;b<x;++b){I=a[b],P=I.label;const pe=s.setContext(this.getContext(b));v=this.getPixelForTick(b)+s.labelOffset,k=this._resolveTickFontOptions(b),A=k.lineHeight,R=Oe(P)?P.length:1;const Se=R/2,Ne=pe.color,q=pe.textStrokeColor,J=pe.textStrokeWidth;let Z=_;o?(M=v,_==="inner"&&(b===x-1?Z=this.options.reverse?"left":"right":b===0?Z=this.options.reverse?"right":"left":Z="center"),i==="top"?c==="near"||E!==0?D=-R*A+A/2:c==="center"?D=-Te.highest.height/2-Se*A+A:D=-Te.highest.height+A/2:c==="near"||E!==0?D=A/2:c==="center"?D=Te.highest.height/2-Se*A:D=Te.highest.height-R*A,f&&(D*=-1),E!==0&&!pe.showLabelBackdrop&&(M+=A/2*Math.sin(E))):(C=v,D=(1-R)*A/2);let ge;if(pe.showLabelBackdrop){const O=Ct(pe.backdropPadding),$=Te.heights[b],H=Te.widths[b];let F=D-O.top,De=0-O.left;switch(N){case"middle":F-=$/2;break;case"bottom":F-=$;break}switch(_){case"center":De-=H/2;break;case"right":De-=H;break;case"inner":b===x-1?De-=H:b>0&&(De-=H/2);break}ge={left:De,top:F,width:H+O.width,height:$+O.height,color:pe.backdropColor}}S.push({label:P,font:k,textOffset:D,options:{rotation:E,color:Ne,strokeColor:q,strokeWidth:J,textAlign:Z,textBaseline:N,translation:[M,C],backdrop:ge}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Fr(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,f,p;this.isHorizontal()?(c=Ei(e,this.left,o)-o/2,h=Ei(e,this.right,a)+a/2,f=p=l):(f=Ei(e,this.top,o)-o/2,p=Ei(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,f),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Hg(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;Ji(r,c,0,h,l,a)}i&&Wg(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=nt(r.font),o=Ct(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||me(n)?(l+=o.bottom,Oe(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:f,rotation:p}=X4(this,l,n,a);Ji(e,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:p,textAlign:Y4(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ue(e.grid&&e.grid.z,-1),i=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ss.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return nt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class _c{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;eV(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,J4(e,o,r),this.override&&$e.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in $e[i]&&(delete $e[i][r],this.override&&delete Xi[r])}}function J4(t,e,n){const r=el(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,r),t.defaultRoutes&&Z4(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function Z4(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");$e.route(s,i,l,a)})}function eV(t){return"id"in t&&"defaults"in t}class tV{constructor(){this.controllers=new _c(Qc,"datasets",!0),this.elements=new _c(pr,"elements"),this.plugins=new _c(Object,"plugins"),this.scales=new _c(ss,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ve(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=Vg(e);we(r["before"+i],[],r),n[e](r),we(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var kn=new tV;class nV{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(we(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ue(r.options&&r.options.plugins,{}),s=rV(r);return i===!1&&!n?[]:sV(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function rV(t){const e={},n=[],r=Object.keys(kn.plugins.items);for(let s=0;s<r.length;s++)n.push(kn.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function iV(t,e){return!e&&t===!1?null:t===!0?{}:t}function sV(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=iV(r[l],i);c!==null&&s.push({plugin:a,options:oV(t.config,{plugin:a,local:n[l]},c,o)})}return s}function oV(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Fp(t,e){const n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function aV(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function lV(t,e){return t===e?"_index_":"_value_"}function Px(t){if(t==="x"||t==="y"||t==="r")return t}function cV(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Up(t,...e){if(Px(t))return t;for(const n of e){const r=n.axis||cV(n.position)||t.length>1&&Px(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Nx(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function uV(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Nx(t,"x",n[0])||Nx(t,"y",n[0])}return{}}function hV(t,e){const n=Xi[t.type]||{scales:{}},r=e.scales||{},i=Fp(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Up(o,a,uV(o,t),$e.scales[a.type]),c=lV(l,i),h=n.scales||{};s[o]=xa(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Fp(a,e),h=(Xi[a]||{}).scales||{};Object.keys(h).forEach(f=>{const p=aV(f,l),y=o[p+"AxisID"]||p;s[y]=s[y]||Object.create(null),xa(s[y],[{axis:p},r[y],h[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];xa(a,[$e.scales[a.type],$e.scale])}),s}function CS(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=hV(t,e)}function AS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function dV(t){return t=t||{},t.data=AS(t.data),CS(t),t}const Rx=new Map,PS=new Set;function xc(t,e){let n=Rx.get(t);return n||(n=e(),Rx.set(t,n),PS.add(n)),n}const Wo=(t,e,n)=>{const r=Gu(e,n);r!==void 0&&t.add(r)};class fV{constructor(e){this._config=dV(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=AS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),CS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return xc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return xc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return xc(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(f=>Wo(l,e,f))),h.forEach(f=>Wo(l,i,f)),h.forEach(f=>Wo(l,Xi[s]||{},f)),h.forEach(f=>Wo(l,$e,f)),h.forEach(f=>Wo(l,Lp,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),PS.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Xi[n]||{},$e.datasets[n]||{},{type:n},$e,Lp]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Dx(this._resolverCache,e,i);let l=o;if(mV(o,n)){s.$shared=!1,r=hi(r)?r():r;const c=this.createResolver(e,r,a);l=so(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=Dx(this._resolverCache,e,r);return me(n)?so(s,n,void 0,i):s}}function Dx(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:qg(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const pV=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>hi(t[e]));function mV(t,e){const{isScriptable:n,isIndexable:r}=fS(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(hi(a)||pV(a))||o&&Oe(a))return!0}return!1}var gV="4.5.0";const yV=["top","bottom","left","right","chartArea"];function Mx(t,e){return t==="top"||t==="bottom"||yV.indexOf(t)===-1&&e==="x"}function jx(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Ox(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),we(n&&n.onComplete,[t],e)}function vV(t){const e=t.chart,n=e.options.animation;we(n&&n.onProgress,[t],e)}function NS(t){return Qg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Xc={},Lx=t=>{const e=NS(t);return Object.values(Xc).filter(n=>n.canvas===e).pop()};function _V(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function xV(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}class Sr{static register(...e){kn.add(...e),Vx()}static unregister(...e){kn.remove(...e),Vx()}constructor(e,n){const r=this.config=new fV(n),i=NS(e),s=Lx(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||V4(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=kO(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nV,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=qO(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Xc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}qn.listen(this,"complete",Ox),qn.listen(this,"progress",vV),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Ee(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ox(this.canvas,this.ctx),this}stop(){return qn.stop(this),this}resize(e,n){qn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,cx(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),we(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ve(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Up(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ve(s,o=>{const a=o.options,l=a.id,c=Up(l,a),h=ue(a.type,o.dtype);(a.position===void 0||Mx(a.position,c)!==Mx(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in r&&r[l].type===h)f=r[l];else{const p=kn.getScale(h);f=new p({id:l,type:h,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),ve(i,(o,a)=>{o||delete r[a]}),ve(r,o=>{ln.configure(this,o,o.options),ln.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(jx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Fp(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=kn.getController(a),{datasetElementType:c,dataElementType:h}=$e.datasets[a];Object.assign(l,{dataElementType:kn.getElement(h),datasetElementType:c&&kn.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ve(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:f}=this.getDatasetMeta(c),p=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ve(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(jx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,e=>{ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!X_(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;_V(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!X_(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ln.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ve(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,hi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(qn.has(this)?this.attached&&!qn.running(this)&&qn.start(this):(this.draw(),Ox({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=XL(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Hg(n,i),e.controller.draw(),i&&Wg(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return tr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=y4.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=yi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Qu(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),qn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ox(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Xc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ve(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ve(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ve(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!qu(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=DO(e),c=xV(e,this._lastEvent,r,l);r&&(this._lastEvent=null,we(s.onHover,[e,a,this],this),l&&we(s.onClick,[e,a,this],this));const h=!qu(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}se(Sr,"defaults",$e),se(Sr,"instances",Xc),se(Sr,"overrides",Xi),se(Sr,"registry",kn),se(Sr,"version",gV),se(Sr,"getChart",Lx);function Vx(){return ve(Sr.instances,t=>t._plugins.invalidate())}function RS(t,e,n=e){t.lineCap=ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(n.borderDash,e.borderDash)),t.lineDashOffset=ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(n.borderWidth,e.borderWidth),t.strokeStyle=ue(n.borderColor,e.borderColor)}function wV(t,e,n){t.lineTo(n.x,n.y)}function bV(t){return t.stepped?iL:t.tension||t.cubicInterpolationMode==="monotone"?sL:wV}function DS(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function EV(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=DS(i,n,r),h=bV(s);let{move:f=!0,reverse:p}=r||{},y,w,E;for(y=0;y<=c;++y)w=i[(a+(p?c-y:y))%o],!w.skip&&(f?(t.moveTo(w.x,w.y),f=!1):h(t,E,w,p,s.stepped),E=w);return l&&(w=i[(a+(p?c:0))%o],h(t,E,w,p,s.stepped)),!!l}function TV(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=DS(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,f=0,p,y,w,E,S,b;const x=P=>(o+(c?a-P:P))%s,I=()=>{E!==S&&(t.lineTo(h,S),t.lineTo(h,E),t.lineTo(h,b))};for(l&&(y=i[x(0)],t.moveTo(y.x,y.y)),p=0;p<=a;++p){if(y=i[x(p)],y.skip)continue;const P=y.x,M=y.y,C=P|0;C===w?(M<E?E=M:M>S&&(S=M),h=(f*h+P)/++f):(I(),t.lineTo(P,M),w=C,f=0,E=S=M),b=M}I()}function Bp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?TV:EV}function SV(t){return t.stepped?VL:t.tension||t.cubicInterpolationMode==="monotone"?FL:Pi}function IV(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),RS(t,e.options),t.stroke(i)}function kV(t,e,n,r){const{segments:i,options:s}=e,o=Bp(e);for(const a of i)RS(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const CV=typeof Path2D=="function";function AV(t,e,n,r){CV&&!e.options.segment?IV(t,e,n,r):kV(t,e,n,r)}class ra extends pr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;PL(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=KL(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=HL(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=SV(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:f,end:p}=o[c],y=s[f],w=s[p];if(y===w){a.push(y);continue}const E=Math.abs((i-y[n])/(w[n]-y[n])),S=l(y,w,E,r.stepped);S[n]=e[n],a.push(S)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Bp(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Bp(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),AV(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}se(ra,"id","line"),se(ra,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),se(ra,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),se(ra,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Fx(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Jc extends pr{constructor(n){super();se(this,"parsed");se(this,"skip");se(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Fx(this,n,"x",r)}inYRange(n,r){return Fx(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!tr(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Vp(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}se(Jc,"id","point"),se(Jc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),se(Jc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Ux=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},PV=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Bx extends pr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=we(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=nt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Ux(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let f=e;s.textAlign="left",s.textBaseline="middle";let p=-1,y=-h;return this.legendItems.forEach((w,E)=>{const S=r+n/2+s.measureText(w.text).width;(E===0||c[c.length-1]+S+2*a>o)&&(f+=h,c[c.length-(E>0?0:1)]=0,y+=h,p++),l[E]={left:0,top:y,row:p,width:S,height:i},c[c.length-1]+=S+a}),f}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let f=a,p=0,y=0,w=0,E=0;return this.legendItems.forEach((S,b)=>{const{itemWidth:x,itemHeight:I}=NV(r,n,s,S,i);b>0&&y+I+2*a>h&&(f+=p+a,c.push({width:p,height:y}),w+=p+a,E++,p=y=0),l[b]={left:w,top:y,col:E,width:x,height:I},p=Math.max(p,x),y+=I+a}),f+=p,c.push({width:p,height:y}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=zs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=bt(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=bt(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=bt(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=bt(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Hg(e,this),this._draw(),Wg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=$e.color,l=zs(e.rtl,this.left,this.width),c=nt(o.font),{padding:h}=o,f=c.size,p=f/2;let y;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:w,boxHeight:E,itemHeight:S}=Ux(o,f),b=function(C,_,v){if(isNaN(w)||w<=0||isNaN(E)||E<0)return;i.save();const k=ue(v.lineWidth,1);if(i.fillStyle=ue(v.fillStyle,a),i.lineCap=ue(v.lineCap,"butt"),i.lineDashOffset=ue(v.lineDashOffset,0),i.lineJoin=ue(v.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=ue(v.strokeStyle,a),i.setLineDash(ue(v.lineDash,[])),o.usePointStyle){const A={radius:E*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:k},R=l.xPlus(C,w/2),D=_+p;hS(i,A,R,D,o.pointStyleWidth&&w)}else{const A=_+Math.max((f-E)/2,0),R=l.leftForLtr(C,w),D=Bs(v.borderRadius);i.beginPath(),Object.values(D).some(N=>N!==0)?Zu(i,{x:R,y:A,w,h:E,radius:D}):i.rect(R,A,w,E),i.fill(),k!==0&&i.stroke()}i.restore()},x=function(C,_,v){Ji(i,v.text,C,_+S/2,c,{strikethrough:v.hidden,textAlign:l.textAlign(v.textAlign)})},I=this.isHorizontal(),P=this._computeTitleHeight();I?y={x:bt(s,this.left+h,this.right-r[0]),y:this.top+h+P,line:0}:y={x:this.left+h,y:bt(s,this.top+P+h,this.bottom-n[0].height),line:0},vS(this.ctx,e.textDirection);const M=S+h;this.legendItems.forEach((C,_)=>{i.strokeStyle=C.fontColor,i.fillStyle=C.fontColor;const v=i.measureText(C.text).width,k=l.textAlign(C.textAlign||(C.textAlign=o.textAlign)),A=w+p+v;let R=y.x,D=y.y;l.setWidth(this.width),I?_>0&&R+A+h>this.right&&(D=y.y+=M,y.line++,R=y.x=bt(s,this.left+h,this.right-r[y.line])):_>0&&D+M>this.bottom&&(R=y.x=R+n[y.line].width+h,y.line++,D=y.y=bt(s,this.top+P+h,this.bottom-n[y.line].height));const N=l.x(R);if(b(N,D,C),R=KO(k,R+w+p,I?R+A:this.right,e.rtl),x(l.x(R),D,C),I)y.x+=A+h;else if(typeof C.text!="string"){const Te=c.lineHeight;y.y+=MS(C,Te)+h}else y.y+=M}),_S(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=nt(n.font),i=Ct(n.padding);if(!n.display)return;const s=zs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,f=bt(e.align,f,this.right-p);else{const w=this.columnSizes.reduce((E,S)=>Math.max(E,S.height),0);h=c+bt(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const y=bt(a,f,f+p);o.textAlign=s.textAlign(Bg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ji(o,n.text,y,h,r)}_computeTitleHeight(){const e=this.options.title,n=nt(e.font),r=Ct(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(ta(e,this.left,this.right)&&ta(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ta(e,i.left,i.left+i.width)&&ta(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!MV(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=PV(i,r);i&&!s&&we(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&we(n.onHover,[e,r,this],this)}else r&&we(n.onClick,[e,r,this],this)}}function NV(t,e,n,r,i){const s=RV(r,t,e,n),o=DV(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function RV(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function DV(t,e,n){let r=t;return typeof e.text!="string"&&(r=MS(e,n)),r}function MS(t,e){const n=t.text?t.text.length:0;return e*n}function MV(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var jV={id:"legend",_element:Bx,start(t,e,n){const r=t.legend=new Bx({ctx:t.ctx,options:n,chart:t});ln.configure(t,r,n),ln.addBox(t,r)},stop(t){ln.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;ln.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=Ct(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class jS extends pr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Oe(r.text)?r.text.length:1;this._padding=Ct(r.padding);const s=i*nt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,f;return this.isHorizontal()?(h=bt(a,r,s),f=n+e,c=s-r):(o.position==="left"?(h=r+e,f=bt(a,i,n),l=Xe*-.5):(h=s-e,f=bt(a,n,i),l=Xe*.5),c=i-n),{titleX:h,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=nt(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Ji(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Bg(n.align),textBaseline:"middle",translation:[o,a]})}}function OV(t,e){const n=new jS({ctx:t.ctx,options:e,chart:t});ln.configure(t,n,e),ln.addBox(t,n),t.titleBlock=n}var LV={id:"title",_element:jS,start(t,e,n){OV(t,n)},stop(t){const e=t.titleBlock;ln.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;ln.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ia={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=jp(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Sn(t,e){return e&&(Oe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Kn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function VV(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function zx(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=nt(e.bodyFont),c=nt(e.titleFont),h=nt(e.footerFont),f=s.length,p=i.length,y=r.length,w=Ct(e.padding);let E=w.height,S=0,b=r.reduce((P,M)=>P+M.before.length+M.lines.length+M.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,f&&(E+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),b){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=y*P+(b-y)*l.lineHeight+(b-1)*e.bodySpacing}p&&(E+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let x=0;const I=function(P){S=Math.max(S,n.measureText(P).width+x)};return n.save(),n.font=c.string,ve(t.title,I),n.font=l.string,ve(t.beforeBody.concat(t.afterBody),I),x=e.displayColors?o+2+e.boxPadding:0,ve(r,P=>{ve(P.before,I),ve(P.lines,I),ve(P.after,I)}),x=0,n.font=h.string,ve(t.footer,I),n.restore(),S+=w.width,{width:S,height:E}}function FV(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function UV(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function BV(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),UV(c,t,e,n)&&(c="center"),c}function $x(t,e,n){const r=n.yAlign||e.yAlign||FV(t,n);return{xAlign:n.xAlign||e.xAlign||BV(t,e,n,r),yAlign:r}}function zV(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function $V(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Hx(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:y}=Bs(o);let w=zV(e,a);const E=$V(e,l,c);return l==="center"?a==="left"?w+=c:a==="right"&&(w-=c):a==="left"?w-=Math.max(h,p)+i:a==="right"&&(w+=Math.max(f,y)+i),{x:Nn(w,0,r.width-e.width),y:Nn(E,0,r.height-e.height)}}function wc(t,e,n){const r=Ct(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Wx(t){return Sn([],Kn(t))}function HV(t,e,n){return yi(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function qx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const OS={beforeTitle:Wn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Wn,beforeBody:Wn,beforeLabel:Wn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ee(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Wn,afterBody:Wn,beforeFooter:Wn,footer:Wn,afterFooter:Wn};function Ot(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?OS[e].call(n,r):i}class zp extends pr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new wS(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=HV(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Ot(r,"beforeTitle",this,e),s=Ot(r,"title",this,e),o=Ot(r,"afterTitle",this,e);let a=[];return a=Sn(a,Kn(i)),a=Sn(a,Kn(s)),a=Sn(a,Kn(o)),a}getBeforeBody(e,n){return Wx(Ot(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ve(e,s=>{const o={before:[],lines:[],after:[]},a=qx(r,s);Sn(o.before,Kn(Ot(a,"beforeLabel",this,s))),Sn(o.lines,Ot(a,"label",this,s)),Sn(o.after,Kn(Ot(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Wx(Ot(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Ot(r,"beforeFooter",this,e),s=Ot(r,"footer",this,e),o=Ot(r,"afterFooter",this,e);let a=[];return a=Sn(a,Kn(i)),a=Sn(a,Kn(s)),a=Sn(a,Kn(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(VV(this.chart,n[l]));return e.filter&&(a=a.filter((h,f,p)=>e.filter(h,f,p,r))),e.itemSort&&(a=a.sort((h,f)=>e.itemSort(h,f,r))),ve(a,h=>{const f=qx(e.callbacks,h);i.push(Ot(f,"labelColor",this,h)),s.push(Ot(f,"labelPointStyle",this,h)),o.push(Ot(f,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=ia[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=zx(this,r),c=Object.assign({},a,l),h=$x(this.chart,r,c),f=Hx(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:f}=Bs(a),{x:p,y}=e,{width:w,height:E}=n;let S,b,x,I,P,M;return s==="center"?(P=y+E/2,i==="left"?(S=p,b=S-o,I=P+o,M=P-o):(S=p+w,b=S+o,I=P-o,M=P+o),x=S):(i==="left"?b=p+Math.max(l,h)+o:i==="right"?b=p+w-Math.max(c,f)-o:b=this.caretX,s==="top"?(I=y,P=I-o,S=b-o,x=b+o):(I=y+E,P=I+o,S=b+o,x=b-o),M=I),{x1:S,x2:b,x3:x,y1:I,y2:P,y3:M}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=zs(r.rtl,this.x,this.width);for(e.x=wc(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=nt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=nt(s.bodyFont),f=wc(this,"left",s),p=i.x(f),y=l<h.lineHeight?(h.lineHeight-l)/2:0,w=n.y+y;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},S=i.leftForLtr(p,c)+c/2,b=w+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Vp(e,E,S,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Vp(e,E,S,b)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(p,c),S=i.leftForLtr(i.xPlus(p,1),c-2),b=Bs(o.borderRadius);Object.values(b).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Zu(e,{x:E,y:w,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Zu(e,{x:S,y:w+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,w,c,l),e.strokeRect(E,w,c,l),e.fillStyle=o.backgroundColor,e.fillRect(S,w+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,f=nt(r.bodyFont);let p=f.lineHeight,y=0;const w=zs(r.rtl,this.x,this.width),E=function(v){n.fillText(v,w.x(e.x+y),e.y+p/2),e.y+=p+s},S=w.textAlign(o);let b,x,I,P,M,C,_;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=wc(this,S,r),n.fillStyle=r.bodyColor,ve(this.beforeBody,E),y=a&&S!=="right"?o==="center"?c/2+h:c+2+h:0,P=0,C=i.length;P<C;++P){for(b=i[P],x=this.labelTextColors[P],n.fillStyle=x,ve(b.before,E),I=b.lines,a&&I.length&&(this._drawColorBox(n,e,P,w,r),p=Math.max(f.lineHeight,l)),M=0,_=I.length;M<_;++M)E(I[M]),p=f.lineHeight;ve(b.after,E)}y=0,p=f.lineHeight,ve(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=zs(r.rtl,this.x,this.width);for(e.x=wc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=nt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:f,topRight:p,bottomLeft:y,bottomRight:w}=Bs(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-w),n.quadraticCurveTo(a+c,l+h,a+c-w,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+y,l+h),n.quadraticCurveTo(a,l+h,a,l+h-y),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=ia[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=zx(this,e),l=Object.assign({},o,this._size),c=$x(n,e,l),h=Hx(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ct(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),vS(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),_S(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!qu(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!qu(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=ia[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}se(zp,"positioners",ia);var WV={id:"tooltip",_element:zp,positioners:ia,afterInit(t,e,n){n&&(t.tooltip=new zp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:OS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const qV=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function KV(t,e,n,r){const i=t.indexOf(e);if(i===-1)return qV(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const GV=(t,e)=>t===null?null:Nn(Math.round(t),0,e);function Kx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class $p extends ss{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ee(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:KV(r,e,ue(n,e),this._addedLabels),GV(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Kx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}se($p,"id","category"),se($p,"defaults",{ticks:{callback:Kx}});function QV(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:f,includeBounds:p}=t,y=s||1,w=h-1,{min:E,max:S}=e,b=!Ee(o),x=!Ee(a),I=!Ee(c),P=(S-E)/(f+1);let M=Z_((S-E)/w/y)*y,C,_,v,k;if(M<1e-14&&!b&&!x)return[{value:E},{value:S}];k=Math.ceil(S/M)-Math.floor(E/M),k>w&&(M=Z_(k*M/w/y)*y),Ee(l)||(C=Math.pow(10,l),M=Math.ceil(M*C)/C),i==="ticks"?(_=Math.floor(E/M)*M,v=Math.ceil(S/M)*M):(_=E,v=S),b&&x&&s&&VO((a-o)/s,M/1e3)?(k=Math.round(Math.min((a-o)/M,h)),M=(a-o)/k,_=o,v=a):I?(_=b?o:_,v=x?a:v,k=c-1,M=(v-_)/k):(k=(v-_)/M,wa(k,Math.round(k),M/1e3)?k=Math.round(k):k=Math.ceil(k));const A=Math.max(ex(M),ex(_));C=Math.pow(10,Ee(l)?A:l),_=Math.round(_*C)/C,v=Math.round(v*C)/C;let R=0;for(b&&(p&&_!==o?(n.push({value:o}),_<o&&R++,wa(Math.round((_+R*M)*C)/C,o,Gx(o,P,t))&&R++):_<o&&R++);R<k;++R){const D=Math.round((_+R*M)*C)/C;if(x&&D>a)break;n.push({value:D})}return x&&p&&v!==a?n.length&&wa(n[n.length-1].value,a,Gx(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!x||v===a)&&n.push({value:v}),n}function Gx(t,e,{horizontal:n,minRotation:r}){const i=Fr(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class nh extends ss{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ee(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=io(i),c=io(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=QV(i,s);return e.bounds==="ticks"&&sS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return $g(e,this.chart.options.locale,this.options.ticks.format)}}class Hp extends nh{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ot(e)?e:0,this.max=ot(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Fr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}se(Hp,"id","linear"),se(Hp,"defaults",{ticks:{callback:$h.formatters.numeric}});const nl=t=>Math.floor(Vr(t)),Si=(t,e)=>Math.pow(10,nl(t)+e);function Qx(t){return t/Math.pow(10,nl(t))===1}function Yx(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function YV(t,e){const n=e-t;let r=nl(n);for(;Yx(t,e,r)>10;)r++;for(;Yx(t,e,r)<10;)r--;return Math.min(r,nl(t))}function XV(t,{min:e,max:n}){e=Kt(t.min,e);const r=[],i=nl(e);let s=YV(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let f=Math.floor((c-h)/Math.pow(10,s)),p=Kt(t.min,Math.round((l+h+f*Math.pow(10,s))*o)/o);for(;p<n;)r.push({value:p,major:Qx(p),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),p=Math.round((l+h+f*Math.pow(10,s))*o)/o;const y=Kt(t.max,p);return r.push({value:y,major:Qx(y),significand:f}),r}class Xx extends ss{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=nh.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return ot(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ot(e)?Math.max(0,e):null,this.max=ot(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ot(this._userMin)&&(this.min=e===Si(this.min,0)?Si(this.min,-1):Si(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Si(r,-1)),o(Si(i,1)))),r<=0&&s(Si(i,-1)),i<=0&&o(Si(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=XV(n,this);return e.bounds==="ticks"&&sS(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":$g(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Vr(e),this._valueRange=Vr(this.max)-Vr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Vr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}se(Xx,"id","logarithmic"),se(Xx,"defaults",{ticks:{callback:$h.formatters.logarithmic,major:{enabled:!0}}});function Wp(t){const e=t.ticks;if(e.display&&t.display){const n=Ct(e.backdropPadding);return ue(e.font&&e.font.size,$e.font.size)+n.height}return 0}function JV(t,e,n){return n=Oe(n)?n:[n],{w:rL(t,e.string,n),h:n.length*e.lineHeight}}function Jx(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function ZV(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Xe/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+i[l],a),f=nt(c.font),p=JV(t.ctx,f,t._pointLabels[l]);r[l]=p;const y=yn(t.getIndexAngle(l)+a),w=Math.round(Fg(y)),E=Jx(w,h.x,p.w,0,180),S=Jx(w,h.y,p.h,90,270);eF(n,e,y,E,S)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=rF(t,r,i)}function eF(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function tF(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Fg(yn(l.angle+Xt))),h=oF(l.y,a.h,c),f=iF(c),p=sF(l.x,a.w,f);return{visible:!0,x:l.x,y:h,textAlign:f,left:p,top:h,right:p+a.w,bottom:h+a.h}}function nF(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(tr({x:n,y:r},e)||tr({x:n,y:s},e)||tr({x:i,y:r},e)||tr({x:i,y:s},e))}function rF(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Wp(s)/2,additionalAngle:o?Xe/i:0};let c;for(let h=0;h<i;h++){l.padding=n[h],l.size=e[h];const f=tF(t,h,l);r.push(f),a==="auto"&&(f.visible=nF(f,c),f.visible&&(c=f))}return r}function iF(t){return t===0||t===180?"center":t<180?"left":"right"}function sF(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function oF(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function aF(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Ee(a)){const l=Bs(e.borderRadius),c=Ct(e.backdropPadding);t.fillStyle=a;const h=r-c.left,f=i-c.top,p=s-r+c.width,y=o-i+c.height;Object.values(l).some(w=>w!==0)?(t.beginPath(),Zu(t,{x:h,y:f,w:p,h:y,radius:l}),t.fill()):t.fillRect(h,f,p,y)}}function lF(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));aF(n,o,s);const a=nt(o.font),{x:l,y:c,textAlign:h}=s;Ji(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function LS(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,un);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function cF(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),LS(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function uF(t,e,n){return yi(t,{label:n,index:e,type:"pointLabel"})}class bc extends nh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ct(Wp(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ot(e)&&!isNaN(e)?e:0,this.max=ot(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wp(this.options))}generateTickLabels(e){nh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=we(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?ZV(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=un/(this._pointLabels.length||1),r=this.options.startAngle||0;return yn(e*n+Fr(r))}getDistanceFromCenterForValue(e){if(Ee(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Ee(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return uF(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Xt+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),LS(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&lF(this,o),i.display&&this.ticks.forEach((h,f)=>{if(f!==0||f===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const p=this.getContext(f),y=i.setContext(p),w=s.setContext(p);cF(this,y,l,o,w)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:p}=h;!p||!f||(e.lineWidth=p,e.strokeStyle=f,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),h=nt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const f=Ct(c.backdropPadding);e.fillRect(-o/2-f.left,-s-h.size/2-f.top,o+f.width,h.size+f.height)}Ji(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}se(bc,"id","radialLinear"),se(bc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$h.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),se(bc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),se(bc,"descriptors",{angleLines:{_fallback:"grid"}});const Wh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ut=Object.keys(Wh);function Zx(t,e){return t-e}function ew(t,e){if(Ee(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ot(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Xu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function tw(t,e,n,r){const i=Ut.length;for(let s=Ut.indexOf(t);s<i-1;++s){const o=Wh[Ut[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ut[s]}return Ut[i-1]}function hF(t,e,n,r,i){for(let s=Ut.length-1;s>=Ut.indexOf(n);s--){const o=Ut[s];if(Wh[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Ut[n?Ut.indexOf(n):0]}function dF(t){for(let e=Ut.indexOf(t)+1,n=Ut.length;e<n;++e)if(Wh[Ut[e]].common)return Ut[e]}function nw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Ug(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function fF(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function rw(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:fF(t,r,i,n)}class rh extends ss{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new d4._date(e.adapters.date);i.init(n),xa(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:ew(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ot(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=ot(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=$O(i,s,o);return this._unit=n.unit||(r.autoSkip?tw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):hF(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:dF(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),rw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Nn(n,0,o),r=Nn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||tw(s.minUnit,n,r,this._getLabelCapacity(n)),a=ue(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Xu(l)||l===!0,h={};let f=n,p,y;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const w=i.ticks.source==="data"&&this.getDataTimestamps();for(p=f,y=0;p<r;p=+e.add(p,a,o),y++)nw(h,p,w);return(p===r||i.bounds==="ticks"||y===1)&&nw(h,p,w),Object.keys(h).sort(Zx).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return we(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],f=c&&a[c],p=r[n],y=c&&f&&p&&p.major;return this._adapter.format(e,i||(y?f:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Fr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,rw(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(ew(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return WO(e.sort(Zx))}}se(rh,"id","time"),se(rh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ec(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Op(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Op(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class iw extends rh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ec(n,this.min),this._tableRange=Ec(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Ec(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Ec(this._table,r*this._tableRange+this._minPos,!0)}}se(iw,"id","timeseries"),se(iw,"defaults",rh.defaults);Sr.register($p,Hp,Jc,ra,LV,WV,jV);const pF=()=>{const[t,e]=V.useState(null),[n,r]=V.useState(!0),[i,s]=V.useState(null),o=Sb();V.useEffect(()=>{(async()=>{try{r(!0);const h=await Qe.getDashboardData();e(h)}catch(h){s("Failed to load dashboard data"),console.error("Dashboard error:",h)}finally{r(!1)}})()},[]);const a=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),l=[{title:"Properties",value:(t==null?void 0:t.totalProperties)||0,change:"+0",changeType:"positive",icon:js,color:"bg-blue-500",href:"/properties"},{title:"Total Revenue",value:a((t==null?void 0:t.totalRevenue)||0),change:"+0%",changeType:"positive",icon:Ys,color:"bg-green-500",href:"/properties"},{title:"Total Expenses",value:a((t==null?void 0:t.totalExpenses)||0),change:"+0%",changeType:"negative",icon:Su,color:"bg-orange-500",href:"/properties"},{title:"Net Income",value:a((t==null?void 0:t.netIncome)||0),change:"+0%",changeType:(t==null?void 0:t.netIncome)>=0?"positive":"negative",icon:QA,color:"bg-emerald-500",href:"/properties"},{title:"Total Bookings",value:(t==null?void 0:t.totalBookings)||0,change:"+0%",changeType:"positive",icon:Ys,color:"bg-purple-500",href:"/properties"},{title:"Depreciation",value:a((t==null?void 0:t.totalDepreciation)||0),change:"+0%",changeType:"positive",icon:wh,color:"bg-indigo-500",href:"/depreciation"},{title:"Tax Forms",value:"Ready",change:"100% Compliance",changeType:"positive",icon:$a,color:"bg-teal-500",href:"/tax-forms"}];return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ri,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Dashboard"}),d.jsx("p",{className:"text-gray-600",children:i})]})}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),d.jsx("p",{className:"text-gray-600",children:"Track your real estate portfolio performance and tax compliance"})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:l.map((c,h)=>d.jsxs("div",{onClick:()=>o(c.href),className:"bg-white rounded-lg shadow-md p-6 cursor-pointer hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:c.title}),d.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:c.value})]}),d.jsx("div",{className:`p-3 rounded-full ${c.color}`,children:d.jsx(c.icon,{className:"h-6 w-6 text-white"})})]}),d.jsxs("div",{className:"mt-4",children:[d.jsx("span",{className:`text-sm font-medium ${c.changeType==="positive"?"text-green-600":"text-red-600"}`,children:c.change}),d.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"from last month"})]})]},h))}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),t!=null&&t.properties&&t.properties.length>0?d.jsx("div",{className:"space-y-4",children:t.properties.slice(0,5).map((c,h)=>d.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(js,{className:"h-5 w-5 text-blue-600 mr-3"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium text-gray-900",children:c.address}),d.jsx("p",{className:"text-sm text-gray-600",children:c.property_type})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"font-medium text-gray-900",children:a(c.current_value||0)}),d.jsx("p",{className:"text-sm text-gray-600",children:c.status})]})]},h))}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(js,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"No properties added yet"}),d.jsx("button",{onClick:()=>o("/properties"),className:"mt-2 text-blue-600 hover:text-blue-700 font-medium",children:"Add your first property"})]})]})]})},mF=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!0),[i,s]=V.useState(null);V.useState(null),V.useState(!1);const[o,a]=V.useState(!1),[l,c]=V.useState(!1),[h,f]=V.useState(!1),[p,y]=V.useState(!1),[w,E]=V.useState(null),[S,b]=V.useState("bookings"),[x,I]=V.useState({check_in:"",check_out:"",amount:"",guest_name:"",notes:""}),[P,M]=V.useState({description:"",amount:"",category:"Maintenance",date:new Date().toISOString().split("T")[0]}),[C,_]=V.useState({warranties:[],maintenance_schedule:[],filters:[],appliances:[],utilities_info:[],emergency_contacts:[],notes:""}),[v,k]=V.useState({address:"",property_type:"Single Family",purchase_price:"",current_value:"",mortgage:"",property_tax:"",insurance:"",hoa:"",utilities:"",other_fixed_costs:"",status:"Active",bookings:[],expenses:[]});V.useEffect(()=>{(async()=>{try{r(!0);const $=await Qe.getProperties();e($)}catch($){s("Failed to load properties"),console.error("Properties error:",$)}finally{r(!1)}})()},[]);const A=O=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(O),R=O=>new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=O=>{const $=O.bookings||[],H=O.expenses||[],F=$.reduce((lt,zn)=>lt+zn.amount,0),De=H.reduce((lt,zn)=>lt+zn.amount,0),At=F-De;return{totalIncome:F,totalExpenses:De,netIncome:At}},N=async O=>{O.preventDefault();try{const $={...x,property_id:w,amount:parseFloat(x.amount)||0,date:new Date().toISOString()},H=await Qe.createBooking($);e(t.map(F=>F.id===w?{...F,bookings:[...F.bookings||[],H]}:F)),I({check_in:"",check_out:"",amount:"",guest_name:"",notes:""}),f(!1),E(null)}catch($){console.error("Failed to add booking:",$),s("Failed to save booking. Please try again.")}},Te=async O=>{O.preventDefault();try{const $={...v,purchase_price:parseFloat(v.purchase_price)||0,current_value:parseFloat(v.current_value)||0,mortgage:parseFloat(v.mortgage)||0,property_tax:parseFloat(v.property_tax)||0,insurance:parseFloat(v.insurance)||0,hoa:parseFloat(v.hoa)||0,utilities:parseFloat(v.utilities)||0,other_fixed_costs:parseFloat(v.other_fixed_costs)||0},H=await Qe.createProperty($);e([...t,H]),k({address:"",property_type:"Single Family",purchase_price:"",current_value:"",mortgage:"",property_tax:"",insurance:"",hoa:"",utilities:"",other_fixed_costs:"",status:"Active",bookings:[],expenses:[]}),c(!1)}catch($){console.error("Failed to add property:",$),s("Failed to save property. Please try again.")}},pe=async O=>{O.preventDefault();try{const $={...P,property_id:w,amount:parseFloat(P.amount)||0,date:new Date(P.date).toISOString()},H=await Qe.createTransaction($);e(t.map(F=>F.id===w?{...F,expenses:[...F.expenses||[],H]}:F)),M({description:"",amount:"",category:"Maintenance",date:new Date().toISOString().split("T")[0]}),a(!1),E(null)}catch($){console.error("Failed to add expense:",$),s("Failed to save expense. Please try again.")}},Se=O=>{O.preventDefault();try{e(t.map($=>$.id===w?{...$,details:C}:$)),y(!1),E(null)}catch($){console.error("Failed to update property details:",$)}},Ne=()=>{_({...C,warranties:[...C.warranties,{id:Date.now().toString(),item:"",company:"",start_date:"",end_date:"",contact:"",notes:""}]})},q=()=>{_({...C,maintenance_schedule:[...C.maintenance_schedule,{id:Date.now().toString(),task:"",frequency:"Monthly",last_done:"",next_due:"",notes:""}]})},J=()=>{_({...C,filters:[...C.filters,{id:Date.now().toString(),type:"",location:"",last_changed:"",next_change:"",notes:""}]})},Z=()=>{_({...C,appliances:[...C.appliances,{id:Date.now().toString(),name:"",model:"",serial_number:"",purchase_date:"",warranty_info:"",notes:""}]})},ge=()=>{_({...C,emergency_contacts:[...C.emergency_contacts,{id:Date.now().toString(),name:"",type:"Plumber",phone:"",email:"",notes:""}]})};return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ri,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Properties"}),d.jsx("p",{className:"text-gray-600",children:i})]})}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Properties"}),d.jsx("p",{className:"text-gray-600",children:"Manage your real estate portfolio with integrated income & expenses"})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsxs("a",{href:"/material-participation",className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[d.jsx($d,{className:"h-5 w-5 mr-2"}),"Track Work Hours"]}),d.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[d.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Add Property"]})]})]}),t.length>0?d.jsx("div",{className:"space-y-6",children:t.map(O=>{var H,F,De,At;const $=D(O);return d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsxs("div",{className:"p-6 border-b border-gray-200",children:[d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:O.address}),d.jsx("p",{className:"text-gray-600",children:O.property_type})]}),d.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${O.status==="Rented"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:O.status})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[d.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Purchase Price"}),d.jsx("p",{className:"text-lg font-semibold",children:A(O.purchase_price)})]}),d.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Income"}),d.jsx("p",{className:"text-lg font-semibold text-green-600",children:A($.totalIncome)})]}),d.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),d.jsx("p",{className:"text-lg font-semibold text-red-600",children:A($.totalExpenses)})]}),d.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Net Income"}),d.jsx("p",{className:`text-lg font-semibold ${$.netIncome>=0?"text-green-600":"text-red-600"}`,children:A($.netIncome)})]})]})]}),d.jsx("div",{className:"border-b border-gray-200",children:d.jsxs("nav",{className:"flex space-x-8 px-6",children:[d.jsx("button",{onClick:()=>b("bookings"),className:`py-4 px-1 border-b-2 ${S==="bookings"?"border-blue-500 text-blue-600 font-medium":"border-transparent text-gray-500 hover:text-gray-700 font-medium"}`,children:"Bookings"}),d.jsx("button",{onClick:()=>b("expenses"),className:`py-4 px-1 border-b-2 ${S==="expenses"?"border-blue-500 text-blue-600 font-medium":"border-transparent text-gray-500 hover:text-gray-700 font-medium"}`,children:"Expenses"}),d.jsx("button",{onClick:()=>b("property_details"),className:`py-4 px-1 border-b-2 ${S==="property_details"?"border-blue-500 text-blue-600 font-medium":"border-transparent text-gray-500 hover:text-gray-700 font-medium"}`,children:"Property Details"}),d.jsx("button",{onClick:()=>b("depreciation"),className:`py-4 px-1 border-b-2 ${S==="depreciation"?"border-blue-500 text-blue-600 font-medium":"border-transparent text-gray-500 hover:text-gray-700 font-medium"}`,children:"Depreciation"})]})}),S==="bookings"&&d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Bookings"}),d.jsxs("button",{onClick:()=>{E(O.id),f(!0)},className:"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 transition-colors flex items-center text-sm",children:[d.jsx(Ni,{className:"h-4 w-4 mr-1"}),"Add Booking"]})]}),O.bookings&&O.bookings.length>0?d.jsx("div",{className:"space-y-3",children:O.bookings.map((lt,zn)=>d.jsxs("div",{className:"flex justify-between items-center p-3 border border-gray-200 rounded-lg",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Oc,{className:"h-5 w-5 text-green-600 mr-3"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:lt.guest_name||"Guest"}),d.jsxs("p",{className:"text-sm text-gray-600",children:[R(lt.check_in)," - ",R(lt.check_out)]}),lt.notes&&d.jsx("p",{className:"text-xs text-gray-500",children:lt.notes})]})]}),d.jsx("span",{className:"font-semibold text-green-600",children:A(lt.amount)})]},zn))}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Oc,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"No bookings recorded yet"}),d.jsx("button",{onClick:()=>{E(O.id),f(!0)},className:"mt-2 text-blue-600 hover:text-blue-700 font-medium",children:"Add your first booking"})]})]}),S==="expenses"&&d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Expenses"}),d.jsxs("button",{onClick:()=>{E(O.id),a(!0)},className:"bg-orange-600 text-white px-3 py-1 rounded-lg hover:bg-orange-700 transition-colors flex items-center text-sm",children:[d.jsx(Ni,{className:"h-4 w-4 mr-1"}),"Add Expense"]})]}),O.expenses&&O.expenses.length>0?d.jsx("div",{className:"space-y-3",children:O.expenses.map((lt,zn)=>d.jsx("div",{className:"flex justify-between items-center p-3 border border-gray-200 rounded-lg",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx($d,{className:"h-5 w-5 text-red-600 mr-3"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-medium",children:lt.description}),d.jsx("p",{className:"text-sm text-gray-600",children:R(lt.date)}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Category: ",lt.category]}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Amount: ",A(lt.amount)]})]})]})},zn))}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(Ys,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"No expenses recorded yet"}),d.jsx("button",{onClick:()=>{E(O.id),a(!0)},className:"mt-2 text-orange-600 hover:text-orange-700 font-medium",children:"Add your first expense"})]})]}),S==="property_details"&&d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Property Details"}),d.jsxs("button",{onClick:()=>{E(O.id),_(O.details||{warranties:[],maintenance_schedule:[],filters:[],appliances:[],utilities_info:[],emergency_contacts:[],notes:""}),y(!0)},className:"bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700 transition-colors flex items-center text-sm",children:[d.jsx(Ni,{className:"h-4 w-4 mr-1"}),"Manage Details"]})]}),O.details?d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Warranties"}),d.jsxs("p",{className:"text-sm text-gray-600",children:[((H=O.details.warranties)==null?void 0:H.length)||0," items"]})]}),d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Maintenance Schedule"}),d.jsxs("p",{className:"text-sm text-gray-600",children:[((F=O.details.maintenance_schedule)==null?void 0:F.length)||0," tasks"]})]}),d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Filters"}),d.jsxs("p",{className:"text-sm text-gray-600",children:[((De=O.details.filters)==null?void 0:De.length)||0," filters"]})]}),d.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[d.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Appliances"}),d.jsxs("p",{className:"text-sm text-gray-600",children:[((At=O.details.appliances)==null?void 0:At.length)||0," appliances"]})]})]}):d.jsxs("div",{className:"text-center py-8",children:[d.jsx(js,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"No property details added yet"}),d.jsx("button",{onClick:()=>{E(O.id),_({warranties:[],maintenance_schedule:[],filters:[],appliances:[],utilities_info:[],emergency_contacts:[],notes:""}),y(!0)},className:"mt-2 text-blue-600 hover:text-blue-700 font-medium",children:"Add property details"})]})]}),S==="depreciation"&&d.jsxs("div",{className:"p-6",children:[d.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Depreciation"}),d.jsx("p",{className:"text-gray-600",children:"Depreciation tracking for tax purposes is not yet implemented in this version."}),d.jsx("p",{className:"text-gray-600",children:"Please add property details to enable depreciation calculations."})]}),d.jsx("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsxs("button",{onClick:()=>{E(O.id),f(!0)},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[d.jsx(Oc,{className:"h-5 w-5 mr-2"}),"Add Booking"]}),d.jsxs("button",{onClick:()=>{E(O.id),a(!0)},className:"flex-1 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center justify-center",children:[d.jsx($d,{className:"h-5 w-5 mr-2"}),"Add Expense"]}),d.jsxs("button",{className:"flex-1 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center",children:[d.jsx(Iu,{className:"h-5 w-5 mr-2"}),"Export Data"]})]})})]},O.id)})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(js,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Properties Added"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first property to start tracking income, expenses, and depreciation for tax purposes."}),d.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center mx-auto",children:[d.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Add Your First Property"]})]}),l&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Add New Property"}),d.jsx("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(Lc,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:Te,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Address"}),d.jsx("input",{type:"text",required:!0,value:v.address,onChange:O=>k({...v,address:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"123 Main St, City, State"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Type"}),d.jsxs("select",{value:v.property_type,onChange:O=>k({...v,property_type:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[d.jsx("option",{children:"Single Family"}),d.jsx("option",{children:"Multi-Family"}),d.jsx("option",{children:"Condo"}),d.jsx("option",{children:"Townhouse"}),d.jsx("option",{children:"Commercial"}),d.jsx("option",{children:"Land"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Purchase Price"}),d.jsx("input",{type:"number",value:v.purchase_price,onChange:O=>k({...v,purchase_price:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Value"}),d.jsx("input",{type:"number",value:v.current_value,onChange:O=>k({...v,current_value:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mortgage (monthly)"}),d.jsx("input",{type:"number",value:v.mortgage,onChange:O=>k({...v,mortgage:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Tax (monthly)"}),d.jsx("input",{type:"number",value:v.property_tax,onChange:O=>k({...v,property_tax:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Insurance (monthly)"}),d.jsx("input",{type:"number",value:v.insurance,onChange:O=>k({...v,insurance:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"HOA Fees (monthly)"}),d.jsx("input",{type:"number",value:v.hoa,onChange:O=>k({...v,hoa:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Utilities (monthly)"}),d.jsx("input",{type:"number",value:v.utilities,onChange:O=>k({...v,utilities:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Fixed Costs (monthly)"}),d.jsx("input",{type:"number",value:v.other_fixed_costs,onChange:O=>k({...v,other_fixed_costs:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Property"})]})]})]})}),h&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Add Booking"}),d.jsx("button",{onClick:()=>{f(!1),E(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Lc,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guest Name"}),d.jsx("input",{type:"text",value:x.guest_name,onChange:O=>I({...x,guest_name:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Guest name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-in Date"}),d.jsx("input",{type:"date",required:!0,value:x.check_in,onChange:O=>I({...x,check_in:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-out Date"}),d.jsx("input",{type:"date",required:!0,value:x.check_out,onChange:O=>I({...x,check_out:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),d.jsx("input",{type:"number",required:!0,value:x.amount,onChange:O=>I({...x,amount:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:x.notes,onChange:O=>I({...x,notes:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Optional notes about the booking",rows:"3"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{f(!1),E(null)},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Add Booking"})]})]})]})}),o&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Expense"}),d.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Plumbing repair",value:P.description,onChange:O=>M({...P,description:O.target.value}),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),d.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00",value:P.amount,onChange:O=>M({...P,amount:O.target.value}),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),d.jsxs("select",{className:"w-full border border-gray-300 rounded-lg px-3 py-2",value:P.category,onChange:O=>M({...P,category:O.target.value}),children:[d.jsx("option",{children:"Maintenance"}),d.jsx("option",{children:"Utilities"}),d.jsx("option",{children:"Insurance"}),d.jsx("option",{children:"Property Tax"}),d.jsx("option",{children:"HOA Fees"}),d.jsx("option",{children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),d.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-lg px-3 py-2",value:P.date,onChange:O=>M({...P,date:O.target.value}),required:!0})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"flex-1 bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors",children:"Add Expense"})]})]})]})}),p&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Property Details"}),d.jsx("button",{onClick:()=>{y(!1),E(null)},className:"text-gray-400 hover:text-gray-600",children:d.jsx(Lc,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:Se,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Warranties"}),d.jsx("button",{type:"button",onClick:Ne,className:"bg-green-600 text-white px-2 py-1 rounded text-sm hover:bg-green-700",children:"Add Warranty"})]}),d.jsx("div",{className:"space-y-3",children:C.warranties.map((O,$)=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:"Item (e.g., HVAC, Water Heater)",value:O.item,onChange:H=>{const F=[...C.warranties];F[$].item=H.target.value,_({...C,warranties:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Company",value:O.company,onChange:H=>{const F=[...C.warranties];F[$].company=H.target.value,_({...C,warranties:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"date",placeholder:"Start Date",value:O.start_date,onChange:H=>{const F=[...C.warranties];F[$].start_date=H.target.value,_({...C,warranties:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"date",placeholder:"End Date",value:O.end_date,onChange:H=>{const F=[...C.warranties];F[$].end_date=H.target.value,_({...C,warranties:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Contact Info",value:O.contact,onChange:H=>{const F=[...C.warranties];F[$].contact=H.target.value,_({...C,warranties:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Notes",value:O.notes,onChange:H=>{const F=[...C.warranties];F[$].notes=H.target.value,_({...C,warranties:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"})]})},O.id))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Maintenance Schedule"}),d.jsx("button",{type:"button",onClick:q,className:"bg-blue-600 text-white px-2 py-1 rounded text-sm hover:bg-blue-700",children:"Add Task"})]}),d.jsx("div",{className:"space-y-3",children:C.maintenance_schedule.map((O,$)=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:"Task (e.g., HVAC Service, Gutter Cleaning)",value:O.task,onChange:H=>{const F=[...C.maintenance_schedule];F[$].task=H.target.value,_({...C,maintenance_schedule:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsxs("select",{value:O.frequency,onChange:H=>{const F=[...C.maintenance_schedule];F[$].frequency=H.target.value,_({...C,maintenance_schedule:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[d.jsx("option",{children:"Monthly"}),d.jsx("option",{children:"Quarterly"}),d.jsx("option",{children:"Semi-annually"}),d.jsx("option",{children:"Annually"}),d.jsx("option",{children:"As needed"})]}),d.jsx("input",{type:"date",placeholder:"Last Done",value:O.last_done,onChange:H=>{const F=[...C.maintenance_schedule];F[$].last_done=H.target.value,_({...C,maintenance_schedule:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"date",placeholder:"Next Due",value:O.next_due,onChange:H=>{const F=[...C.maintenance_schedule];F[$].next_due=H.target.value,_({...C,maintenance_schedule:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Notes",value:O.notes,onChange:H=>{const F=[...C.maintenance_schedule];F[$].notes=H.target.value,_({...C,maintenance_schedule:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm col-span-2"})]})},O.id))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Filters"}),d.jsx("button",{type:"button",onClick:J,className:"bg-purple-600 text-white px-2 py-1 rounded text-sm hover:bg-purple-700",children:"Add Filter"})]}),d.jsx("div",{className:"space-y-3",children:C.filters.map((O,$)=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:"Filter Type (e.g., HVAC, Water)",value:O.type,onChange:H=>{const F=[...C.filters];F[$].type=H.target.value,_({...C,filters:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Location",value:O.location,onChange:H=>{const F=[...C.filters];F[$].location=H.target.value,_({...C,filters:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"date",placeholder:"Last Changed",value:O.last_changed,onChange:H=>{const F=[...C.filters];F[$].last_changed=H.target.value,_({...C,filters:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"date",placeholder:"Next Change",value:O.next_change,onChange:H=>{const F=[...C.filters];F[$].next_change=H.target.value,_({...C,filters:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Notes",value:O.notes,onChange:H=>{const F=[...C.filters];F[$].notes=H.target.value,_({...C,filters:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm col-span-2"})]})},O.id))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Appliances"}),d.jsx("button",{type:"button",onClick:Z,className:"bg-orange-600 text-white px-2 py-1 rounded text-sm hover:bg-orange-700",children:"Add Appliance"})]}),d.jsx("div",{className:"space-y-3",children:C.appliances.map((O,$)=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:"Appliance Name",value:O.name,onChange:H=>{const F=[...C.appliances];F[$].name=H.target.value,_({...C,appliances:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Model",value:O.model,onChange:H=>{const F=[...C.appliances];F[$].model=H.target.value,_({...C,appliances:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Serial Number",value:O.serial_number,onChange:H=>{const F=[...C.appliances];F[$].serial_number=H.target.value,_({...C,appliances:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"date",placeholder:"Purchase Date",value:O.purchase_date,onChange:H=>{const F=[...C.appliances];F[$].purchase_date=H.target.value,_({...C,appliances:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Warranty Info",value:O.warranty_info,onChange:H=>{const F=[...C.appliances];F[$].warranty_info=H.target.value,_({...C,appliances:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Notes",value:O.notes,onChange:H=>{const F=[...C.appliances];F[$].notes=H.target.value,_({...C,appliances:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"})]})},O.id))})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-3",children:[d.jsx("h4",{className:"text-md font-semibold text-gray-900",children:"Emergency Contacts"}),d.jsx("button",{type:"button",onClick:ge,className:"bg-red-600 text-white px-2 py-1 rounded text-sm hover:bg-red-700",children:"Add Contact"})]}),d.jsx("div",{className:"space-y-3",children:C.emergency_contacts.map((O,$)=>d.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[d.jsx("input",{type:"text",placeholder:"Name",value:O.name,onChange:H=>{const F=[...C.emergency_contacts];F[$].name=H.target.value,_({...C,emergency_contacts:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsxs("select",{value:O.type,onChange:H=>{const F=[...C.emergency_contacts];F[$].type=H.target.value,_({...C,emergency_contacts:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm",children:[d.jsx("option",{children:"Plumber"}),d.jsx("option",{children:"Electrician"}),d.jsx("option",{children:"HVAC"}),d.jsx("option",{children:"General Contractor"}),d.jsx("option",{children:"Property Manager"}),d.jsx("option",{children:"Other"})]}),d.jsx("input",{type:"tel",placeholder:"Phone",value:O.phone,onChange:H=>{const F=[...C.emergency_contacts];F[$].phone=H.target.value,_({...C,emergency_contacts:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"email",placeholder:"Email",value:O.email,onChange:H=>{const F=[...C.emergency_contacts];F[$].email=H.target.value,_({...C,emergency_contacts:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm"}),d.jsx("input",{type:"text",placeholder:"Notes",value:O.notes,onChange:H=>{const F=[...C.emergency_contacts];F[$].notes=H.target.value,_({...C,emergency_contacts:F})},className:"border border-gray-300 rounded px-2 py-1 text-sm col-span-2"})]})},O.id))})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"General Notes"}),d.jsx("textarea",{value:C.notes,onChange:O=>_({...C,notes:O.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Any additional notes about the property...",rows:"4"})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>{y(!1),E(null)},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Save Details"})]})]})]})})]})},gF=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!0),[i,s]=V.useState(null),[o,a]=V.useState(!1),[l,c]=V.useState("all"),[h,f]=V.useState({type:"expense",description:"",amount:"",category:"Maintenance",date:new Date().toISOString().split("T")[0],property_id:"",notes:""}),[p,y]=V.useState([]);V.useEffect(()=>{(async()=>{try{r(!0);const[_,v]=await Promise.all([Qe.getTransactions(),Qe.getProperties()]);e(_),y(v)}catch(_){s("Failed to load transactions"),console.error("Transactions error:",_)}finally{r(!1)}})()},[]);const w=C=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(C),E=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),S=async C=>{C.preventDefault();try{const _={...h,id:Date.now().toString(),amount:parseFloat(h.amount)||0,date:new Date(h.date).toISOString()},v=await Qe.createTransaction(_);e([...t,v]),f({type:"expense",description:"",amount:"",category:"Maintenance",date:new Date().toISOString().split("T")[0],property_id:"",notes:""}),a(!1)}catch(_){console.error("Failed to add transaction:",_),s("Failed to save transaction. Please try again.")}},b=async C=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{await Qe.deleteTransaction(C),e(t.filter(_=>_.id!==C))}catch(_){console.error("Failed to delete transaction:",_),s("Failed to delete transaction. Please try again.")}},x=t.filter(C=>l==="all"?!0:l==="income"?C.type==="income":l==="expense"?C.type==="expense":!0),I=t.filter(C=>C.type==="income").reduce((C,_)=>C+(_.amount||0),0),P=t.filter(C=>C.type==="expense").reduce((C,_)=>C+(_.amount||0),0),M=I-P;return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ExclamationTriangleIcon,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Transactions"}),d.jsx("p",{className:"text-gray-600",children:i})]})}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),d.jsx("p",{className:"text-gray-600",children:"Track all income and expenses for tax purposes"})]}),d.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[d.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Add Transaction"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(qA,{className:"h-8 w-8 text-green-600 mr-4"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Income"}),d.jsx("p",{className:"text-2xl font-bold text-green-600",children:w(I)})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(WA,{className:"h-8 w-8 text-red-600 mr-4"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Expenses"}),d.jsx("p",{className:"text-2xl font-bold text-red-600",children:w(P)})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Ys,{className:"h-8 w-8 text-blue-600 mr-4"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Net Income"}),d.jsx("p",{className:`text-2xl font-bold ${M>=0?"text-green-600":"text-red-600"}`,children:w(M)})]})]})})]}),d.jsx("div",{className:"mb-6",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>c("all"),className:`px-4 py-2 rounded-lg font-medium ${l==="all"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"All"}),d.jsx("button",{onClick:()=>c("income"),className:`px-4 py-2 rounded-lg font-medium ${l==="income"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Income"}),d.jsx("button",{onClick:()=>c("expense"),className:`px-4 py-2 rounded-lg font-medium ${l==="expense"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Expenses"})]})}),x.length>0?d.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Property"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(C=>{const _=p.find(v=>v.id===C.property_id);return d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E(C.date)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.description}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.category})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_?_.address:"N/A"}),d.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${C.type==="income"?"text-green-600":"text-red-600"}`,children:[C.type==="income"?"+":"-",w(C.amount)]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.jsx("button",{onClick:()=>b(C.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},C.id)})})]})})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Ys,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Transactions"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Start tracking your income and expenses to maintain proper tax records."}),d.jsx("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Transaction"})]}),o&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Add Transaction"}),d.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(XMarkIcon,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:S,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),d.jsxs("select",{value:h.type,onChange:C=>f({...h,type:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[d.jsx("option",{value:"income",children:"Income"}),d.jsx("option",{value:"expense",children:"Expense"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),d.jsx("input",{type:"text",required:!0,value:h.description,onChange:C=>f({...h,description:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Rental income, Plumbing repair"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),d.jsx("input",{type:"number",required:!0,value:h.amount,onChange:C=>f({...h,amount:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"0.00"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),d.jsxs("select",{value:h.category,onChange:C=>f({...h,category:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[d.jsx("option",{children:"Maintenance"}),d.jsx("option",{children:"Utilities"}),d.jsx("option",{children:"Insurance"}),d.jsx("option",{children:"Property Tax"}),d.jsx("option",{children:"HOA Fees"}),d.jsx("option",{children:"Rental Income"}),d.jsx("option",{children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),d.jsxs("select",{value:h.property_id,onChange:C=>f({...h,property_id:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[d.jsx("option",{value:"",children:"Select Property"}),p.map(C=>d.jsx("option",{value:C.id,children:C.address},C.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),d.jsx("input",{type:"date",required:!0,value:h.date,onChange:C=>f({...h,date:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:h.notes,onChange:C=>f({...h,notes:C.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3",placeholder:"Additional notes..."})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Transaction"})]})]})]})})]})},yF=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!0),[i,s]=V.useState(null),[o,a]=V.useState(!1),[l,c]=V.useState([]),[h,f]=V.useState({property_id:"",date:new Date().toISOString().split("T")[0],hours:"",activity:"",category:"Maintenance",notes:""});V.useEffect(()=>{(async()=>{try{r(!0);const[M,C]=await Promise.all([Qe.getMaterialParticipation(),Qe.getProperties()]);e(M),c(C)}catch(M){s("Failed to load participation logs"),console.error("Material participation error:",M)}finally{r(!1)}})()},[]);const p=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),y=async P=>{P.preventDefault();try{const M={...h,id:Date.now().toString(),hours:parseFloat(h.hours)||0,date:new Date(h.date).toISOString()},C=await Qe.saveMaterialParticipation(M);e([...t,C]),f({property_id:"",date:new Date().toISOString().split("T")[0],hours:"",activity:"",category:"Maintenance",notes:""}),a(!1)}catch(M){console.error("Failed to add participation log:",M),s("Failed to save participation log. Please try again.")}},w=async P=>{if(window.confirm("Are you sure you want to delete this participation log?"))try{await Qe.deleteMaterialParticipation(P),e(t.filter(M=>M.id!==P))}catch(M){console.error("Failed to delete participation log:",M),s("Failed to delete participation log. Please try again.")}},E=t.reduce((P,M)=>P+(M.hours||0),0),S=new Date().getFullYear(),x=t.filter(P=>new Date(P.date).getFullYear()===S).reduce((P,M)=>P+(M.hours||0),0),I=t.reduce((P,M)=>{const C=l.find(v=>v.id===M.property_id),_=C?C.address:"Unknown Property";return P[_]||(P[_]=[]),P[_].push(M),P},{});return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ri,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Participation Logs"}),d.jsx("p",{className:"text-gray-600",children:i})]})}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Material Participation"}),d.jsx("p",{className:"text-gray-600",children:"Track your work hours for tax compliance and material participation"})]}),d.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[d.jsx(Ni,{className:"h-5 w-5 mr-2"}),"Add Work Log"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Su,{className:"h-8 w-8 text-blue-600 mr-4"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Hours"}),d.jsx("p",{className:"text-2xl font-bold text-blue-600",children:E.toFixed(1)})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Oc,{className:"h-8 w-8 text-green-600 mr-4"}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm font-medium text-gray-600",children:[S," Hours"]}),d.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.toFixed(1)})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(wh,{className:"h-8 w-8 text-orange-600 mr-4"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Properties"}),d.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Object.keys(I).length})]})]})})]}),d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(ri,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Tax Compliance"}),d.jsx("p",{className:"text-sm text-yellow-800",children:"To qualify as a real estate professional for tax purposes, you generally need to spend more than 750 hours per year in real estate activities. Keep detailed records of all your work hours."})]})]})}),Object.keys(I).length>0?d.jsx("div",{className:"space-y-6",children:Object.entries(I).map(([P,M])=>{const C=M.reduce((_,v)=>_+(v.hours||0),0);return d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:P}),d.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",C.toFixed(1)," hours"]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hours"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map(_=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p(_.date)}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.activity}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:_.category})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[_.hours," hours"]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.jsx("button",{onClick:()=>w(_.id),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},_.id))})]})})]},P)})}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Su,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Participation Logs"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Start tracking your work hours to maintain proper tax compliance records."}),d.jsx("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Work Log"})]}),o&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Add Work Log"}),d.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:d.jsx(Lc,{className:"h-6 w-6"})})]}),d.jsxs("form",{onSubmit:y,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),d.jsxs("select",{required:!0,value:h.property_id,onChange:P=>f({...h,property_id:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[d.jsx("option",{value:"",children:"Select Property"}),l.map(P=>d.jsx("option",{value:P.id,children:P.address},P.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),d.jsx("input",{type:"date",required:!0,value:h.date,onChange:P=>f({...h,date:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Activity"}),d.jsx("input",{type:"text",required:!0,value:h.activity,onChange:P=>f({...h,activity:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"e.g., Plumbing repair, Painting, Landscaping"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),d.jsxs("select",{value:h.category,onChange:P=>f({...h,category:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[d.jsx("option",{children:"Maintenance"}),d.jsx("option",{children:"Repairs"}),d.jsx("option",{children:"Improvements"}),d.jsx("option",{children:"Management"}),d.jsx("option",{children:"Marketing"}),d.jsx("option",{children:"Administrative"}),d.jsx("option",{children:"Other"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hours"}),d.jsx("input",{type:"number",required:!0,step:"0.5",min:"0",value:h.hours,onChange:P=>f({...h,hours:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"2.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),d.jsx("textarea",{value:h.notes,onChange:P=>f({...h,notes:P.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",rows:"3",placeholder:"Additional details about the work performed..."})]}),d.jsxs("div",{className:"flex space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Work Log"})]})]})]})})]})},vF=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!0),[i,s]=V.useState(null);V.useEffect(()=>{(async()=>{try{r(!0);const l=await Qe.getDepreciation();e(l)}catch(l){s("Failed to load depreciation data"),console.error("Depreciation error:",l)}finally{r(!1)}})()},[]);const o=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a);return n?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i?d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ri,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Depreciation Data"}),d.jsx("p",{className:"text-gray-600",children:i})]})}):d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Depreciation Calculator"}),d.jsx("p",{className:"text-gray-600",children:"Track depreciation for tax purposes"})]}),d.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[d.jsx($a,{className:"h-5 w-5 mr-2"}),"Add Property"]})]}),t.length>0?d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Depreciation Summary"}),d.jsx("div",{className:"space-y-4",children:t.map(a=>d.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[d.jsxs("h3",{className:"font-medium text-gray-900 mb-2",children:["Property ",a.property_id]}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Building Value:"}),d.jsx("span",{className:"font-medium",children:o(a.building_value)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Land Value:"}),d.jsx("span",{className:"font-medium",children:o(a.land_value)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Annual Depreciation:"}),d.jsx("span",{className:"font-medium",children:o(a.annual_depreciation)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Accumulated:"}),d.jsx("span",{className:"font-medium",children:o(a.accumulated_depreciation)})]})]})]},a.id))})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tax Benefits"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[d.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Section 179 Deduction"}),d.jsx("p",{className:"text-sm text-blue-700",children:"Qualifying properties may be eligible for immediate expensing under Section 179."})]}),d.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[d.jsx("h3",{className:"font-medium text-green-900 mb-2",children:"Bonus Depreciation"}),d.jsx("p",{className:"text-sm text-green-700",children:"Additional first-year depreciation may be available for qualifying property."})]}),d.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[d.jsx("h3",{className:"font-medium text-purple-900 mb-2",children:"Regular Depreciation"}),d.jsx("p",{className:"text-sm text-purple-700",children:"Standard depreciation over 27.5 years for residential rental property."})]})]})]})]}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(wh,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Depreciation Data"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Add properties to your portfolio to start tracking depreciation for tax purposes."}),d.jsxs("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center mx-auto",children:[d.jsx($a,{className:"h-5 w-5 mr-2"}),"Add Your First Property"]})]})]})},_F=()=>{const[t,e]=V.useState(null),[n,r]=V.useState(!0),[i,s]=V.useState(null);V.useEffect(()=>{(async()=>{try{r(!0);const h=await Qe.getTaxFormsData(2024);e(h)}catch(h){s("Failed to load tax forms data"),console.error("TaxForms error:",h)}finally{r(!1)}})()},[]);const o=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),a=c=>{const h=`Tax Form: ${c}
    
This is a template for ${c}. 
Please consult with a tax professional for accurate completion.

Generated by STR Tax Tracker
Date: ${new Date().toLocaleDateString()}`,f=new Blob([h],{type:"text/plain"}),p=URL.createObjectURL(f),y=document.createElement("a");y.href=p,y.download=`${c.replace(/\s+/g,"_")}.txt`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(p)};if(n)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(i)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ri,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Tax Forms"}),d.jsx("p",{className:"text-gray-600",children:i})]})});const l=[{name:"Form 4562 - Depreciation and Amortization",description:"Used to claim depreciation and amortization deductions",category:"Depreciation"},{name:"Schedule E - Supplemental Income and Loss",description:"Reports rental income and expenses from real estate",category:"Income"},{name:"Form 4797 - Sales of Business Property",description:"Reports gains and losses from the sale of business property",category:"Sales"},{name:"Form 8829 - Expenses for Business Use of Home",description:"Deducts expenses for business use of your home",category:"Home Office"},{name:"Schedule 1 - Additional Income and Adjustments to Income",description:"Reports additional income and adjustments to income",category:"Income"},{name:"Form 1040 - Individual Income Tax Return",description:"Main individual income tax return form",category:"Main Return"},{name:"Form 8582 - Passive Activity Loss Limitations",description:"Calculates passive activity loss limitations",category:"Loss Limitations"},{name:"Form 6251 - Alternative Minimum Tax",description:"Calculates alternative minimum tax",category:"AMT"},{name:"Schedule C - Profit or Loss From Business",description:"Reports business income and expenses",category:"Business"},{name:"Form 1098 - Mortgage Interest Statement",description:"Reports mortgage interest paid",category:"Interest"}];return d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Tax Forms"}),d.jsx("p",{className:"text-gray-600",children:"100% Depreciation Compliance for 2024"})]}),t.properties&&t.properties.length>0?d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Property Summary"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.properties.map(c=>d.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:c.address}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Purchase Price:"}),d.jsx("span",{className:"font-medium",children:o(c.purchase_price)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Section 179:"}),d.jsx("span",{className:"font-medium text-green-600",children:o(c.section_179_deduction)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Rental Income:"}),d.jsx("span",{className:"font-medium",children:o(c.rental_income)})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{className:"text-gray-600",children:"Net Income:"}),d.jsx("span",{className:`font-medium ${c.net_rental_income>=0?"text-green-600":"text-red-600"}`,children:o(c.net_rental_income)})]})]})]},c.id))})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Tax Summary"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Total Purchase Price"}),d.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o(t.totals.total_purchase_price)})]}),d.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Section 179 Deduction"}),d.jsx("p",{className:"text-2xl font-bold text-green-600",children:o(t.totals.total_section_179)})]}),d.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Rental Income"}),d.jsx("p",{className:"text-2xl font-bold text-purple-600",children:o(t.totals.total_rental_income)})]}),d.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Net Income"}),d.jsx("p",{className:"text-2xl font-bold text-orange-600",children:o(t.totals.total_net_income)})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Required Tax Forms"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.forms_needed.map((c,h)=>d.jsxs("div",{className:"flex items-center p-3 border border-gray-200 rounded-lg",children:[d.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full mr-3"}),d.jsx("span",{className:"text-sm font-medium",children:c})]},h))})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Compliance Checklist"}),d.jsx("div",{className:"space-y-3",children:t.compliance_checklist.map((c,h)=>d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full mr-3 mt-0.5 flex-shrink-0"}),d.jsx("span",{className:"text-sm",children:c})]},h))})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Download Forms"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.jsxs("button",{onClick:()=>a("Form 4562"),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Form 4562"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Depreciation and Amortization"})]}),d.jsxs("button",{onClick:()=>a("Schedule E"),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Schedule E"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Supplemental Income and Loss"})]}),d.jsxs("button",{onClick:()=>a("Form 4797"),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:"Form 4797"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Sales of Business Property"})]})]})]})]}):d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsx($a,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Tax Form Templates"}),d.jsx("p",{className:"text-gray-600",children:"Download tax form templates for your real estate business. These are template forms that you can use as a starting point."})]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map((c,h)=>d.jsx("button",{onClick:()=>a(c.name),className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left group",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:c.name.split(" - ")[0]}),d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.description}),d.jsx("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:c.category})]}),d.jsx(Iu,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600 transition-colors"})]})},h))})]}),d.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Important Information"}),d.jsxs("div",{className:"space-y-3 text-sm text-blue-800",children:[d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3 mt-2 flex-shrink-0"}),d.jsx("p",{children:"These are template forms for reference only. Always consult with a tax professional for accurate completion."})]}),d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3 mt-2 flex-shrink-0"}),d.jsx("p",{children:"Add properties to your portfolio to generate personalized tax calculations and form data."})]}),d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-3 mt-2 flex-shrink-0"}),d.jsx("p",{children:"Section 179 and bonus depreciation calculations will be available when properties are added."})]})]})]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("button",{className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center mx-auto",children:[d.jsx(Ab,{className:"h-5 w-5 mr-2"}),"Add Your First Property"]}),d.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Add properties to generate personalized tax calculations and form data"})]})]})]})},xF=()=>{const[t,e]=V.useState(!1),[n,r]=V.useState(null),[i,s]=V.useState(null),o=async()=>{try{e(!0);const h=await Qe.exportData(),f=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),p=URL.createObjectURL(f),y=document.createElement("a");y.href=p,y.download=`str-tax-tracker-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(p),r({type:"success",text:"Data exported successfully!"})}catch{r({type:"error",text:"Failed to export data"})}finally{e(!1)}},a=async h=>{const f=h.target.files[0];if(f)try{e(!0);const p=await f.text(),y=JSON.parse(p);await Qe.importData(y)?(r({type:"success",text:"Data imported successfully! Please refresh the page."}),setTimeout(()=>window.location.reload(),2e3)):r({type:"error",text:"Failed to import data"})}catch{r({type:"error",text:"Invalid file format"})}finally{e(!1),h.target.value=""}},l=async()=>{if(window.confirm("Are you sure you want to delete all data? This action cannot be undone."))try{e(!0),await Qe.clearAllData(),r({type:"success",text:"All data cleared successfully!"}),setTimeout(()=>window.location.reload(),2e3)}catch{r({type:"error",text:"Failed to clear data"})}finally{e(!1)}},c=async()=>{try{const h=await Qe.getStorageInfo();s(h)}catch(h){console.error("Failed to get storage info:",h)}};return Yp.useEffect(()=>{c()},[]),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Data Management"}),d.jsx("p",{className:"text-gray-600",children:"Export, import, and manage your data"})]}),n&&d.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center ${n.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[n.type==="success"?d.jsx(Ab,{className:"h-5 w-5 mr-2"}):d.jsx(ri,{className:"h-5 w-5 mr-2"}),n.text]}),i&&d.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[d.jsxs("div",{className:"flex items-center mb-2",children:[d.jsx(Pb,{className:"h-5 w-5 text-blue-600 mr-2"}),d.jsx("h3",{className:"font-semibold text-blue-900",children:"Storage Information"})]}),d.jsxs("div",{className:"text-sm text-blue-800",children:[d.jsxs("p",{children:["Status: ",i.available?"Available":"Not Available"]}),i.available&&d.jsxs("div",{className:"mt-2",children:[d.jsxs("div",{className:"flex justify-between items-center mb-1",children:[d.jsx("span",{children:"Usage:"}),d.jsxs("span",{children:[Math.round(i.used/i.total*100),"%"]})]}),d.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:d.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(i.used/i.total*100,100)}%`}})}),d.jsxs("p",{className:"text-xs mt-1",children:[Math.round(i.used/1024),"KB used of ",Math.round(i.total/1024),"KB"]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(Iu,{className:"h-6 w-6 text-green-600 mr-3"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Data"})]}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Download a backup of all your data including properties, bookings, expenses, and depreciation records."}),d.jsx("button",{onClick:o,disabled:t,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:t?d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):d.jsxs(d.Fragment,{children:[d.jsx(Iu,{className:"h-5 w-5 mr-2"}),"Export All Data"]})})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(vv,{className:"h-6 w-6 text-blue-600 mr-3"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Data"})]}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Import previously exported data. This will replace all current data."}),d.jsxs("label",{className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 cursor-pointer transition-colors flex items-center justify-center",children:[d.jsx("input",{type:"file",accept:".json",onChange:a,disabled:t,className:"hidden"}),t?d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):d.jsxs(d.Fragment,{children:[d.jsx(vv,{className:"h-5 w-5 mr-2"}),"Import Data"]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 md:col-span-2",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(yv,{className:"h-6 w-6 text-red-600 mr-3"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Clear All Data"})]}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Permanently delete all your data. This action cannot be undone."}),d.jsx("button",{onClick:l,disabled:t,className:"w-full bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:t?d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):d.jsxs(d.Fragment,{children:[d.jsx(yv,{className:"h-5 w-5 mr-2"}),"Clear All Data"]})})]})]}),d.jsx("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(ri,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Data Safety"}),d.jsx("p",{className:"text-sm text-yellow-800",children:"Your data is stored locally in your browser. Make sure to export your data regularly as a backup. Data may be lost if you clear your browser data or switch devices."})]})]})})]})};function wF(){return d.jsx(iO,{children:d.jsxs(RA,{children:[d.jsx(br,{path:"/",element:d.jsx(pF,{})}),d.jsx(br,{path:"/properties",element:d.jsx(mF,{})}),d.jsx(br,{path:"/transactions",element:d.jsx(gF,{})}),d.jsx(br,{path:"/material-participation",element:d.jsx(yF,{})}),d.jsx(br,{path:"/depreciation",element:d.jsx(vF,{})}),d.jsx(br,{path:"/tax-forms",element:d.jsx(_F,{})}),d.jsx(br,{path:"/data-manager",element:d.jsx(xF,{})})]})})}ff.createRoot(document.getElementById("root")).render(d.jsx(Yp.StrictMode,{children:d.jsx(FA,{children:d.jsx(wF,{})})}));
